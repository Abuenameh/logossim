{"version":3,"sources":["../../core/Simulation/simulation.worker.js","ui-components/Tour/images/bifurcation.gif","ui-components/Tour/images/context-menu.gif","ui-components/Tour/images/simulation.gif","ui-components/Tour/images/wire.gif","../../core/Diagram/states/common.js","../../core/Simulation/utils.js","../../core/Link/LinkModel.js","../../core/Port/PortModel.js","../../core/Simulation/AudioEngine.js","../../core/Simulation/serialize.js","../../core/Simulation/SimulationEngine.js","../../core/BaseModel.js","../../core/ComponentContext.jsx","../../core/Component.jsx","../../core/Diagram/DiagramContext.jsx","../../core/Diagram/DroppableLayer.jsx","../../core/Diagram/Diagram.jsx","../../core/Link/LinkWidget.jsx","../../core/Link/LinkFactory.jsx","../../core/Port/PortFactory.js","../../core/Diagram/actions/ClipboardAction.js","../../core/Diagram/actions/DeleteAction.js","../../core/Diagram/actions/DuplicateAction.js","../../core/Diagram/actions/UndoRedoAction.js","../../core/Diagram/actions/ZoomAction.js","../../core/Diagram/Command/commandHandlers.js","../../core/Diagram/Command/Command.js","../../core/Diagram/Command/CommandManager.js","../../core/Diagram/states/handleLinkDrag.js","../../core/Port/Port.jsx","../../core/Diagram/states/BifurcateLinkState.js","../../core/Diagram/states/DragCanvasState.js","../../core/Diagram/states/DragNewLinkState.js","../../core/Diagram/states/MoveItemsState.js","../../core/Diagram/states/SelectionBoxState.js","../../core/Diagram/states/SelectingState.js","../../core/Diagram/states/States.js","../../core/Diagram/DiagramEngine.js","../../components/portExtendUtils.js","../../components/And/AndWidget.jsx","../../components/And/AndIcon.jsx","../../components/And/AndRegister.js","../../components/And/AndModel.js","../../components/Buffer/BufferWidget.jsx","../../components/Buffer/BufferIcon.jsx","../../components/Buffer/BufferRegister.js","../../components/Buffer/BufferModel.js","../../components/Button/ButtonWidget.jsx","../../components/Button/ButtonIcon.jsx","../../components/Button/ButtonRegister.js","../../components/Button/ButtonModel.js","../../components/Buzzer/BuzzerWidget.jsx","../../components/Buzzer/BuzzerIcon.jsx","../../components/Buzzer/BuzzerRegister.js","../../components/Buzzer/BuzzerModel.js","../../components/Clock/ClockWidget.jsx","../../components/Clock/ClockIcon.jsx","../../components/Clock/ClockRegister.js","../../components/Clock/ClockModel.js","../../components/ControlledBuffer/ControlledBufferWidget.jsx","../../components/ControlledBuffer/ControlledBufferIcon.jsx","../../components/ControlledBuffer/ControlledBufferRegister.js","../../components/ControlledBuffer/ControlledBufferModel.js","../../components/ControlledInverter/ControlledInverterWidget.jsx","../../components/ControlledInverter/ControlledInverterIcon.jsx","../../components/ControlledInverter/ControlledInverterRegister.js","../../components/ControlledInverter/ControlledInverterModel.js","../../components/Counter/CounterWidget.jsx","../../components/Counter/CounterIcon.jsx","../../components/Counter/CounterRegister.js","../../components/Counter/CounterModel.js","../../components/Demux/DemuxWidget.jsx","../../components/Demux/DemuxIcon.jsx","../../components/Demux/DemuxRegister.js","../../components/Demux/DemuxModel.js","../../components/Ground/GroundWidget.jsx","../../components/Ground/GroundIcon.jsx","../../components/Ground/GroundRegister.js","../../components/Ground/GroundModel.js","../../components/Input/InputWidget.jsx","../../components/Input/InputIcon.jsx","../../components/Input/InputRegister.js","../../components/Input/InputModel.js","../../components/Joiner/JoinerWidget.jsx","../../components/Joiner/JoinerIcon.jsx","../../components/Joiner/JoinerRegister.js","../../components/Joiner/JoinerModel.js","../../components/Led/LedWidget.jsx","../../components/Led/LedIcon.jsx","../../components/Led/LedRegister.js","../../components/Led/LedModel.js","../../components/Mux/MuxWidget.jsx","../../components/Mux/MuxIcon.jsx","../../components/Mux/MuxRegister.js","../../components/Mux/MuxModel.js","../../components/Nand/NandWidget.jsx","../../components/Nand/NandIcon.jsx","../../components/Nand/NandRegister.js","../../components/Nand/NandModel.js","../../components/Nor/NorWidget.jsx","../../components/Nor/NorIcon.jsx","../../components/Nor/NorRegister.js","../../components/Nor/NorModel.js","../../components/Not/NotWidget.jsx","../../components/Not/NotIcon.jsx","../../components/Not/NotRegister.js","../../components/Not/NotModel.js","../../components/Or/OrWidget.jsx","../../components/Or/OrIcon.jsx","../../components/Or/OrRegister.js","../../components/Or/OrModel.js","../../components/Output/OutputWidget.jsx","../../components/Output/OutputIcon.jsx","../../components/Output/OutputRegister.js","../../components/Output/OutputModel.js","../../components/Power/PowerWidget.jsx","../../components/Power/PowerIcon.jsx","../../components/Power/PowerRegister.js","../../components/Power/PowerModel.js","../../components/Ram/RamIcon.jsx","../../components/Ram/RamWidget.jsx","../../components/Ram/RamRegister.js","../../components/Ram/RamModel.js","../../components/Rom/RomIcon.jsx","../../components/Rom/RomWidget.jsx","../../components/Rom/RomRegister.js","../../components/Rom/RomModel.js","../../components/Splitter/SplitterWidget.jsx","../../components/Splitter/SplitterIcon.jsx","../../components/Splitter/SplitterRegister.js","../../components/Splitter/SplitterModel.js","../../components/Ssd/SsdWidget.jsx","../../components/Ssd/SsdIcon.jsx","../../components/Ssd/SsdRegister.js","../../components/Ssd/SsdModel.js","../../components/Switch/SwitchWidget.jsx","../../components/Switch/SwitchIcon.jsx","../../components/Switch/SwitchRegister.js","../../components/Switch/SwitchModel.js","../../components/Xnor/XnorWidget.jsx","../../components/Xnor/XnorIcon.jsx","../../components/Xnor/XnorRegister.js","../../components/Xnor/XnorModel.js","../../components/Xor/XorWidget.jsx","../../components/Xor/XorIcon.jsx","../../components/Xor/XorRegister.js","../../components/Xor/XorModel.js","../../components/JKFlipFlop/JKFlipFlopWidget.jsx","../../components/JKFlipFlop/JKFlipFlopIcon.jsx","../../components/JKFlipFlop/JKFlipFlopRegister.js","../../components/JKFlipFlop/JKFlipFlopModel.js","../../components/index.js","ui-components/Buttons/ComponentSelectButton.jsx","ui-components/Icons/ArrowLeft.jsx","ui-components/Icons/Chevron.jsx","ui-components/Icons/Chevrons.jsx","ui-components/Icons/Close.jsx","ui-components/Icons/Copy.jsx","ui-components/Icons/Cut.jsx","ui-components/Icons/Delete.jsx","ui-components/Icons/Duplicate.jsx","ui-components/Icons/Edit.jsx","ui-components/Icons/Paste.jsx","ui-components/Icons/Pause.jsx","ui-components/Icons/Play.jsx","ui-components/Icons/Redo.jsx","ui-components/Icons/Settings.jsx","ui-components/Icons/Stop.jsx","ui-components/Icons/Undo.jsx","ui-components/Icons/ZoomIn.jsx","ui-components/Icons/ZoomOut.jsx","ui-components/Icons/RotateLeft.jsx","ui-components/Icons/RotateRight.jsx","ui-components/Buttons/SimulationControlButtons.jsx","ui-components/Modal/Modal.jsx","ui-components/Modal/ModalContentLayout.jsx","ui-components/ComponentSelect/ComponentConfigurationInput.jsx","ui-components/ComponentSelect/DraggableComponent.jsx","ui-components/ComponentSelect/ComponentConfiguration.jsx","ui-components/ComponentSelect/ComponentEdit.jsx","ui-components/ComponentSelect/ComponentGroup.jsx","ui-components/ComponentSelect/ComponentSearch.jsx","ui-components/ComponentSelect/ComponentSelect.jsx","ui-components/Key/Key.jsx","ui-components/ContextMenus/ContextMenuIconContainer.jsx","ui-components/ContextMenus/ContextMenuShortcutContainer.jsx","ui-components/ContextMenus/ComponentContextMenu.jsx","ui-components/ContextMenus/DiagramContextMenu.jsx","ui-components/ContextMenus/ContextMenus.jsx","ui-components/Help/HelpAbout.jsx","ui-components/Help/HelpKeyboardShortcuts.jsx","ui-components/LoadingExample/LoadingExample.jsx","ui-components/Snackbar/Snackbar.jsx","ui-components/Titlebar/Titlebar.jsx","ui-components/Tour/tourCircuit.js","ui-components/Tour/Tour.jsx","App.jsx","serviceWorker.js","../../core/common/prototype.js","index.js"],"names":["module","exports","Worker","snap","position","gridSize","Point","Math","round","x","y","samePosition","p1","p2","sameX","points","map","p","every","i","arr","sameY","sameAxis","closestPointToLink","P","link","distance","A","B","hypot","closestPointOnSegment","Q","segment","v","u","t","closest","point","distanceToA","distanceToB","hasMiddlePoint","getFirstPosition","getLastPosition","firstSegment","getMiddlePosition","lastSegment","isPointOverSegment","max","min","isPointOverLink","getSecondPosition","isPointOverFirstLinkSegment","isPointOverSecondLinkSegment","getLandingLink","engine","getLastPoint","getPosition","Object","values","getModel","getLinkLayers","getLinks","find","target","getID","getIncompatibleWidthsErrorMessage","source","getBits","MAX_VALUE","1","2","4","8","16","isValueValid","value","Array","isArray","isValueError","some","LinkModel","options","type","bifurcations","bifurcationSource","bifurcationTarget","bits","this","getParent","getOptions","label","LabelModel","newLabel","DefaultLabelModel","setLabel","getBifurcationSource","getBifurcationTarget","bifurcation","push","filter","b","result","forEach","getAllBifurcations","flat","Infinity","selected","setSelected","getSourcePort","getTargetPort","remove","removeBifurcation","event","registerModel","data","requestAnimationFrame","PointModel","then","addBifurcation","setBifurcationSource","setBifurcationTarget","repaintCanvas","pointModel","index","setPosition","getGridSize","getPoints","length","getFirstPoint","getSecondPoint","getMiddlePoint","getSecondLastPoint","first","middle","last","includes","Error","isSelected","asNumber","getComputedStyle","document","body","getPropertyValue","RDLinkModel","validateDefaultValue","portName","PortModel","maximumLinks","input","defaultFloatingValue","defaultErrorValue","orientation","complemented","offset","getName","fill","bit","getDefaultFloatingValue","getDefaultErrorValue","keys","getMaximumLinks","port","isNewLinkAllowed","setBits","links","getMainLink","getColor","RDPortModel","AudioEngine","context","AudioContext","destination","audios","id","frequency","waveform","gainNode","createGain","gain","oscillator","createOscillator","connect","start","getGainNode","e","disconnect","getOscillator","payload","command","create","play","pause","setFrequency","setWaveform","getAudio","audio","stop","serializeComponents","components","component","getType","configurations","ports","name","isInput","properties","instance","key","reduce","obj","getPortInfo","componentId","getLinkId","serialize","diagram","models","Class","Model","methods","getOwnPropertyNames","prototype","methodName","toString","getActiveLinkLayer","getModels","getBifurcations","isBifurcation","getActiveNodeLayer","worker","SimulationWorker","SimulationEngine","onSimulationMessage","appendDiff","audioEngine","handlePayload","cleanUp","addEventListener","state","clearDiff","postMessage","undefined","a","Promise","resolve","waitForEnd","removeEventListener","diff","getPort","nameOrInstance","BaseModel","canRotate","initialize","floating","error","setAsInput","setDefaultFloatingValue","setDefaultErrorValue","setOrientation","setComplemented","setOffset","setLength","setAsOutput","configuration","addInputPort","isOutput","addOutputPort","fromEntries","entries","getPorts","args","clone","getX","getY","from","emitted","emit","NodeModel","ComponentContext","React","createContext","Component","description","group","model","widget","icon","Widget","Icon","storeRef","Provider","initialConfig","AbstractReactFactory","DiagramContext","DroppableLayer","styled","div","attrs","disabled","props","onDragOver","preventDefault","onDrop","JSON","parse","dataTransfer","getData","handleComponentDrop","FullscreenCanvas","CanvasWidget","Diagram","test","isLocked","getEngine","LinkWidget","refPaths","updateRenderedPaths","clearRenderedPaths","setRenderedPaths","ref","current","to","tuple","path","factory","createRef","cloneElement","generateLinkSegment","loose","color","r","getPointRadius","stroke","strokeWidth","cx","cy","bifurcationOrigin","lastSourcePoint","renderPoint","bifurcationTargetPosition","data-default-link-test","testName","generatePathPoints","renderSegment","generateLinePath","renderBifurcationSourcePoint","renderBifurcationTargetPoint","renderLooseLinkPoint","Path","LinkFactory","diagramEngine","getLineWidth","d","DefaultLinkFactory","PortFactory","AbstractModelFactory","ClipboardAction","areShortcutsAllowed","InputType","KEY_DOWN","fire","matchesInput","code","handleCut","handleCopy","handlePaste","ctrlKey","getSelectedComponents","getSelectedEntities","entity","copies","fireEvent","nodes","node","getAllLinks","localStorage","setItem","stringify","clipboard","getItem","clearSelection","serialized","modelInstance","getChildModelFactoryBank","getFactory","generateModel","deserialize","addNode","Action","DeleteAction","handleAction","entities","nodesLinks","DuplicateAction","clones","UndoRedoAction","shiftKey","handleUndo","handleRedo","commands","undo","redo","ZOOM_LEVELS","ZoomAction","MOUSE_WHEEL","stopPropagation","getLayers","layer","allowRepaint","nextZoomLevelIndex","zoomDirection","sign","deltaY","currentZoomLevelIndex","indexOf","getZoomLevel","oldZoomFactor","setZoomLevel","zoomFactor","boundingRect","getCanvas","getBoundingClientRect","clientWidth","width","clientHeight","height","widthDiff","heightDiff","clientX","left","clientY","top","xFactor","getOffsetX","yFactor","getOffsetY","commandHandlers","editComponentConfiguration","adjustLink","nodeList","sourcePort","n","setSourcePort","addLink","targetPort","setTargetPort","componentsAdded","add","execute","componentEdited","after","before","linkAdded","linkChanged","handleLinkChanged","getLink","setPoints","oldTarget","entitiesRemoved","sort","l1","l2","entitiesMoved","handleEntitiesMoved","getNode","Command","CommandManager","clear","stack","nextLinkPosition","initialRelative","sourcePosition","zoomLevelPercentage","engineOffsetX","engineOffsetY","getRelativePoint","initialXRelative","initialYRelative","linkNextX","virtualDisplacementX","linkNextY","virtualDisplacementY","handleLinkDrag","next","hasStartedMoving","removePoint","moveDirection","addPoint","generatePoint","WrappedComponent","BifurcateLinkState","showSnackbar","sourceEdited","sourceBefore","getLinkPoints","registerAction","MOUSE_DOWN","getMouseElement","snapPointToSourceLink","getRelativeMousePoint","eject","getLinkFactories","MOUSE_UP","isNearbySourcePosition","reportPosition","adjustBifurcationOverlayingSource","landing","mergeWithBifurcation","sourcePoints","closestCorner","getClosestCornerToPosition","closestPath","getClosestPathToPosition","snappedPosition","axis","sourcePoint","getPathPoints","pathPosition","getPathDirections","abs","secondLast","getSecondLastPosition","bifurcationToMerge","newMiddle","newLast","isStraight","adjustBifurcationPoints","newSource","call","AbstractDisplacementState","DragCanvasState","prev","initialCanvasX","initialCanvasY","nativeEvent","which","targetTouches","displacementX","displacementY","DragNewLinkState","createLinkModel","getPrototypeOf","isNearbySourcePort","canLinkToPort","reverse","getFactoryForLink","tolerance","sourcePortSize","sourcePortPosition","MoveItemsState","getNodesPositions","getLinksPoints","adjustLinkPoints","linkDirections","adjustLinkBifurcations","lastDisplacement","element","getActionEventBus","getModelForEvent","getLinkDirections","nodesBefore","linksBefore","previous","initialPositions","entry","getBifurcatedLinks","getLinksFromNode","acc","getLinkDirection","currentDisplacement","moveEntity","adjustNodeLinks","item","initial","getGridPosition","adjustFirstAndLastPoints","closestToFirst","closestToLast","SelectionBoxState","SelectionLayerModel","addLayer","rel","right","bottom","setBox","getBoxDimensions","relative","initialX","initialY","rect","Rectangle","getSelectionEntities","getBoundingBox","allowSelection","bounds","containsPoint","getTopLeft","getBottomRight","SelectingState","transitionWithEvent","State","States","childStates","dragCanvas","dragNewLink","bifurcateLink","dragItems","TOUCH_START","DiagramEngine","initializeEngine","createEngine","registerDefaultDeleteItemsAction","registerDefaultZoomCanvasAction","registerListener","getStateMachine","pushState","getPortFactories","registerFactory","registerComponents","initializeModel","DiagramModel","setGridSize","setLocked","eventDidFire","function","adjustGridOffset","adjustGridZoom","realignGrid","setModel","getNodeFactories","load","circuit","deserializeModel","locked","repaint","offsetX","offsetY","zoom","style","setProperty","c","getSnappedRelativeMousePoint","window","innerWidth","innerHeight","getSnappedWindowCenter","handleComponentEdit","configurationsBefore","portsBefore","hasNewPort","newPort","hasRemovedPort","oldPort","portBefore","getSelectedNodes","fireAction","duplicateSelected","cutSelected","copySelected","pasteSelected","deleteSelected","zoomIn","zoomOut","synchronizeLink","setValue","synchronizeComponent","output","clearAllValues","clearLinkValues","clearPortValues","getNodes","Wire","Circle","marginSide","Bubble","Port","className","getOrientation","getLength","getOffset","isComplemented","widths","heights","x1s","x2s","y2s","data-name","data-nodeid","title","display","x1","y1","x2","y2","getLineColor","PortWidget","withProps","useContext","distributePorts","numPorts","isNumberOfPortsEven","closestEven","startAt","floor","splice","PortExtensionBar","size","place","PortExtension","portPositions","lastPortPosition","Wrapper","PositionedPort","edge","side","Shape","viewBox","transform","transformOrigin","AndWidget","inputPorts","getInputPorts","inputEdges","inputSides","AndIcon","default","validate","INPUT_PORTS_NUMBER","Number","dataBits","DATA_BITS","ORIENTATION","executeBit","step","out","asArray","transpose","stepFloating","stepError","BufferWidget","BufferIcon","in","Button","button","ButtonWidget","buttonRef","useRef","handleReleaseAway","contains","onRelease","useEffect","onMouseDown","onClick","onMouseUp","ButtonIcon","as","onSimulationStart","Body","isActive","Hole","children","data-testid","BuzzerWidget","BuzzerIcon","frequencyHz","FREQUENCY_HZ","WAVEFORM","createAudio","getInput","onSimulationPause","getValue","Decoration","periodMs","animateTransition","transition","ClockWidget","ClockIcon","emitInterval","highCount","lowCount","setInterval","lastOutput","getNextOutput","HIGH_DURATION","LOW_DURATION","clearInterval","onSimulationStop","getOutput","ControlledBufferWidget","ControlledBufferIcon","control","dWidth","dHeight","translation","ControlledInverterWidget","ControlledInverterIcon","PositionedChevron","strokeLinecap","CounterWidget","CounterIcon","START_AT","countOnRising","COUNT_ON","wrapAt","WRAP_AT","stepValue","STEP_VALUE","isRisingEdge","meta","risingEdge","fallingEdge","outputNumber","DemuxWidget","outputPorts","getOutputPorts","DemuxIcon","OUTPUT_NUMBER","log2","_","selection","strokeLinejoin","GroundWidget","GroundIcon","SHAPE_SIZES","PIN_BACKGROUND","0","PIN_BORDER","PinContainer","Pin","InputWidget","positions","getBitAt","InputIcon","threeState","THREE_STATE","nextValue","bitHeight","JoinerWidget","JoinerIcon","LedWidget","LedIcon","activeWhen","ACTIVE_WHEN","colors","on","ON_COLOR","off","OFF_COLOR","inputNumber","MuxWidget","MuxIcon","INPUT_NUMBER","vbWidth","vbHeight","NandWidget","dWidths","dHeights","NandIcon","PortExtensionConnector","portWidth","portColor","NorWidget","NorIcon","NotWidget","NotIcon","OrWidget","OrIcon","format","span","ErrorMessage","FloatingMessage","OutputWidget","OUTPUT_FORMAT","mapBits","number","padStart","showAsNumber","OutputIcon","fillOpacity","PowerWidget","PowerIcon","RamIcon","Memory","Cell","ActiveAddress","AddressValueContainer","Address","Value","RamWidget","memory","getMemory","selectedAddress","getAddress","range","address","getMemoryDisplayRange","slice","formattedAddress","dataWidth","DATA_WIDTH","addressWidth","ADDRESS_WIDTH","CONTENT","parseBinary","clearMemory","select","currentAddress","clock","getWireValue","RomIcon","RomWidget","SplitterWidget","SplitterIcon","SEGMENTS","horizontal","segments","opacity","f","g","dp","getPositionForSegment","getSideForSegment","SsdIcon","vertical","Switch","SwitchValue","SwitchWidget","SwitchIcon","mask","XnorWidget","XnorIcon","behavior","MULTIPLE_INPUT_BEHAVIOR","executeOne","executeEven","bind","XorWidget","XorIcon","executeOdd","PORTS","PositionedLabel","JKFlipFlopWidget","getPositionForPort","getSideForPort","getSideForPortLabel","getLabelForPort","getPortLabelOffset","isPortComplemented","JKFlipFlopIcon","triggerOnRising","TRIGGER_ON","J","labelSide","labelOffset","Clock","K","Clear","Qbar","initialValues","newQ","Input","Output","Led","Ssd","Buzzer","And","Nand","Or","Nor","Xor","Xnor","Buffer","Not","ControlledBuffer","ControlledInverter","Splitter","Joiner","Power","Ground","Mux","Demux","Ram","Rom","Counter","JKFlipFlop","groupedComponents","Container","ComponentSelectButton","handleClick","data-for","data-tip","data-place","ArrowLeft","Chevron","Chevrons","Close","Copy","rx","ry","Cut","Delete","Duplicate","Edit","Paste","Pause","Play","Redo","Settings","Stop","Undo","ZoomIn","ZoomOut","RotateLeft","RotateRight","SimulationControlButtons","handleClickStart","handleClickPause","handleClickStop","Overlay","Window","Modal","Header","Title","h1","Subtitle","h2","Content","IconButton","form","field","componentType","innerRef","htmlFor","option","accept","onChange","files","handleError","fr","FileReader","onerror","onload","file","setFieldValue","exception","readAsText","ComponentConfigurationInput","errors","diagramEngineStub","getPortCoords","getWidth","getHeight","getTooltip","ErrorWidget","DraggableComponent","handleClose","draggable","onDragStart","setDragImage","currentTarget","setData","Tooltip","hide","DragArea","FormScroll","Form","BaseForm","Footer","Hint","SubmitButton","getInitialValues","ComponentConfiguration","editMode","handleBack","handleSubmit","firstInputRef","focus","rebuild","onSubmit","isValid","autoComplete","getFormSubmitLabel","ComponentEdit","isOpen","callback","useCallback","closeOnEsc","edit","HorizontalSeparator","hr","ComponentsGrid","ComponentButton","ComponentTitle","ComponentIcon","ComponentGroup","handleComponentSelect","useState","setOpen","SearchBar","Scroll","ComponentSearch","groups","filteredGroups","setFilteredGroups","searchText","setSearchText","autoFocus","placeholder","like","RegExp","newFilteredGroups","match","handleSearchChange","onKeyDown","handleKeyDown","ComponentSelect","selectedComponent","setSelectedComponent","Key","ContextMenuIconContainer","ContextMenuShortcutContainer","ComponentContextMenu","rotateLeft","rotateRight","configureComponent","DiagramContextMenu","ContextMenus","Version","Divider","HelpAbout","paddingTop","marginTop","overflowY","flexDirection","alignItems","src","process","alt","version","margin","textAlign","href","namespace","repo","TableContainer","Table","table","TableColumn","td","HelpKeyboardShortcuts","LoadingExample","BACKGROUND_COLOR","warning","info","success","open","Message","progress","keyframes","ProgressBar","paused","timeout","TRANSITION_DURATION","Snackbar","message","split","string","isHidden","NameContainer","isFocused","NameInput","ButtonsContainer","FileInput","HelpButton","HelpButtonMenu","HelpButtonMenuItem","HideButton","Titlebar","circuitName","isCircuitNameFocused","handleChangeCircuitName","handleFocusCircuitName","handleBlurCircuitName","handleClickSave","handleFileLoad","handleClickKeyboardShortcuts","handleClickRedoTour","handleClickAbout","helpButtonRef","helpMenuRef","nameInputRef","fileInputRef","isHelpMenuOpen","setHelpMenuOpen","setHidden","handleToggleHelpMenu","handleClickAway","onFocus","onBlur","blur","maxLength","click","hidden","DIMENSIONS","createdAt","updatedAt","layers","isSvg","transformed","labels","parentNode","and","not","pulse","Pulse","Beacon","forwardRef","imageStyle","alignSelf","borderRadius","boxShadow","marginBottom","Tour","recenterTourCircuit","currentStep","run","recenterCircuit","action","setTourRunning","loadCircuit","clearCircuit","EVENTS","STEP_AFTER","ACTIONS","NEXT","PREV","setState","TOUR_END","CLOSE","steps","content","placement","showProgress","disableOverlayClose","locale","skip","spotlightPadding","contextMenu","wire","simulation","lineHeight","showSkipButton","stepIndex","continuous","scrollToFirstStep","styles","tooltip","tooltipContent","fontSize","buttonBack","buttonNext","background","buttonSkip","border","back","close","beaconComponent","App","isComponentSelectOpen","isComponentEditOpen","isHelpKeyboardOpen","isHelpAboutOpen","isTourRunning","shortcutHandler","isStopped","showAddComponent","selectedNodes","showEditComponent","isRunning","handleClickLoad","isCircuitEmpty","loadFile","circuitCreatedAt","loadExample","isLoadingExample","fetch","response","json","loadHandler","lastSaved","isTourAvailable","confirm","removeItem","shouldWarnUnload","currentCircuit","lastSavedCircuit","unloadHandler","generateFile","returnValue","Date","autoSave","synchronizeSimulation","getDiff","componentDiff","renderSimulation","handleCircuitNameChange","handleCircuitNameFocus","handleCircuitNameBlur","blob","Blob","filename","replace","FileSaver","saveAs","getElementById","forceUpdate","hideAddComponent","componentEdit","hideEditComponent","rotateComponentBy","increment","rotateComponentLeft","rotateComponentRight","showHelpTour","showHelpKeyboard","hideHelpKeyboard","showHelpAbout","hideHelpAbout","snackbar","clearTimeout","timeoutID","hideSnackbar","res","setTimeout","handleLoadTourCircuit","circuitBeforeTour","tourCircuit","handleCenterTourCircuitOffset","handleUnloadTourCircuit","example","URLSearchParams","location","search","get","autoSaveInterval","getState","globalEventOff","Boolean","hostname","curr","concat","String","char","arrayLength","fillWith","sanitize","chunk","parseInt","original","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a87bf202.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"SimulationWorker.878fd11fb50547bc230f.js\");\n};","module.exports = __webpack_public_path__ + \"static/media/bifurcation.e3ec32b9.gif\";","module.exports = __webpack_public_path__ + \"static/media/context-menu.94343183.gif\";","module.exports = __webpack_public_path__ + \"static/media/simulation.2d0f910c.gif\";","module.exports = __webpack_public_path__ + \"static/media/wire.e7e521da.gif\";","import { Point } from '@projectstorm/geometry';\n\n/**\n * Returns a position, but snapped to the grid.\n */\nexport const snap = (position, gridSize = 15) => {\n  if (position instanceof Point) {\n    return new Point(\n      Math.round(position.x / gridSize) * gridSize,\n      Math.round(position.y / gridSize) * gridSize,\n    );\n  }\n\n  return Math.round(position / gridSize) * gridSize;\n};\n\n/**\n * Checks if two points are on the same position.\n */\nexport const samePosition = (p1, p2) =>\n  p1 &&\n  p2 &&\n  Math.round(p1.x) === Math.round(p2.x) &&\n  Math.round(p1.y) === Math.round(p2.y);\n\n/**\n * Checks if all given points share the same X position.\n */\nexport const sameX = (...points) =>\n  points.map(p => Math.round(p.x)).every((p, i, arr) => p === arr[0]);\n\n/**\n * Checks if all given points share the same Y position.\n */\nexport const sameY = (...points) =>\n  points.map(p => Math.round(p.y)).every((p, i, arr) => p === arr[0]);\n\n/**\n * Checks if all given points share positions on any axis.\n */\nexport const sameAxis = (...points) =>\n  sameX(...points) || sameY(...points);\n\n/**\n * Checks if two points are nearby each other, given a tolerance.\n */\nexport const nearby = (p1, p2, tolerance) =>\n  Math.abs(p1.x - p2.x) <= tolerance &&\n  Math.abs(p1.y - p2.y) <= tolerance;\n\n/**\n * Finds the closest position to a link from a given point.\n */\nexport const closestPointToLink = (P, link) => {\n  const distance = (A, B) => Math.hypot(A.x - B.x, A.y - B.y);\n\n  const closestPointOnSegment = (Q, segment) => {\n    const { A, B } = segment;\n\n    const v = new Point(B.x - A.x, B.y - A.y);\n    const u = new Point(A.x - Q.x, A.y - Q.y);\n\n    const vu = v.x * u.x + v.y * u.y;\n    const vv = v.x ** 2 + v.y ** 2;\n\n    const t = -vu / vv;\n\n    // Closest point lies between A and B\n    if (t >= 0 && t <= 1) {\n      const closest = new Point(\n        (1 - t) * A.x + t * B.x,\n        (1 - t) * A.y + t * B.y,\n      );\n      return {\n        point: closest,\n        distance: distance(Q, closest),\n      };\n    }\n\n    // Closest point is either A or B\n    const distanceToA = distance(Q, A);\n    const distanceToB = distance(Q, B);\n\n    return distanceToA <= distanceToB\n      ? { point: A, distance: distanceToA }\n      : { point: B, distance: distanceToB };\n  };\n\n  if (!link.hasMiddlePoint()) {\n    return closestPointOnSegment(P, {\n      A: link.getFirstPosition(),\n      B: link.getLastPosition(),\n    }).point;\n  }\n\n  const firstSegment = closestPointOnSegment(P, {\n    A: link.getFirstPosition(),\n    B: link.getMiddlePosition(),\n  });\n\n  const lastSegment = closestPointOnSegment(P, {\n    A: link.getMiddlePosition(),\n    B: link.getLastPosition(),\n  });\n\n  if (firstSegment.distance <= lastSegment.distance) {\n    return firstSegment.point;\n  }\n  return lastSegment.point;\n};\n\n/**\n * Determines is a point is over a given segment.\n */\nconst isPointOverSegment = (point, segment) => {\n  const { A, B } = segment;\n\n  if (sameX(A, point, B)) {\n    const max = Math.max(A.y, B.y);\n    const min = Math.min(A.y, B.y);\n\n    return min <= point.y && point.y <= max;\n  }\n\n  if (sameY(A, point, B)) {\n    const max = Math.max(A.x, B.x);\n    const min = Math.min(A.x, B.x);\n\n    return min <= point.x && point.x <= max;\n  }\n\n  return false;\n};\n\n/**\n * Determines if a point is over a given link's first segment.\n */\nexport const isPointOverFirstLinkSegment = (point, link) =>\n  isPointOverSegment(point, {\n    A: link.getFirstPosition(),\n    B: link.getSecondPosition(),\n  });\n\n/**\n * Determines if a point is over a given link's second segment.\n */\nexport const isPointOverSecondLinkSegment = (point, link) => {\n  if (!link.hasMiddlePoint()) return false;\n\n  return isPointOverSegment(point, {\n    A: link.getSecondPosition(),\n    B: link.getLastPosition(),\n  });\n};\n\n/**\n * Determines if a point is over a given link.\n */\nexport const isPointOverLink = (point, link) =>\n  isPointOverFirstLinkSegment(point, link) ||\n  isPointOverSecondLinkSegment(point, link);\n\n/**\n * Searches for any link that the given link might be landing on.\n */\nexport const getLandingLink = (link, engine) => {\n  const point = link.getLastPoint().getPosition();\n\n  return Object.values(\n    engine\n      .getModel()\n      .getLinkLayers()[0]\n      .getLinks(),\n  ).find(target => {\n    if (target.getID() === link.getID()) return false;\n    return isPointOverLink(point, target);\n  });\n};\n\n/**\n * Generates the error message displayed to the user for incompatible\n * display widths.\n */\nexport const getIncompatibleWidthsErrorMessage = (\n  source,\n  target,\n) => `Incompatible bit widths!\n\\nSource: ${source.getBits()} bit${source.getBits() > 1 ? 's' : ''}\n\\nTarget: ${target.getBits()} bit${target.getBits() > 1 ? 's' : ''}`;\n","/* eslint-disable no-restricted-globals */\nexport const MIN_VALUE = 0;\nexport const MAX_VALUE = {\n  1: 0b1,\n  2: 0b11,\n  4: 0b1111,\n  8: 0b1111_1111,\n  16: 0b1111_1111_1111_1111,\n};\n\nexport const adjustValueToBits = (value, dataBits = 1) => {\n  if (typeof value !== 'number') return value;\n\n  const allBitsSet = 0b1111_1111_1111_1111_1111_1111_1111_1111;\n  const mask = allBitsSet >>> (32 - dataBits);\n\n  return value & mask;\n};\n\nexport const isValueEqual = (value1, value2) => {\n  return value1\n    .map((v1, index) => v1 === value2[index])\n    .every(Boolean);\n};\n\nexport const isValueValid = value =>\n  value === null ||\n  (Array.isArray(value) && value.every(v => typeof v === 'number'));\n\nexport const isInputValid = input =>\n  input.every(item => isValueValid(item.value, item.bits));\n\nexport const isValueError = value =>\n  value === 'e' ||\n  (Array.isArray(value) && value.some(v => v === 'e'));\n\nexport const isInputError = input =>\n  input.some(item => isValueError(item.value));\n\nexport const isValueFloating = value =>\n  value === 'x' ||\n  (Array.isArray(value) && value.some(v => v === 'x'));\n\nexport const isInputFloating = input =>\n  input.some(item => isValueFloating(item.value));\n\nexport const getCleanDiff = () => ({\n  components: {},\n  links: {},\n});\n\nexport const getComponent = id => {\n  if (!self.circuit) return null;\n\n  return (\n    self.circuit.components.find(component => component.id === id) ||\n    null\n  );\n};\n\n/**\n * Find all meshes that are affected by an emitted change.\n */\nexport const getAffectedMeshes = emitted =>\n  self.circuit.meshes.filter(mesh =>\n    mesh.inputs.some(\n      meshInput =>\n        emitted.from.id === meshInput.componentId &&\n        Object.keys(emitted.value).includes(meshInput.name),\n    ),\n  );\n\n/**\n * Finds all components that are connected on a given mesh's Input.\n */\nexport const getMeshInputComponents = mesh =>\n  [\n    ...new Set(mesh.inputs.map(meshInput => meshInput.componentId)),\n  ].map(componentId => getComponent(componentId));\n\n/**\n * Finds all components that are connected on a given mesh's output.\n */\nexport const getMeshOutputComponents = mesh =>\n  [\n    ...new Set(\n      mesh.outputs.map(meshOutput => meshOutput.componentId),\n    ),\n  ].map(componentId => getComponent(componentId));\n\n/**\n * Determines the mesh input value.\n */\nexport const getMeshInputValue = mesh => {\n  const allInputValues = mesh.inputs\n    .map(portInfo => {\n      const component = getComponent(portInfo.componentId);\n\n      /**\n       * From the mesh's perspective, a component's output port is an\n       * input.\n       */\n      const port = component.getOutputPort(portInfo.name);\n\n      return port ? port.value : null;\n    })\n    .filter(value => value !== null);\n\n  return [...Array(allInputValues[0].length).keys()]\n    .map(index => allInputValues.map(v => v[index]))\n    .map(arr => {\n      const firstDefinedValue = arr.find(\n        value => typeof value === 'number',\n      );\n\n      const areBitsCompatible = arr.every(\n        item => item === firstDefinedValue || item === 'x',\n      );\n\n      if (!areBitsCompatible) return 'e';\n      if (typeof firstDefinedValue === 'number')\n        return firstDefinedValue;\n      return 'x';\n    });\n};\n\n/**\n * Initialize all links and ports with the floating value.\n */\nexport const initializeDiffAndValues = () => {\n  self.circuit.components.forEach(component => {\n    component.setInputValues(\n      Object.fromEntries(\n        component.ports.input.map(port => [\n          port.id,\n          new Array(port.bits || 1).fill('x'),\n        ]),\n      ),\n    );\n    component.setOutputValues(\n      Object.fromEntries(\n        component.ports.output.map(port => [\n          port.id,\n          new Array(port.bits || 1).fill('x'),\n        ]),\n      ),\n    );\n  });\n\n  const diffLinks = self.circuit.meshes\n    .map(mesh => mesh.links)\n    .flat()\n    .reduce((obj, link) => {\n      const { bits } = self.circuit.meshes.find(mesh =>\n        mesh.links.includes(link),\n      );\n\n      return { ...obj, [link]: Array(bits).fill('x') };\n    }, {});\n\n  const diffComponents = Object.fromEntries(\n    self.circuit.components.map(component => [\n      component.id,\n      {\n        output: Object.fromEntries(\n          [\n            ...component.ports.input,\n            ...component.ports.output,\n          ].map(port => [\n            port.name,\n            new Array(port.bits || 1).fill('x'),\n          ]),\n        ),\n        properties: component.getProperties(),\n      },\n    ]),\n  );\n\n  postMessage({\n    type: 'diff',\n    payload: { links: diffLinks, components: diffComponents },\n  });\n};\n\nexport const appendComponentDiff = (component, output) => {\n  if (!self.diff.components[component.id]) {\n    self.diff.components[component.id] = {\n      output: {},\n      properties: {},\n    };\n  }\n  self.diff.components[component.id] = {\n    ...self.diff.components[component.id],\n    output: self.diff.components[component.id].output\n      ? {\n          ...self.diff.components[component.id].output,\n          ...(output || {}),\n        }\n      : output || {},\n    properties: component.getProperties(),\n  };\n};\n","import { Point } from '@projectstorm/geometry';\nimport {\n  PointModel,\n  LabelModel,\n  LinkModel as RDLinkModel,\n} from '@projectstorm/react-diagrams';\nimport { DefaultLabelModel } from '@projectstorm/react-diagrams-defaults';\n\nimport { snap, sameAxis } from '../Diagram/states/common';\nimport {\n  isValueError,\n  isValueValid,\n  MAX_VALUE,\n} from '../Simulation/utils';\n\nexport default class LinkModel extends RDLinkModel {\n  constructor(options) {\n    super({\n      type: 'link',\n      ...options,\n    });\n\n    this.bifurcations = [];\n    this.bifurcationSource = null;\n    this.bifurcationTarget = null;\n\n    this.value = null;\n    this.bits = null;\n  }\n\n  getGridSize() {\n    return this.getParent()\n      .getParent()\n      .getOptions().gridSize;\n  }\n\n  addLabel(label) {\n    if (label instanceof LabelModel) {\n      return super.addLabel(label);\n    }\n\n    const newLabel = new DefaultLabelModel();\n    newLabel.setLabel(label);\n    return super.addLabel(newLabel);\n  }\n\n  setBifurcationSource(link) {\n    this.bifurcationSource = link;\n  }\n\n  getBifurcationSource() {\n    return this.bifurcationSource;\n  }\n\n  setBifurcationTarget(link) {\n    this.bifurcationTarget = link;\n  }\n\n  getBifurcationTarget() {\n    return this.bifurcationTarget;\n  }\n\n  isBifurcation() {\n    return !!(\n      this.getBifurcationSource() || this.getBifurcationTarget()\n    );\n  }\n\n  addBifurcation(link) {\n    if (\n      this.bifurcations.find(\n        bifurcation => bifurcation.getID() === link.getID(),\n      )\n    ) {\n      return;\n    }\n\n    this.bifurcations.push(link);\n  }\n\n  removeBifurcation(link) {\n    this.bifurcations = this.bifurcations.filter(\n      b => b.getID() !== link.getID(),\n    );\n  }\n\n  getBifurcations() {\n    return this.bifurcations;\n  }\n\n  getAllBifurcations() {\n    const result = [...this.bifurcations];\n    this.bifurcations.forEach(bifurcation =>\n      result.push(bifurcation.getAllBifurcations()),\n    );\n    return result.flat(Infinity);\n  }\n\n  getSelectionEntities() {\n    return [...super.getSelectionEntities(), ...this.bifurcations];\n  }\n\n  setSelected(selected) {\n    super.setSelected(selected);\n    this.bifurcations.forEach(b => b.setSelected(selected));\n\n    if (this.getSourcePort()) {\n      this.getSourcePort().setSelected(selected);\n    }\n    if (this.getTargetPort()) {\n      this.getTargetPort().setSelected(selected);\n    }\n  }\n\n  remove() {\n    this.bifurcations.forEach(bifurcation => bifurcation.remove());\n\n    if (this.bifurcationSource) {\n      this.bifurcationSource.removeBifurcation(this);\n    }\n\n    if (this.bifurcationTarget) {\n      this.bifurcationTarget.removeBifurcation(this);\n    }\n\n    super.remove();\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      bifurcations: this.bifurcations.map(b => b.getID()),\n      bifurcationSource: this.bifurcationSource\n        ? this.bifurcationSource.getID()\n        : null,\n      bifurcationTarget: this.bifurcationTarget\n        ? this.bifurcationTarget.getID()\n        : null,\n      value: this.value,\n      bits: this.bits,\n    };\n  }\n\n  deserialize(event) {\n    super.deserialize(event);\n\n    const {\n      getModel,\n      registerModel,\n      data: {\n        bifurcationSource,\n        bifurcationTarget,\n        bifurcations,\n        bits,\n      },\n    } = event;\n\n    registerModel(this);\n\n    requestAnimationFrame(() => {\n      this.bits = bits;\n\n      this.points = event.data.points.map(\n        point =>\n          new PointModel({\n            link: this,\n            position: new Point(point.x, point.y),\n          }),\n      );\n\n      bifurcations.forEach(b =>\n        getModel(b).then(bifurcation =>\n          this.addBifurcation(bifurcation),\n        ),\n      );\n\n      if (bifurcationSource) {\n        getModel(bifurcationSource).then(source =>\n          this.setBifurcationSource(source),\n        );\n      }\n\n      if (bifurcationTarget) {\n        getModel(bifurcationTarget).then(target =>\n          this.setBifurcationTarget(target),\n        );\n      }\n\n      event.engine.repaintCanvas();\n    });\n  }\n\n  addPoint(pointModel, index = 1) {\n    super.addPoint(pointModel, index);\n\n    return pointModel;\n  }\n\n  generatePoint(x, y) {\n    const point = super.generatePoint(x, y);\n    point.setPosition(\n      snap(x, this.getGridSize()),\n      snap(y, this.getGridSize()),\n    );\n\n    return point;\n  }\n\n  getMiddlePoint() {\n    if (!this.hasMiddlePoint()) return null;\n\n    return this.getPoints()[1];\n  }\n\n  getSecondPoint() {\n    return this.getPoints()[1];\n  }\n\n  getSecondLastPoint() {\n    const points = this.getPoints();\n    return points[points.length - 2];\n  }\n\n  getFirstPosition() {\n    return snap(\n      this.getFirstPoint().getPosition(),\n      this.getGridSize(),\n    );\n  }\n\n  getSecondPosition() {\n    return snap(\n      this.getSecondPoint().getPosition(),\n      this.getGridSize(),\n    );\n  }\n\n  getMiddlePosition() {\n    if (!this.hasMiddlePoint()) return null;\n\n    return snap(\n      this.getMiddlePoint().getPosition(),\n      this.getGridSize(),\n    );\n  }\n\n  getSecondLastPosition() {\n    return snap(\n      this.getSecondLastPoint().getPosition(),\n      this.getGridSize(),\n    );\n  }\n\n  getLastPosition() {\n    return snap(\n      this.getLastPoint().getPosition(),\n      this.getGridSize(),\n    );\n  }\n\n  hasMiddlePoint() {\n    return this.getPoints().length === 3;\n  }\n\n  isStraight() {\n    if (!this.hasMiddlePoint()) return true;\n\n    const first = this.getFirstPosition();\n    const middle = this.getMiddlePosition();\n    const last = this.getLastPosition();\n\n    if (sameAxis(first, middle, last)) return true;\n\n    return false;\n  }\n\n  getBits() {\n    return this.bits;\n  }\n\n  setBits(bits) {\n    if (![1, 2, 4, 8, 16].includes(bits))\n      throw new Error(\n        '[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16',\n      );\n\n    this.bits = bits;\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(value) {\n    this.value = value;\n  }\n\n  getColor() {\n    if (this.isSelected()) return 'var(--link-selected)';\n\n    if (!isValueValid(this.value, this.bits)) {\n      if (isValueError(this.value)) return 'var(--value-error)';\n      return 'var(--value-floating)';\n    }\n    if (this.value === null)\n      return `var(--link-${this.bits || 1}-bit-color)`;\n\n    return `var(--value-${Math.round(\n      (this.value.asNumber() / MAX_VALUE[this.bits]) * 10,\n    )})`;\n  }\n\n  getLineWidth() {\n    return `var(--link-${this.bits || 1}-bit-width)`;\n  }\n\n  getPointRadius() {\n    return getComputedStyle(document.body).getPropertyValue(\n      `--link-${this.bits || 1}-bit-join-radius`,\n    );\n  }\n}\n","import { PortModel as RDPortModel } from '@projectstorm/react-diagrams';\n\nimport LinkModel from '../Link/LinkModel';\n\nconst validateDefaultValue = (value, type, portName) => {\n  if (value === 0) return;\n  if (value === 1) return;\n  if (value === 'x') return;\n  if (value === 'e') return;\n\n  throw new Error(\n    `[logossim] Invalid default ${type} value provided for port \\`${portName}\\`. Should be either 0, 1, 'x' or 'e'.`,\n  );\n};\n\nexport default class PortModel extends RDPortModel {\n  constructor(options = {}) {\n    super({\n      type: 'Port',\n      maximumLinks: 1,\n      ...options,\n    });\n\n    this.value = null;\n    this.input = null;\n    this.bits = null;\n    this.defaultFloatingValue = null;\n    this.defaultErrorValue = null;\n    this.orientation = 0;\n    this.complemented = false;\n    this.offset = 0;\n    this.length = 25;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      input: this.input,\n      value: this.value,\n      bits: this.bits,\n      defaultFloatingValue: this.defaultFloatingValue,\n      defaultErrorValue: this.defaultErrorValue,\n      orientation: this.orientation,\n      complemented: this.complemented,\n      offset: this.offset,\n      length: this.length,\n    };\n  }\n\n  deserialize(event, engine) {\n    super.deserialize(event, engine);\n    this.value = event.data.value;\n    this.input = event.data.input;\n    this.bits = event.data.bits;\n    this.defaultFloatingValue = event.data.defaultFloatingValue;\n    this.defaultErrorValue = event.data.defaultErrorValue;\n    this.orientation = event.data.orientation;\n    this.complemented = event.data.complemented;\n    this.offset = event.data.offset;\n    this.length = event.data.length;\n  }\n\n  setOrientation(orientation) {\n    this.orientation = orientation;\n  }\n\n  getOrientation() {\n    return this.orientation;\n  }\n\n  setComplemented(complemented) {\n    this.complemented = complemented;\n  }\n\n  isComplemented() {\n    return this.complemented;\n  }\n\n  setOffset(offset) {\n    this.offset = offset;\n  }\n\n  getOffset() {\n    return this.offset;\n  }\n\n  setLength(length) {\n    this.length = length;\n  }\n\n  getLength() {\n    return this.length;\n  }\n\n  setAsInput() {\n    this.input = true;\n  }\n\n  setAsOutput() {\n    this.input = false;\n  }\n\n  isInput() {\n    return this.input === true;\n  }\n\n  isOutput() {\n    return this.input === false;\n  }\n\n  getBits() {\n    return this.bits;\n  }\n\n  setBits(bits) {\n    if (![1, 2, 4, 8, 16].includes(bits))\n      throw new Error(\n        '[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16',\n      );\n\n    this.bits = bits;\n  }\n\n  setDefaultFloatingValue(defaultFloatingValue) {\n    validateDefaultValue(\n      defaultFloatingValue,\n      'floating',\n      this.getName(),\n    );\n\n    this.defaultFloatingValue = defaultFloatingValue;\n  }\n\n  getDefaultFloatingValue() {\n    return this.defaultFloatingValue;\n  }\n\n  setDefaultErrorValue(defaultErrorValue) {\n    validateDefaultValue(defaultErrorValue, 'error', this.getName());\n\n    this.defaultErrorValue = defaultErrorValue;\n  }\n\n  getDefaultErrorValue() {\n    return this.defaultErrorValue;\n  }\n\n  getValue() {\n    if (this.value === null) return Array(this.bits).fill(0);\n\n    return this.value.map(bit => {\n      if (bit === 'x') return this.getDefaultFloatingValue();\n      if (bit === 'e') return this.getDefaultErrorValue();\n      return bit;\n    });\n  }\n\n  setValue(value) {\n    this.value = value;\n  }\n\n  isNewLinkAllowed() {\n    return (\n      Object.keys(this.getLinks()).length < this.getMaximumLinks()\n    );\n  }\n\n  canLinkToPort(port) {\n    return port.isNewLinkAllowed() && this.getID() !== port.getID();\n  }\n\n  createLinkModel() {\n    if (this.isNewLinkAllowed()) {\n      const link = new LinkModel();\n      link.setBits(this.bits);\n      return link;\n    }\n    return null;\n  }\n\n  getMainLink() {\n    const links = Object.values(this.getLinks());\n    return links.length > 0 ? links[0] : null;\n  }\n\n  getColor() {\n    const link = this.getMainLink();\n    if (link) return link.getColor();\n\n    return 'var(--port-unconnected)';\n  }\n\n  getLineWidth() {\n    return getComputedStyle(document.body).getPropertyValue(\n      `--link-1-bit-width`,\n    );\n  }\n\n  getLineColor() {\n    return getComputedStyle(document.body).getPropertyValue(\n      `--link-${this.bits || 1}-bit-color`,\n    );\n  }\n\n  getPointRadius() {\n    return getComputedStyle(document.body).getPropertyValue(\n      `--link-${this.bits || 1}-bit-join-radius`,\n    );\n  }\n}\n","export default class AudioEngine {\n  constructor() {\n    this.context = new AudioContext();\n    this.destination = this.context.destination;\n    this.audios = {};\n  }\n\n  create({ id, frequency = 1000, waveform = 'sine' }) {\n    const gainNode = this.context.createGain();\n    gainNode.gain.value = 0.5;\n\n    const oscillator = this.context.createOscillator();\n    oscillator.type = waveform;\n    oscillator.frequency.value = frequency;\n    oscillator.connect(gainNode);\n    oscillator.start();\n\n    this.audios[id] = { gainNode, oscillator };\n  }\n\n  play({ id }) {\n    try {\n      this.getGainNode(id).connect(this.destination);\n    } catch (e) {\n      // Suppress\n    }\n  }\n\n  pause({ id }) {\n    try {\n      this.getGainNode(id).disconnect(this.destination);\n    } catch (e) {\n      // Suppress\n    }\n  }\n\n  setFrequency({ id, frequency }) {\n    this.getOscillator(id).frequency.value = frequency;\n  }\n\n  setWaveform({ id, waveform }) {\n    this.getOscillator(id).type = waveform;\n  }\n\n  handlePayload(payload) {\n    switch (payload.command) {\n      case 'create':\n        this.create(payload);\n        break;\n      case 'play':\n        this.play(payload);\n        break;\n      case 'pause':\n        this.pause(payload);\n        break;\n      case 'setFrequency':\n        this.setFrequency(payload);\n        break;\n      case 'setWaveform':\n        this.setWaveform(payload);\n        break;\n      default:\n        break;\n    }\n  }\n\n  getOscillator(id) {\n    return this.getAudio(id).oscillator;\n  }\n\n  getGainNode(id) {\n    return this.getAudio(id).gainNode;\n  }\n\n  getAudio(id) {\n    const audio = this.audios[id];\n\n    if (!audio)\n      throw new Error(\n        `[logossim] Audio with id ${id} was not found.`,\n      );\n\n    return audio;\n  }\n\n  cleanUp() {\n    Object.values(this.audios).forEach(audio =>\n      audio.oscillator.stop(),\n    );\n    this.audios = [];\n  }\n}\n","/**\n * In order to execute the simulation workload on a Web Worker, we\n * need to serialize some component properties and methods to send\n * them to the worker.\n */\n\n/* ---------------------------------------------------------------- */\n\n/**\n * Receives a component instance and returns the name of all custom\n * properties.\n */\nconst getComponentPropertyNames = instance =>\n  Object.keys(instance).filter(\n    key =>\n      ![\n        'listeners',\n        'options',\n        'position',\n        'ports',\n        'width',\n        'height',\n        'configurations',\n        'parent',\n      ].includes(key),\n  );\n\n/**\n * Receives a component class and returns the name of all custom\n * methods.\n */\nconst getModelMethodNames = Class =>\n  Object.getOwnPropertyNames(Class.prototype).filter(\n    methodName => !['constructor'].includes(methodName),\n  );\n\nconst serializeModels = components =>\n  components.map(component => {\n    const { type, Model } = component;\n\n    return {\n      type,\n      methods: getModelMethodNames(Model).reduce(\n        (obj, name) => ({\n          ...obj,\n          [name]: Model.prototype[name].toString(),\n        }),\n        {},\n      ),\n    };\n  });\n\nconst serializePorts = ports =>\n  Object.values(ports).map(port => ({\n    id: port.getID(),\n    name: port.getName(),\n    input: port.isInput(),\n    bits: port.getBits(),\n    defaultFloatingValue: port.getDefaultFloatingValue(),\n    defaultErrorValue: port.getDefaultErrorValue(),\n  }));\n\n/**\n * Prepares a list of component instances to transfer, including\n * configuration and instance properties.\n */\nconst serializeComponents = components =>\n  components.map(component => ({\n    id: component.getID(),\n    type: component.getType(),\n    configurations: component.configurations,\n    ports: serializePorts(component.ports),\n    properties: getComponentPropertyNames(component).reduce(\n      (obj, key) => ({ ...obj, [key]: component[key] }),\n      {},\n    ),\n  }));\n\nconst getPortInfo = port =>\n  port\n    ? {\n        componentId: port.getParent().getID(),\n        name: port.getName(),\n        input: port.isInput(),\n      }\n    : null;\n\nconst getLinkId = link => (link ? link.getID() : null);\n\nconst serializeLinks = links =>\n  links.map(link => ({\n    id: link.getID(),\n    source: getPortInfo(link.getSourcePort()),\n    target: getPortInfo(link.getTargetPort()),\n    bifurcations: link\n      .getBifurcations()\n      .map(bifurcation => bifurcation.getID()),\n    bifurcation: {\n      source: getLinkId(link.getBifurcationSource()),\n      target: getLinkId(link.getBifurcationTarget()),\n    },\n    isBifurcation: link.isBifurcation(),\n    bits: link.getBits(),\n  }));\n\n/**\n * Prepares the whole diagram to be transferred.\n */\nconst serialize = (diagram, models) => ({\n  models: serializeModels(models),\n  links: serializeLinks(\n    Object.values(diagram.getActiveLinkLayer().getModels()),\n  ),\n  components: serializeComponents(\n    Object.values(diagram.getActiveNodeLayer().getModels()),\n  ),\n});\n\nexport default serialize;\n","import AudioEngine from './AudioEngine';\nimport serialize from './serialize';\nimport SimulationWorker from './simulation.worker';\nimport { getCleanDiff } from './utils';\n\nconst worker = new SimulationWorker();\n\n/**\n * SimulationEngine encapsulates SimulationWorker to act as an\n * interface to the application. It handles messaging with the worker,\n * keeping track of the `diff` being generated so the application can\n * use it to update itself.\n */\nexport default class SimulationEngine {\n  constructor(components) {\n    this.components = components;\n\n    this.worker = worker;\n    this.worker.addEventListener('message', this.onSimulationMessage);\n\n    this.audioEngine = new AudioEngine();\n\n    this.state = 'stopped';\n    this.clearDiff();\n  }\n\n  onSimulationMessage = ({ data: { type, payload } }) => {\n    if (type === 'diff') {\n      this.appendDiff(payload);\n    }\n\n    if (type === 'audio') {\n      this.audioEngine.handlePayload(payload);\n    }\n\n    if (type === 'clear') {\n      this.audioEngine.cleanUp();\n    }\n  };\n\n  start(diagram) {\n    this.worker.postMessage({\n      command: 'start',\n      diagram:\n        this.state === 'stopped'\n          ? serialize(diagram, this.components)\n          : undefined,\n    });\n    this.state = 'started';\n  }\n\n  pause() {\n    this.worker.postMessage({ command: 'pause' });\n    this.state = 'paused';\n  }\n\n  async stop() {\n    return new Promise(resolve => {\n      const waitForEnd = ({ data: { type } }) => {\n        if (type === 'clear') {\n          this.worker.removeEventListener('message', waitForEnd);\n          this.state = 'stopped';\n          resolve();\n        }\n      };\n      this.worker.addEventListener('message', waitForEnd);\n\n      this.worker.postMessage({ command: 'stop' });\n    });\n  }\n\n  getState() {\n    return this.state;\n  }\n\n  isRunning() {\n    return this.state === 'started';\n  }\n\n  isPaused() {\n    return this.state === 'paused';\n  }\n\n  isStopped() {\n    return this.state === 'stopped';\n  }\n\n  getDiff() {\n    return this.diff;\n  }\n\n  clearDiff() {\n    this.diff = getCleanDiff();\n  }\n\n  appendDiff(diff) {\n    this.diff = {\n      components: { ...this.diff.components, ...diff.components },\n      links: { ...this.diff.links, ...diff.links },\n    };\n  }\n}\n\n/**\n * Emit is exported as a separate function so it can be used on\n * `BaseModel`.\n */\nexport const emit = (from, value) =>\n  worker.postMessage({\n    command: 'emit',\n    emitted: { from, value },\n  });\n","import { Point } from '@projectstorm/geometry';\nimport { NodeModel } from '@projectstorm/react-diagrams';\n\nimport PortModel from './Port/PortModel';\nimport { emit } from './Simulation/SimulationEngine';\n\nconst getPort = nameOrInstance => {\n  if (nameOrInstance instanceof PortModel) return nameOrInstance;\n  return new PortModel({ name: nameOrInstance });\n};\n\nexport default class BaseModel extends NodeModel {\n  constructor(configurations = {}, type = 'generic') {\n    super({ type });\n\n    this.canRotate = false;\n\n    this.initialize(configurations);\n\n    this.configurations = configurations;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      configurations: this.configurations,\n    };\n  }\n\n  addInputPort(nameOrInstance, { bits, floating, error, orientation, complemented, offset, length } = {}) {\n    const port = getPort(nameOrInstance);\n    port.setAsInput();\n    if (typeof nameOrInstance === 'string') {\n      port.setBits(bits || 1);\n      port.setDefaultFloatingValue(floating ?? 'x');\n      port.setDefaultErrorValue(error ?? 'e');\n      port.setOrientation(orientation ?? 0);\n      port.setComplemented(complemented ?? false);\n      port.setOffset(offset ?? 0);\n      port.setLength(length ?? 25);\n    }\n    super.addPort(port);\n  }\n\n  addOutputPort(nameOrInstance, { bits, orientation, complemented, offset, length } = {}) {\n    const port = getPort(nameOrInstance);\n    port.setAsOutput();\n    if (typeof nameOrInstance === 'string') {\n      port.setBits(bits || 1);\n      port.setDefaultFloatingValue('x');\n      port.setDefaultErrorValue('e');\n      port.setOrientation(orientation ?? 0);\n      port.setComplemented(complemented ?? false);\n      port.setOffset(offset ?? 0);\n      port.setLength(length ?? 25);\n    }\n    super.addPort(port);\n  }\n\n  addPort(nameOrInstance, configuration) {\n    const port = getPort(nameOrInstance);\n\n    if (port.isInput()) {\n      this.addInputPort(port, configuration);\n      return;\n    }\n\n    if (port.isOutput()) {\n      this.addOutputPort(port, configuration);\n      return;\n    }\n\n    throw new Error(\n      '[logossim] Use either `addInputPort` or `addOutputPort`',\n    );\n  }\n\n  removePort(name) {\n    const port = getPort(name);\n    super.removePort(port);\n  }\n\n  getInputPorts() {\n    return Object.fromEntries(\n      Object.entries(this.getPorts()).filter(([, port]) =>\n        port.isInput(),\n      ),\n    );\n  }\n\n  getOutputPorts() {\n    return Object.fromEntries(\n      Object.entries(this.getPorts()).filter(\n        ([, port]) => !port.isInput(),\n      ),\n    );\n  }\n\n  getAllLinks() {\n    return Object.values(this.getPorts())\n      .map(port => port.getMainLink())\n      .filter(link => !!link)\n      .reduce(\n        (arr, link) => [...arr, link, ...link.getAllBifurcations()],\n        [],\n      );\n  }\n\n  clone(...args) {\n    const clone = super.clone(...args);\n    clone.setPosition(new Point(this.getX() + 15, this.getY() + 15));\n    return clone;\n  }\n\n  initialize() {}\n\n  onSimulationStart() {}\n\n  onSimulationPause() {}\n\n  onSimulationStop() {}\n\n  step() {}\n\n  emit(value) {\n    emit(this.getID(), value);\n  }\n\n  createAudio() {}\n}\n","import React from 'react';\n\nconst ComponentContext = React.createContext();\n\nexport default ComponentContext;\n","import React from 'react';\nimport { MenuProvider } from 'react-contexify';\n\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\n\nimport ComponentContext from './ComponentContext';\n\nexport default class Component extends AbstractReactFactory {\n  constructor({\n    type,\n    name,\n    description,\n    group,\n    configurations = [],\n    model,\n    widget,\n    icon,\n  }) {\n    super(type);\n    this.name = name;\n    this.description = description;\n    this.group = group;\n    this.configurations = configurations;\n    this.Model = model;\n    this.Widget = widget;\n    this.Icon = icon;\n  }\n\n  generateReactWidget(event) {\n    const { Widget } = this;\n    const { model } = event;\n\n    return (\n      <MenuProvider id=\"component\" storeRef={false} data={{component: model}}>\n        <ComponentContext.Provider value={model}>\n          <Widget model={model} />\n        </ComponentContext.Provider>\n      </MenuProvider>\n    );\n  }\n\n  generateModel(event) {\n    const { Model } = this;\n    const { configurations, type } = event.initialConfig;\n\n    return new Model(configurations, type);\n  }\n}\n","import React from 'react';\n\nconst DiagramContext = React.createContext();\n\nexport default DiagramContext;\n","import styled from 'styled-components';\n\nconst DroppableLayer = styled.div.attrs(({ disabled, ...props }) => ({\n  ...props,\n  onDragOver: event => event.preventDefault(),\n  onDrop: event => {\n    if (disabled) return;\n\n    const component = JSON.parse(\n      event.dataTransfer.getData('component'),\n    );\n\n    props.handleComponentDrop(event, component);\n  },\n}))`\n  width: 100vw;\n  height: 100vh;\n`;\n\nexport default DroppableLayer;\n","import React from 'react';\nimport { MenuProvider } from 'react-contexify';\n\nimport { CanvasWidget } from '@projectstorm/react-canvas-core';\n\nimport styled from 'styled-components';\n\nimport DiagramContext from './DiagramContext';\nimport DroppableLayer from './DroppableLayer';\n\nconst FullscreenCanvas = styled(CanvasWidget)`\n  height: 100%;\n  width: 100%;\n`;\n\nconst Diagram = ({ engine }) => (\n  <MenuProvider id=\"diagram\" storeRef={false} data={{ test: 1 }}>\n    <DroppableLayer\n      handleComponentDrop={(...args) =>\n        engine.handleComponentDrop(...args)\n      }\n      disabled={engine.isLocked()}\n    >\n      <DiagramContext.Provider value={engine}>\n        <FullscreenCanvas engine={engine.getEngine()} />\n      </DiagramContext.Provider>\n    </DroppableLayer>\n  </MenuProvider>\n);\n\nexport default Diagram;\n","import React, { Component } from 'react';\n\nimport { samePosition } from '../Diagram/states/common';\n\nexport default class LinkWidget extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refPaths = [];\n  }\n\n  componentDidUpdate() {\n    this.updateRenderedPaths();\n  }\n\n  componentDidMount() {\n    this.updateRenderedPaths();\n  }\n\n  componentWillUnmount() {\n    this.clearRenderedPaths();\n  }\n\n  updateRenderedPaths() {\n    const { link } = this.props;\n\n    link.setRenderedPaths(\n      this.refPaths.map(ref => {\n        return ref.current;\n      }),\n    );\n  }\n\n  clearRenderedPaths() {\n    const { link } = this.props;\n\n    link.setRenderedPaths([]);\n  }\n\n  generatePathPoints() {\n    const { link } = this.props;\n\n    const points = link.getPoints();\n\n    return points\n      .map((point, i) => ({ from: points[i], to: points[i + 1] }))\n      .filter(tuple => tuple.to);\n  }\n\n  generateLinePath({ from, to }) {\n    return `M${from.getX()},${from.getY()} L${to.getX()},${to.getY()}`;\n  }\n\n  renderSegment(path, key) {\n    const { link, factory, options = {} } = this.props;\n\n    const { selected } = options;\n\n    const ref = React.createRef();\n    this.refPaths.push(ref);\n\n    return React.cloneElement(\n      factory.generateLinkSegment(link, selected, path),\n      { key, ref },\n    );\n  }\n\n  renderPoint(position, loose = false) {\n    const { link } = this.props;\n    const color = link.getColor();\n\n    return (\n      <circle\n        r={loose ? 6 : link.getPointRadius()}\n        fill={loose ? 'var(--background)' : color}\n        stroke={loose ? color : 'none'}\n        strokeWidth={3}\n        cx={position.x}\n        cy={position.y}\n      />\n    );\n  }\n\n  renderBifurcationSourcePoint() {\n    const { link } = this.props;\n\n    const bifurcationSource = link.getBifurcationSource();\n    if (!bifurcationSource) return null;\n\n    const bifurcationOrigin = link.getFirstPoint().getPosition();\n    const lastSourcePoint = bifurcationSource\n      .getLastPoint()\n      .getPosition();\n\n    if (samePosition(bifurcationOrigin, lastSourcePoint)) {\n      return null;\n    }\n\n    return this.renderPoint(bifurcationOrigin);\n  }\n\n  renderBifurcationTargetPoint() {\n    const { link } = this.props;\n\n    const bifurcationTarget = link.getBifurcationTarget();\n    if (!bifurcationTarget) return null;\n\n    const bifurcationTargetPosition = link\n      .getLastPoint()\n      .getPosition();\n    const lastSourcePoint = bifurcationTarget\n      .getLastPoint()\n      .getPosition();\n\n    if (samePosition(bifurcationTargetPosition, lastSourcePoint)) {\n      return null;\n    }\n\n    return this.renderPoint(bifurcationTargetPosition);\n  }\n\n  renderLooseLinkPoint() {\n    const { link } = this.props;\n\n    if (link.getTargetPort()) return null;\n    if (link.getBifurcationTarget()) return null;\n\n    const bifurcations = link.getBifurcations();\n    const lastSourcePoint = link.getLastPoint().getPosition();\n\n    const isContinued = bifurcations.some(\n      bifurcation =>\n        samePosition(\n          bifurcation.getFirstPosition(),\n          lastSourcePoint,\n        ) ||\n        samePosition(bifurcation.getLastPosition(), lastSourcePoint),\n    );\n\n    if (isContinued) return null;\n\n    return this.renderPoint(lastSourcePoint, true);\n  }\n\n  render() {\n    const { link } = this.props;\n\n    this.refPaths = [];\n\n    return (\n      <>\n        <g data-default-link-test={link.getOptions().testName}>\n          {this.generatePathPoints().map((tuple, index) =>\n            this.renderSegment(this.generateLinePath(tuple), index),\n          )}\n        </g>\n        {this.renderBifurcationSourcePoint()}\n        {this.renderBifurcationTargetPoint()}\n        {this.renderLooseLinkPoint()}\n      </>\n    );\n  }\n}\n","import React from 'react';\n\nimport { DefaultLinkFactory } from '@projectstorm/react-diagrams-defaults';\n\nimport styled from 'styled-components';\n\nimport LinkModel from './LinkModel';\nimport LinkWidget from './LinkWidget';\n\nconst Path = styled.path`\n  pointer-events: all;\n  stroke-linecap: round;\n`;\n\nexport default class LinkFactory extends DefaultLinkFactory {\n  constructor() {\n    super('link');\n  }\n\n  generateModel() {\n    return new LinkModel();\n  }\n\n  generateReactWidget(event) {\n    return (\n      <LinkWidget\n        diagramEngine={this.engine}\n        link={event.model}\n        factory={this}\n      />\n    );\n  }\n\n  generateLinkSegment(model, selected, path) {\n    return (\n      <>\n        <Path\n          stroke={model.getColor()}\n          strokeWidth={model.getLineWidth()}\n          d={path}\n        />\n        {/* This path is to facilitate link selection */}\n        <Path stroke=\"none\" strokeWidth={20} d={path} />\n      </>\n    );\n  }\n}\n","import { AbstractModelFactory } from '@projectstorm/react-canvas-core';\n\nimport PortModel from './PortModel';\n\nexport default class PortFactory extends AbstractModelFactory {\n  constructor() {\n    super('Port');\n  }\n\n  generateModel() {\n    return new PortModel();\n  }\n}\n","import { Action, InputType } from '@projectstorm/react-canvas-core';\n\nimport BaseModel from '../../BaseModel';\n\n/**\n * Handles clipboard actions.\n */\nexport default class ClipboardAction extends Action {\n  constructor(areShortcutsAllowed) {\n    super({\n      type: InputType.KEY_DOWN,\n      fire: ({ event }) => {\n        if (!areShortcutsAllowed()) return;\n        if (this.engine.getModel().isLocked()) return;\n\n        if (this.matchesInput(event)) {\n          event.preventDefault();\n\n          const { code } = event;\n          if (code === 'KeyX') this.handleCut();\n          if (code === 'KeyC') this.handleCopy();\n          if (code === 'KeyV') this.handlePaste();\n        }\n      },\n    });\n  }\n\n  matchesInput = ({ ctrlKey, code }) =>\n    ctrlKey &&\n    (code === 'KeyX' || code === 'KeyC' || code === 'KeyV');\n\n  getSelectedComponents = () =>\n    this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(entity => entity instanceof BaseModel)\n      .filter(entity => !entity.isLocked());\n\n  /** Cut */\n  handleCut = () => {\n    const selected = this.getSelectedComponents();\n    const copies = selected.map(entity => entity.clone().serialize());\n\n    this.engine.fireEvent(\n      {\n        nodes: selected,\n        links: selected.reduce(\n          (arr, node) => [...arr, ...node.getAllLinks()],\n          [],\n        ),\n      },\n      'entitiesRemoved',\n    );\n    selected.forEach(node => node.remove());\n    this.engine.repaintCanvas();\n\n    localStorage.setItem('clipboard', JSON.stringify(copies));\n  };\n\n  /** Copy */\n  handleCopy = () => {\n    const copies = this.getSelectedComponents().map(entity =>\n      entity.clone().serialize(),\n    );\n\n    localStorage.setItem('clipboard', JSON.stringify(copies));\n  };\n\n  /** Paste */\n  handlePaste = () => {\n    const model = this.engine.getModel();\n\n    const clipboard = JSON.parse(localStorage.getItem('clipboard'));\n    if (!clipboard) return;\n\n    model.clearSelection();\n\n    const models = clipboard.map(serialized => {\n      const modelInstance = model\n        .getActiveNodeLayer()\n        .getChildModelFactoryBank(this.engine)\n        .getFactory(serialized.type)\n        .generateModel({ initialConfig: serialized });\n\n      modelInstance.deserialize({\n        engine: this.engine,\n        data: serialized,\n        registerModel: () => {},\n      });\n\n      return modelInstance;\n    });\n\n    models.forEach(modelInstance => {\n      model.addNode(modelInstance);\n      modelInstance.setSelected(true);\n    });\n\n    localStorage.setItem(\n      'clipboard',\n      JSON.stringify(\n        models.map(modelInstance =>\n          modelInstance.clone().serialize(),\n        ),\n      ),\n    );\n\n    this.engine.fireEvent({ nodes: models }, 'componentsAdded');\n\n    this.engine.repaintCanvas();\n  };\n}\n","import { Action, InputType } from '@projectstorm/react-canvas-core';\n\nimport BaseModel from '../../BaseModel';\nimport LinkModel from '../../Link/LinkModel';\n\n/**\n * Handles delete actions.\n */\nexport default class DeleteAction extends Action {\n  constructor(areShortcutsAllowed) {\n    super({\n      type: InputType.KEY_DOWN,\n      fire: ({ event }) => {\n        if (!areShortcutsAllowed()) return;\n        if (this.engine.getModel().isLocked()) return;\n\n        if (this.matchesInput(event)) {\n          event.preventDefault();\n          this.handleAction();\n        }\n      },\n    });\n  }\n\n  matchesInput = event => event.code === 'Delete';\n\n  handleAction = () => {\n    const entities = this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(model => !model.isLocked());\n\n    this.fireEvent(entities);\n\n    entities.forEach(model => model.remove());\n\n    this.engine.repaintCanvas();\n  };\n\n  /**\n   * Event is fired to be on the command manager, so the user can undo\n   * and redo it.\n   */\n  fireEvent = entities => {\n    // All selected nodes\n    const nodes = entities.filter(\n      model => model instanceof BaseModel,\n    );\n\n    // All selected links\n    const links = entities.filter(\n      model => model instanceof LinkModel,\n    );\n\n    // All links from selected nodes\n    const nodesLinks = nodes.reduce(\n      (arr, node) => [...arr, ...node.getAllLinks()],\n      [],\n    );\n\n    this.engine.fireEvent(\n      { nodes, links: [...nodesLinks, ...links] },\n      'entitiesRemoved',\n    );\n  };\n}\n","import { Action, InputType } from '@projectstorm/react-canvas-core';\n\nimport BaseModel from '../../BaseModel';\n\n/**\n * Handle duplication (clone) actions.\n */\nexport default class DuplicateAction extends Action {\n  constructor(areShortcutsAllowed) {\n    super({\n      type: InputType.KEY_DOWN,\n      fire: ({ event }) => {\n        if (!areShortcutsAllowed()) return;\n        if (this.engine.getModel().isLocked()) return;\n\n        if (this.matchesInput(event)) {\n          event.preventDefault();\n          this.handleAction();\n        }\n      },\n    });\n  }\n\n  matchesInput = event => event.ctrlKey && event.code === 'KeyD';\n\n  handleAction = () => {\n    const model = this.engine.getModel();\n\n    const clones = model\n      .getSelectedEntities()\n      .filter(entity => entity instanceof BaseModel)\n      .filter(entity => !entity.isLocked())\n      .map(entity => entity.clone());\n\n    model.clearSelection();\n\n    clones.forEach(clone => {\n      model.addNode(clone);\n      clone.setSelected(true);\n    });\n\n    this.engine.fireEvent({ nodes: clones }, 'componentsAdded');\n\n    this.engine.repaintCanvas();\n  };\n}\n","import { Action, InputType } from '@projectstorm/react-canvas-core';\n\n/**\n * Handles undo/redo actions.\n */\nexport default class UndoRedoAction extends Action {\n  constructor(areShortcutsAllowed) {\n    super({\n      type: InputType.KEY_DOWN,\n      fire: ({ event }) => {\n        if (!areShortcutsAllowed()) return;\n        if (this.engine.getModel().isLocked()) return;\n\n        if (this.matchesInput(event)) {\n          event.preventDefault();\n\n          const { ctrlKey, shiftKey, code } = event;\n          if (ctrlKey && !shiftKey && code === 'KeyZ')\n            this.handleUndo();\n          else this.handleRedo();\n        }\n      },\n    });\n  }\n\n  matchesInput = ({ ctrlKey, shiftKey, code }) =>\n    (ctrlKey && (code === 'KeyZ' || code === 'KeyY')) ||\n    (ctrlKey && shiftKey && code === 'KeyZ');\n\n  /** Undo */\n  handleUndo = () => {\n    this.engine.commands.undo();\n    this.engine.repaintCanvas();\n  };\n\n  /** Redo */\n  handleRedo = () => {\n    this.engine.commands.redo();\n    this.engine.repaintCanvas();\n  };\n}\n","import { Action, InputType } from '@projectstorm/react-canvas-core';\n\nconst ZOOM_LEVELS = [15, 25, 50, 75, 100, 150, 200, 300];\n\n/**\n * Handles zoom in/out actions.\n */\nexport default class ZoomAction extends Action {\n  constructor() {\n    super({\n      type: InputType.MOUSE_WHEEL,\n      fire: ({ event }) => {\n        event.stopPropagation();\n\n        const model = this.engine.getModel();\n\n        // We can block layer rendering because we are only targeting the transforms\n        model.getLayers().forEach(layer => layer.allowRepaint(false));\n\n        const zoomDirection =\n          Math.sign(event.deltaY) > 0 ? 'in' : 'out';\n\n        const currentZoomLevelIndex = ZOOM_LEVELS.indexOf(\n          ZOOM_LEVELS.includes(model.getZoomLevel())\n            ? model.getZoomLevel()\n            : 100,\n        );\n\n        let nextZoomLevelIndex;\n        if (zoomDirection === 'in') {\n          nextZoomLevelIndex = Math.min(\n            currentZoomLevelIndex + 1,\n            ZOOM_LEVELS.length - 1,\n          );\n        } else {\n          nextZoomLevelIndex = Math.max(currentZoomLevelIndex - 1, 0);\n        }\n\n        const oldZoomFactor = model.getZoomLevel() / 100;\n        model.setZoomLevel(ZOOM_LEVELS[nextZoomLevelIndex]);\n        const zoomFactor = model.getZoomLevel() / 100;\n\n        const boundingRect = this.engine\n          .getCanvas()\n          .getBoundingClientRect();\n        const clientWidth = boundingRect.width;\n        const clientHeight = boundingRect.height;\n\n        // Compute difference between rect before and after scroll\n        const widthDiff =\n          clientWidth * zoomFactor - clientWidth * oldZoomFactor;\n        const heightDiff =\n          clientHeight * zoomFactor - clientHeight * oldZoomFactor;\n\n        // Compute mouse coords relative to canvas\n        const clientX = event.clientX - boundingRect.left;\n        const clientY = event.clientY - boundingRect.top;\n\n        // Compute width and height increment factor\n        const xFactor =\n          (clientX - model.getOffsetX()) /\n          oldZoomFactor /\n          clientWidth;\n        const yFactor =\n          (clientY - model.getOffsetY()) /\n          oldZoomFactor /\n          clientHeight;\n\n        model.setOffset(\n          model.getOffsetX() - widthDiff * xFactor,\n          model.getOffsetY() - heightDiff * yFactor,\n        );\n        this.engine.repaintCanvas();\n\n        // Re-enable rendering\n        model.getLayers().forEach(layer => layer.allowRepaint(true));\n      },\n    });\n  }\n}\n","import { PointModel } from '@projectstorm/react-diagrams';\n\nconst commandHandlers = ({ engine, editComponentConfiguration }) => {\n  const adjustLink = (link, nodes = []) => {\n    const nodeList = [\n      ...Object.values(\n        engine\n          .getModel()\n          .getActiveNodeLayer()\n          .getModels(),\n      ),\n      ...nodes,\n    ];\n\n    /**\n     * Port instance could have changed in consequence of component\n     * configuration edit.\n     */\n    let sourcePort = link.getSourcePort();\n    if (sourcePort) {\n      const node = nodeList.find(\n        n =>\n          n.getID() ===\n          link\n            .getSourcePort()\n            .getParent()\n            .getID(),\n      );\n\n      sourcePort = node.getPort(sourcePort.getName());\n\n      link.setSourcePort(sourcePort);\n      sourcePort.addLink(link);\n    }\n\n    let targetPort = link.getTargetPort();\n    if (targetPort) {\n      const node = nodeList.find(\n        n =>\n          n.getID() ===\n          link\n            .getTargetPort()\n            .getParent()\n            .getID(),\n      );\n\n      targetPort = node.getPort(targetPort.getName());\n\n      link.setTargetPort(targetPort);\n      targetPort.addLink(link);\n    }\n\n    if (link.getBifurcationSource())\n      link.getBifurcationSource().addBifurcation(link);\n\n    if (link.getBifurcationTarget())\n      link.getBifurcationTarget().addBifurcation(link);\n\n    return link;\n  };\n\n  return {\n    /**\n     * Componend added handler. Occurs when a component is added or\n     * pasted.\n     */\n    componentsAdded: ({ nodes }) => {\n      engine.commands.add({\n        execute: () => {\n          nodes.forEach(node => engine.getModel().addNode(node));\n        },\n        undo: () => {\n          nodes.forEach(node => node.remove());\n        },\n      });\n    },\n\n    /**\n     * Component configuration edit handler.\n     */\n    componentEdited: ({ node, configurations, links }) => {\n      engine.commands.add({\n        execute: () => {\n          editComponentConfiguration(node, configurations.after);\n        },\n        undo: () => {\n          editComponentConfiguration(node, configurations.before);\n\n          links.before.forEach(link =>\n            engine.getModel().addLink(adjustLink(link)),\n          );\n        },\n      });\n    },\n\n    /**\n     * Link added handler. Occurs on new links or bifurcations.\n     */\n    linkAdded: ({ link }) => {\n      engine.commands.add({\n        execute: () => {\n          engine.getModel().addLink(adjustLink(link));\n        },\n        undo: () => {\n          link.remove();\n        },\n      });\n    },\n\n    /**\n     * Link changed handler. Occurs when a link is extended.\n     */\n    linkChanged: ({ before, after }) => {\n      const handleLinkChanged = (from, to) => {\n        const link = engine.getModel().getLink(from.id);\n\n        // Update link points\n        link.setPoints(\n          from.points.map(position => {\n            const point = new PointModel({ link });\n            point.setPosition(position);\n            return point;\n          }),\n        );\n\n        // Updates bifurcation target\n        if (from.bifurcationTarget) {\n          const target = engine\n            .getModel()\n            .getLink(from.bifurcationTarget);\n          link.setBifurcationTarget(target);\n          target.addBifurcation(link);\n        } else if (to.bifurcationTarget) {\n          const oldTarget = engine\n            .getModel()\n            .getLink(to.bifurcationTarget);\n          link.setBifurcationTarget(null);\n          oldTarget.removeBifurcation(link);\n        }\n      };\n\n      engine.commands.add({\n        execute: () => {\n          handleLinkChanged(after, before);\n        },\n        undo: () => {\n          handleLinkChanged(before, after);\n        },\n      });\n    },\n\n    /**\n     * Components and links removal handler.\n     */\n    entitiesRemoved: ({ nodes, links }) => {\n      engine.commands.add({\n        execute: () => {\n          // Removes all nodes\n          nodes.forEach(node => node.remove());\n\n          // Removes all links\n          links.forEach(link => link.remove());\n        },\n        undo: () => {\n          /**\n           * Adds all links in the correct order. Bifurcations should be\n           * added before, otherwise links on the diagram are incorretly\n           * rendered.\n           */\n          links\n            .map(link => adjustLink(link, nodes))\n            .sort((l1, l2) => {\n              if (\n                l1.getBifurcationSource() === l2 ||\n                l1.getBifurcationTarget() === l2\n              )\n                return 1;\n\n              if (\n                l2.getBifurcationSource() === l1 ||\n                l2.getBifurcationTarget() === l1\n              )\n                return -1;\n\n              return 0;\n            })\n            .forEach(link => engine.getModel().addLink(link));\n\n          // Adds all nodes\n          nodes.forEach(node => engine.getModel().addNode(node));\n        },\n      });\n    },\n\n    /**\n     * Components and links move handler.\n     */\n    entitiesMoved: ({ nodes, links }) => {\n      const handleEntitiesMoved = state => {\n        // Updates all moved nodes position\n        nodes[state].forEach(({ id, position }) => {\n          const node = engine.getModel().getNode(id);\n          node.setPosition(position.x, position.y);\n        });\n\n        // Updates all moved links points\n        links[state].forEach(({ id, points }) => {\n          const link = engine.getModel().getLink(id);\n          link.setPoints(\n            points.map(position => {\n              const point = new PointModel({ link });\n              point.setPosition(position);\n              return point;\n            }),\n          );\n        });\n      };\n\n      engine.commands.add({\n        execute: () => {\n          handleEntitiesMoved('after');\n        },\n        undo: () => {\n          handleEntitiesMoved('before');\n        },\n      });\n    },\n  };\n};\n\nexport default commandHandlers;\n","export default class Command {\n  constructor(execute, undo) {\n    this.execute = execute;\n    this.undo = undo;\n  }\n\n  execute(engine) {\n    this.execute(engine);\n  }\n\n  undo(engine) {\n    this.undo(engine);\n  }\n}\n","import Command from './Command';\n\n/**\n * This class manages the undo/redo stack.\n */\nexport default class CommandManager {\n  constructor() {\n    this.clear();\n  }\n\n  clear() {\n    this.stack = [];\n    this.index = 0;\n  }\n\n  add({ execute, undo }) {\n    const command = new Command(execute, undo);\n    this.stack.length = this.index;\n    this.stack.push(command);\n    this.index += 1;\n  }\n\n  undo() {\n    if (this.index > 0) {\n      this.index -= 1;\n      const command = this.stack[this.index];\n      command.undo();\n    }\n  }\n\n  redo() {\n    if (this.index < this.stack.length) {\n      const command = this.stack[this.index];\n      command.execute();\n      this.index += 1;\n    }\n  }\n}\n","import { Point } from '@projectstorm/geometry';\n\nimport { snap, samePosition } from './common';\n\nconst getRelativePoint = (point, model) => {\n  const zoomLevelPercentage = model.getZoomLevel() / 100;\n  const engineOffsetX = model.getOffsetX() / zoomLevelPercentage;\n  const engineOffsetY = model.getOffsetY() / zoomLevelPercentage;\n\n  return new Point(point.x - engineOffsetX, point.y - engineOffsetY);\n};\n\nconst nextLinkPosition = (\n  event,\n  model,\n  initialRelative,\n  sourcePosition,\n) => {\n  const point = getRelativePoint(sourcePosition, model);\n\n  const zoomLevelPercentage = model.getZoomLevel() / 100;\n  const initialXRelative = initialRelative.x / zoomLevelPercentage;\n  const initialYRelative = initialRelative.y / zoomLevelPercentage;\n\n  const linkNextX =\n    point.x +\n    (initialXRelative - sourcePosition.x) +\n    event.virtualDisplacementX;\n  const linkNextY =\n    point.y +\n    (initialYRelative - sourcePosition.y) +\n    event.virtualDisplacementY;\n\n  return snap(\n    new Point(linkNextX, linkNextY),\n    model.options.gridSize,\n  );\n};\n\n/**\n * Handles mouse move on link or bifurcation creation, creating and\n * moving link points according to user input.\n *\n * This implementation mimics logisim link creation behavior.\n */\nexport default function handleLinkDrag(event, link) {\n  const first = link.getFirstPosition();\n  const last = link.getLastPosition();\n\n  const next = nextLinkPosition(\n    event,\n    this.engine.getModel(),\n    { x: this.initialXRelative, y: this.initialYRelative },\n    first,\n  );\n\n  if (!this.hasStartedMoving && samePosition(first, last)) {\n    /**\n     * For some reason, inputs are only valid after the first and last\n     * position are equals once. Before that, the last position is\n     * (0, 0).\n     */\n    this.hasStartedMoving = true;\n  }\n\n  if (this.hasStartedMoving) {\n    if (!link.hasMiddlePoint()) {\n      if (last.x !== next.x) {\n        if (!this.moveDirection) {\n          this.moveDirection = 'horizontal';\n        }\n\n        if (this.moveDirection === 'vertical') {\n          link.addPoint(link.generatePoint(last.x, next.y), 1);\n        }\n      } else if (last.y !== next.y) {\n        if (!this.moveDirection) {\n          this.moveDirection = 'vertical';\n        }\n\n        if (this.moveDirection === 'horizontal') {\n          link.addPoint(link.generatePoint(next.x, last.y), 1);\n        }\n      }\n    } else {\n      const middle = link.getMiddlePosition();\n      if (samePosition(middle, last)) {\n        link.removePoint(link.getMiddlePoint());\n      } else if (samePosition(first, middle)) {\n        link.removePoint(link.getMiddlePoint());\n        this.moveDirection =\n          this.moveDirection === 'horizontal'\n            ? 'vertical'\n            : 'horizontal';\n      } else if (this.moveDirection === 'horizontal') {\n        if (last.x !== next.x) {\n          link.getMiddlePoint().setPosition(next.x, first.y);\n        }\n      } else if (this.moveDirection === 'vertical') {\n        if (last.y !== next.y) {\n          link.getMiddlePoint().setPosition(first.x, next.y);\n        }\n      }\n    }\n  }\n\n  /**\n   * Sometimes, user input may be fast enough to skip the creation of\n   * a middle point. If this happens, we add it here.\n   */\n  if (\n    !link.hasMiddlePoint() &&\n    first.x !== next.x &&\n    first.y !== next.y\n  ) {\n    if (samePosition(first, last)) {\n      link.addPoint(link.generatePoint(next.x, first.y), 1);\n    } else if (this.moveDirection === 'horizontal') {\n      link.addPoint(link.generatePoint(next.x, first.y), 1);\n    } else {\n      link.addPoint(link.generatePoint(first.x, next.y), 1);\n    }\n  }\n\n  link.getLastPoint().setPosition(next.x, next.y);\n\n  this.engine.repaintCanvas();\n}\n","import React, { useContext } from 'react';\n\nimport { PortWidget } from '@projectstorm/react-diagrams';\n\nimport styled from 'styled-components';\n\nimport ComponentContext from '../ComponentContext';\nimport DiagramContext from '../Diagram/DiagramContext';\n\nconst Wire = styled.div`\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n`;\n\nconst Circle = styled.div`\n  width: 10px;\n  height: 10px;\n  margin-${props => props.marginSide}: ${props => props.length}px;\n  border: var(--port-width) solid\n    ${props =>\n      props.link\n        ? 'var(--port-connected-border)'\n        : 'var(--port-unconnected-border)'};\n  border-radius: 100%;\n  background: ${props => props.port.getColor()};\n\n  &:hover {\n    background: var(--port-hover);\n  }\n`;\n\nconst Bubble = styled.div`\n  width: 10px;\n  height: 10px;\n  border: var(--port-width) solid;\n  border-radius: 100%;\n  background: white;\n`;\n\nclass Port extends PortWidget {\n  report() {\n    if (this.props.port) super.report();\n  }\n\n  componentDidUpdate() {\n    if (this.props.port) super.componentDidUpdate();\n  }\n\n  render() {\n    const { name, port, model, className = '' } = this.props;\n\n    if (!port) return null;\n\n    const marginSides = ['left', 'top', 'right', 'bottom'];\n    const orientation = port.getOrientation()\n    const width = port.getLineWidth();\n    const length = port.getLength() + port.getOffset();\n    const start = port.isComplemented() ? 10 : 0;\n    const widths = [length, 10, length, 10];\n    const heights = [10, length, 10, length];\n    const x1s = [start, 5, 0, 5]\n    const x2s = [length, 5, length-start, 5]\n    const y1s = [5, 0, 5, 0]\n    const y2s = [5, length-start, 5, length-start]\n\n    return (\n      <>\n        <Circle\n          className={`port ${className}`}\n          data-name={name}\n          data-nodeid={model.getID()}\n          port={port}\n          link={port.getMainLink()}\n          title={name}\n          marginSide={marginSides[orientation]}\n          length={length}\n        />\n        <Wire\n          className={`port ${className}`}\n          width={widths[orientation]}\n          height={heights[orientation]}\n        >\n          <svg\n            height={heights[orientation]}\n            width={widths[orientation]}\n            style={{display: \"block\"}}\n          >\n            <g>\n              <line\n                x1={x1s[orientation]}\n                y1={y1s[orientation]}\n                x2={x2s[orientation]}\n                y2={y2s[orientation]}\n                stroke={port.getLineColor()}\n                strokeWidth={width}\n              />\n            </g>\n          </svg>\n        </Wire>\n        {port.isComplemented() ?\n        <Bubble\n          className={`port ${className}`}\n        /> : <></>}\n      </>\n    );\n  }\n}\n\n/**\n * React Diagrams PortWidget implementation needs us to forward some\n * props in order to function properly. We have this HOC so that\n * component widgets don't need to pass them every time.\n */\nconst withProps = WrappedComponent => ({ ...props }) => {\n  const diagram = useContext(DiagramContext);\n  const model = useContext(ComponentContext);\n\n  return (\n    <WrappedComponent\n      {...props}\n      port={model.getPort(props.name)}\n      engine={diagram.getEngine()}\n      model={model}\n    />\n  );\n};\n\nexport default withProps(Port);\n","import { Point } from '@projectstorm/geometry';\nimport {\n  AbstractDisplacementState,\n  Action,\n  InputType,\n} from '@projectstorm/react-canvas-core';\nimport {\n  NodeModel,\n  PortModel,\n} from '@projectstorm/react-diagrams-core';\n\nimport {\n  snap,\n  samePosition,\n  getLandingLink,\n  isPointOverLink,\n  sameX,\n  sameAxis,\n  closestPointToLink,\n  getIncompatibleWidthsErrorMessage,\n} from './common';\nimport handleLinkDrag from './handleLinkDrag';\n\n/**\n * This State is responsible for handling bifurcation events.\n *\n * A bifurcation is just like a normal link, but instead of having a\n * source port, it has a source link (its `bifurcationSource`).\n *\n * There are three ways the user can create bifurcations:\n *\n * 1. By dragging an existing link into another existing link\n *    (link-to-link bifurcation)\n * 2. By dragging an existing link to any other point on the canvas,\n *    except on top of nodes\n *\n * If the drag start and end points are near each other, this action\n * will behave as a link selection.\n */\nexport default class BifurcateLinkState extends AbstractDisplacementState {\n  constructor(showSnackbar) {\n    super({ name: 'bifurcate-link' });\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_DOWN,\n        fire: event => {\n          this.moveDirection = undefined;\n          this.hasStartedMoving = false;\n\n          this.source = this.engine.getMouseElement(event.event);\n          this.sourceBefore = this.getLinkPoints(this.source);\n          this.sourceEdited = false;\n\n          const position = this.snapPointToSourceLink(\n            this.engine.getRelativeMousePoint(event.event),\n            this.source,\n          );\n\n          if (this.source.isLocked()) {\n            this.eject();\n            return;\n          }\n\n          this.bifurcation = this.engine\n            .getLinkFactories()\n            .getFactory(this.source.getType())\n            .generateModel();\n          this.bifurcation.setBits(this.source.getBits());\n\n          if (!this.bifurcation) {\n            this.eject();\n            return;\n          }\n\n          this.bifurcation.setBifurcationSource(this.source);\n          this.bifurcation.getFirstPoint().setPosition(position);\n          this.bifurcation.getLastPoint().setPosition(position);\n\n          this.bifurcation.setSelected(true);\n          this.engine.getModel().clearSelection();\n\n          this.source.setSelected(false);\n          this.source.addBifurcation(this.bifurcation);\n          this.engine.getModel().addLink(this.bifurcation);\n        },\n      }),\n    );\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_UP,\n        fire: event => {\n          // Link selection\n          if (this.isNearbySourcePosition()) {\n            this.cleanUp();\n            this.engine.getModel().clearSelection();\n            this.source.setSelected(true);\n            this.engine.repaintCanvas();\n            return;\n          }\n\n          const model = this.engine.getMouseElement(event.event);\n\n          // Disallows creation under nodes\n          if (model instanceof NodeModel) {\n            this.cleanUp();\n            this.engine.repaintCanvas();\n            return;\n          }\n\n          // Bifurcation connected to port\n          if (\n            model instanceof PortModel &&\n            model.isNewLinkAllowed()\n          ) {\n            // Disallows connecting ports with different bit numbers\n            if (this.source.getBits() !== model.getBits()) {\n              this.cleanUp();\n              this.engine.repaintCanvas();\n              showSnackbar(\n                getIncompatibleWidthsErrorMessage(this.source, model),\n              );\n              return;\n            }\n\n            this.bifurcation.setTargetPort(model);\n\n            model.reportPosition();\n            this.adjustBifurcationOverlayingSource(this.bifurcation);\n            this.engine.repaintCanvas();\n            this.fireEvent();\n            return;\n          }\n\n          // Bifurcation landing on another existing link\n          const landing = getLandingLink(\n            this.bifurcation,\n            this.engine,\n          );\n          if (landing) {\n            // Disallows connecting links with different bit numbers\n            if (landing.getBits() !== this.bifurcation.getBits()) {\n              this.cleanUp();\n              this.engine.repaintCanvas();\n              showSnackbar(\n                getIncompatibleWidthsErrorMessage(\n                  this.bifurcation,\n                  landing,\n                ),\n              );\n              return;\n            }\n\n            this.bifurcation.setBifurcationTarget(landing);\n            landing.addBifurcation(this.bifurcation);\n            landing.setSelected(true);\n          }\n\n          this.mergeWithBifurcation(\n            this.bifurcation.getBifurcationSource(),\n          );\n          this.adjustBifurcationOverlayingSource(this.bifurcation);\n          this.fireEvent();\n        },\n      }),\n    );\n  }\n\n  /**\n   * Event is fired to be on the command manager, so the user can undo\n   * and redo it.\n   */\n  fireEvent = () => {\n    if (this.sourceEdited) {\n      this.engine.fireEvent(\n        {\n          before: this.sourceBefore,\n          after: this.getLinkPoints(this.source),\n        },\n        'linkChanged',\n      );\n    } else {\n      this.engine.fireEvent({ link: this.bifurcation }, 'linkAdded');\n    }\n  };\n\n  getLinkPoints(link) {\n    return {\n      id: link.getID(),\n      points: link.getPoints().map(point => point.getPosition()),\n      bifurcationTarget: link.getBifurcationTarget()\n        ? link.getBifurcationTarget().getID()\n        : null,\n    };\n  }\n\n  cleanUp() {\n    this.source.removeBifurcation(this.bifurcation);\n    this.bifurcation.remove();\n  }\n\n  /**\n   * Snaps a point to a point which is over the source link.\n   */\n  snapPointToSourceLink(position, source) {\n    const { gridSize } = this.engine.getModel().getOptions();\n    const sourcePoints = source.getPoints();\n\n    const closestCorner = this.getClosestCornerToPosition(\n      sourcePoints,\n      position,\n    );\n\n    if (closestCorner.distance < gridSize - 1) {\n      return new Point(\n        closestCorner.position.x,\n        closestCorner.position.y,\n      );\n    }\n\n    const closestPath = this.getClosestPathToPosition(\n      sourcePoints,\n      position,\n    );\n\n    const snappedPosition = snap(position, gridSize);\n\n    return new Point(\n      closestPath.axis === 'x'\n        ? closestPath.position\n        : snappedPosition.x,\n      closestPath.axis === 'y'\n        ? closestPath.position\n        : snappedPosition.y,\n    );\n  }\n\n  getClosestCornerToPosition(points, position) {\n    return points\n      .map(sourcePoint => ({\n        distance: Math.hypot(\n          position.x - sourcePoint.position.x,\n          position.y - sourcePoint.position.y,\n        ),\n        ...sourcePoint,\n      }))\n      .reduce((closest, point) =>\n        point.distance < closest.distance ? point : closest,\n      );\n  }\n\n  getPathPoints(points) {\n    return points\n      .map((point, i) => ({ from: points[i], to: points[i + 1] }))\n      .filter(tuple => tuple.to);\n  }\n\n  getPathDirections(points) {\n    return this.getPathPoints(points).map(pathPosition =>\n      sameX(pathPosition.from.position, pathPosition.to.position)\n        ? {\n            axis: 'x',\n            position: pathPosition.from.position.x,\n          }\n        : {\n            axis: 'y',\n            position: pathPosition.from.position.y,\n          },\n    );\n  }\n\n  getClosestPathToPosition(points, position) {\n    return this.getPathDirections(points)\n      .map(path => ({\n        distance: Math.abs(position[path.axis] - path.position),\n        ...path,\n      }))\n      .reduce((closest, path) =>\n        path.distance < closest.distance ? path : closest,\n      );\n  }\n\n  isNearbySourcePosition() {\n    return samePosition(\n      this.bifurcation.getFirstPosition(),\n      this.bifurcation.getLastPosition(),\n    );\n  }\n\n  /**\n   * Removes the bifurcation points which are causing the bifurcation\n   * to overlay its source link. Removes the whole bifurcation, in\n   * case it is completely overlayed by its source link.\n   */\n  adjustBifurcationOverlayingSource() {\n    const source = this.bifurcation.getBifurcationSource();\n\n    if (\n      samePosition(\n        this.bifurcation.getFirstPosition(),\n        source.getLastPosition(),\n      )\n    ) {\n      if (\n        isPointOverLink(this.bifurcation.getSecondPosition(), source)\n      ) {\n        this.bifurcation.removePoint(\n          this.bifurcation.getFirstPoint(),\n        );\n      }\n      return;\n    }\n\n    if (\n      isPointOverLink(this.bifurcation.getFirstPosition(), source) &&\n      isPointOverLink(this.bifurcation.getSecondPosition(), source)\n    ) {\n      if (!this.bifurcation.hasMiddlePoint()) {\n        this.bifurcation.remove();\n        source.removeBifurcation(this.bifurcation);\n        return;\n      }\n\n      this.bifurcation.removePoint(this.bifurcation.getFirstPoint());\n\n      if (\n        samePosition(\n          this.bifurcation.getFirstPosition(),\n          source.getMiddlePosition(),\n        )\n      ) {\n        if (\n          isPointOverLink(this.bifurcation.getLastPosition(), source)\n        ) {\n          this.bifurcation.remove();\n          source.removeBifurcation(this.bifurcation);\n          return;\n        }\n\n        this.bifurcation\n          .getFirstPoint()\n          .setPosition(source.getLastPosition());\n\n        this.mergeWithBifurcation(source);\n        return;\n      }\n    }\n\n    if (source.hasMiddlePoint()) {\n      if (\n        sameAxis(\n          this.bifurcation.getFirstPosition(),\n          source.getMiddlePosition(),\n          this.bifurcation.getSecondPosition(),\n        )\n      ) {\n        this.bifurcation\n          .getFirstPoint()\n          .setPosition(source.getMiddlePosition());\n      }\n    }\n  }\n\n  /**\n   * Merges a link with its bifurcations, when possible.\n   */\n  mergeWithBifurcation(link) {\n    const source = {\n      first: link.getFirstPosition(),\n      middle: link.getMiddlePosition(),\n      last: link.getLastPosition(),\n      secondLast: link.getSecondLastPosition(),\n    };\n\n    link.getBifurcations().forEach(b => {\n      if (isPointOverLink(link.getLastPosition(), b)) {\n        b.getFirstPoint().setPosition(link.getLastPosition());\n      }\n    });\n\n    const elegibleBifurcations = link.getBifurcations().filter(b => {\n      if (!samePosition(b.getFirstPosition(), source.last))\n        return false;\n\n      if (!link.hasMiddlePoint() && !b.hasMiddlePoint()) return true;\n\n      if (link.hasMiddlePoint() && b.hasMiddlePoint()) {\n        if (samePosition(source.middle, b.getMiddlePosition())) {\n          return true;\n        }\n        return false;\n      }\n\n      if (\n        sameAxis(\n          source.last,\n          source.secondLast,\n          b.getSecondPosition(),\n        )\n      )\n        return true;\n\n      return false;\n    });\n\n    const bifurcationToMerge = elegibleBifurcations[0];\n\n    if (!bifurcationToMerge) return;\n\n    const newMiddle = bifurcationToMerge.getSecondLastPosition();\n    const newLast = bifurcationToMerge.getLastPosition();\n\n    if (!link.hasMiddlePoint()) {\n      link.addPoint(link.generatePoint(newMiddle.x, newMiddle.y), 1);\n    }\n\n    link.getLastPoint().setPosition(newLast.x, newLast.y);\n\n    if (link.isStraight() && link.hasMiddlePoint()) {\n      link.removePoint(link.getMiddlePoint());\n    }\n\n    link.removeBifurcation(bifurcationToMerge);\n    const bifurcationTarget = bifurcationToMerge.getBifurcationTarget();\n    if (bifurcationTarget) {\n      link.setBifurcationTarget(bifurcationTarget);\n      bifurcationTarget.addBifurcation(link);\n    }\n    this.sourceEdited = true;\n    bifurcationToMerge.remove();\n\n    if (\n      samePosition(link.getFirstPosition(), link.getLastPosition())\n    ) {\n      link.remove();\n    } else {\n      link.setSelected(true);\n    }\n\n    this.adjustBifurcationPoints(link);\n  }\n\n  /**\n   * Adjusts points for bifurcations on which its first point is not\n   * over its source link.\n   */\n  adjustBifurcationPoints(link) {\n    const { gridSize } = this.engine.getModel().getOptions();\n\n    link\n      .getBifurcations()\n      .filter(b => !isPointOverLink(b.getFirstPosition(), link))\n      .forEach(b => {\n        const newSource = snap(\n          closestPointToLink(b.getFirstPosition(), link),\n          gridSize,\n        );\n\n        b.getFirstPoint().setPosition(newSource.x, newSource.y);\n\n        if (sameAxis(b.getFirstPosition(), b.getLastPosition()))\n          return;\n\n        // Adjust middle point aswell\n        if (b.hasMiddlePoint()) {\n          b.removePoint(b.getMiddlePoint());\n        }\n\n        if (\n          sameX(link.getFirstPosition(), link.getSecondPosition())\n        ) {\n          b.addPoint(\n            b.generatePoint(\n              b.getLastPosition().x,\n              b.getFirstPosition().y,\n            ),\n            1,\n          );\n        } else {\n          b.addPoint(\n            b.generatePoint(\n              b.getFirstPosition().x,\n              b.getLastPosition().y,\n            ),\n            1,\n          );\n        }\n      });\n  }\n\n  /**\n   * Updates bifurcation's points upon mouse move.\n   */\n  fireMouseMoved(event) {\n    handleLinkDrag.call(this, event, this.bifurcation);\n  }\n}\n","import { AbstractDisplacementState } from '@projectstorm/react-canvas-core';\n\nexport default class DragCanvasState extends AbstractDisplacementState {\n  constructor() {\n    super({\n      name: 'drag-canvas',\n    });\n  }\n\n  async activated(prev) {\n    super.activated(prev);\n    this.engine.getModel().clearSelection();\n    await this.engine.repaintCanvas(true);\n\n    // We can block layer rendering because we are only targeting the transforms\n    this.engine\n      .getModel()\n      .getLayers()\n      .forEach(layer => layer.allowRepaint(false));\n\n    this.initialCanvasX = this.engine.getModel().getOffsetX();\n    this.initialCanvasY = this.engine.getModel().getOffsetY();\n  }\n\n  deactivated(next) {\n    super.deactivated(next);\n\n    this.engine\n      .getModel()\n      .getLayers()\n      .forEach(layer => layer.allowRepaint(true));\n  }\n\n  fireMouseMoved(event) {\n    // Allow moving only with left clicks\n    if (\n      event.event.nativeEvent.which !== 1 &&\n      !event.event.nativeEvent.targetTouches\n    )\n      return;\n\n    this.engine\n      .getModel()\n      .setOffset(\n        this.initialCanvasX + event.displacementX,\n        this.initialCanvasY + event.displacementY,\n      );\n    this.engine.repaintCanvas();\n  }\n}\n","import {\n  AbstractDisplacementState,\n  Action,\n  InputType,\n} from '@projectstorm/react-canvas-core';\n\nimport BaseModel from '../../BaseModel';\nimport PortModel from '../../Port/PortModel';\nimport {\n  nearby,\n  getLandingLink,\n  getIncompatibleWidthsErrorMessage,\n} from './common';\nimport handleLinkDrag from './handleLinkDrag';\n\n/**\n * This State is responsible for handling link creation events.\n */\nexport default class DragNewLinkState extends AbstractDisplacementState {\n  constructor(showSnackbar) {\n    super({ name: 'drag-new-link' });\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_DOWN,\n        fire: event => {\n          this.moveDirection = undefined;\n          this.hasStartedMoving = false;\n\n          this.port = this.engine.getMouseElement(event.event);\n\n          if (\n            !(this.port instanceof PortModel) ||\n            this.port.isLocked()\n          ) {\n            this.eject();\n            return;\n          }\n\n          this.link = this.port.createLinkModel();\n\n          if (!this.link) {\n            this.eject();\n            return;\n          }\n\n          this.link.setSelected(true);\n          this.link.setSourcePort(this.port);\n          this.engine.getModel().clearSelection();\n          this.engine.getModel().addLink(this.link);\n          this.port.reportPosition();\n        },\n      }),\n    );\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_UP,\n        fire: event => {\n          const model = this.engine.getMouseElement(event.event);\n\n          // Disallows creation under nodes\n          if (\n            Object.getPrototypeOf(model) instanceof BaseModel ||\n            this.isNearbySourcePort(event.event)\n          ) {\n            this.link.remove();\n            this.engine.repaintCanvas();\n          }\n\n          // Link connecting to port\n          if (\n            model instanceof PortModel &&\n            this.port.canLinkToPort(model)\n          ) {\n            // Disallows connecting ports with different bit numbers\n            if (this.port.getBits() !== model.getBits()) {\n              this.link.remove();\n              this.engine.repaintCanvas();\n              showSnackbar(\n                getIncompatibleWidthsErrorMessage(this.port, model),\n              );\n              return;\n            }\n\n            this.link.setTargetPort(model);\n            model.reportPosition();\n            this.engine.repaintCanvas();\n            this.fireEvent();\n            return;\n          }\n\n          // Link landing on another link\n          const landing = getLandingLink(this.link, this.engine);\n          if (landing) {\n            // Disallows connecting links with different bit numbers\n            if (landing.getBits() !== this.link.getBits()) {\n              this.link.remove();\n              this.engine.repaintCanvas();\n              showSnackbar(\n                getIncompatibleWidthsErrorMessage(this.link, landing),\n              );\n              return;\n            }\n\n            const reverse = this.engine\n              .getFactoryForLink(landing)\n              .generateModel();\n            reverse.setPoints(this.link.getPoints().reverse());\n            reverse.setTargetPort(this.link.getSourcePort());\n            reverse.setBifurcationSource(landing);\n            reverse.setBits(landing.getBits());\n\n            landing.addBifurcation(reverse);\n            landing.setSelected(true);\n\n            this.link.remove();\n            this.engine.getModel().addLink(reverse);\n            this.link = reverse;\n          }\n\n          this.fireEvent();\n        },\n      }),\n    );\n  }\n\n  /**\n   * Event is fired to be on the command manager, so the user can undo\n   * and redo it.\n   */\n  fireEvent = () => {\n    this.engine.fireEvent({ link: this.link }, 'linkAdded');\n  };\n\n  isNearbySourcePort(event) {\n    const point = this.engine.getRelativeMousePoint(event);\n\n    const sourcePort = this.link.getSourcePort();\n    const sourcePortSize = sourcePort.width;\n    const sourcePortPosition = sourcePort.getPosition();\n\n    return nearby(point, sourcePortPosition, sourcePortSize);\n  }\n\n  /**\n   * Updates link's points upon mouse move.\n   */\n  fireMouseMoved(event) {\n    handleLinkDrag.call(this, event, this.link);\n  }\n}\n","import { Point } from '@projectstorm/geometry';\nimport {\n  Action,\n  InputType,\n  AbstractDisplacementState,\n} from '@projectstorm/react-canvas-core';\n\nimport BaseModel from '../../BaseModel';\nimport {\n  snap,\n  samePosition,\n  sameX,\n  sameY,\n  closestPointToLink,\n} from './common';\n\n/**\n * This State handles node moving.\n *\n * When nodes are moved, all of its links (and all bifurcations from\n * or to this link) need to be rearranged.\n */\nexport default class MoveItemsState extends AbstractDisplacementState {\n  constructor() {\n    super({\n      name: 'move-items',\n    });\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_DOWN,\n        fire: event => {\n          if (this.engine.getModel().isLocked()) {\n            this.eject();\n            return;\n          }\n\n          this.lastDisplacement = new Point(0, 0);\n\n          this.element = this.engine\n            .getActionEventBus()\n            .getModelForEvent(event);\n\n          if (!this.element) {\n            this.eject();\n            return;\n          }\n\n          if (!this.element.isSelected()) {\n            this.engine.getModel().clearSelection();\n          }\n\n          this.linkDirections = this.getLinkDirections(this.element);\n\n          this.element.setSelected(true);\n          this.engine.repaintCanvas();\n\n          this.nodesBefore = this.getNodesPositions();\n          this.linksBefore = this.getLinksPoints();\n        },\n      }),\n    );\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_UP,\n        fire: () => {\n          if (\n            this.lastDisplacement.x === 0 &&\n            this.lastDisplacement.y === 0\n          ) {\n            return;\n          }\n\n          this.fireEvent();\n        },\n      }),\n    );\n  }\n\n  getNodesPositions = () =>\n    this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(\n        model => Object.getPrototypeOf(model) instanceof BaseModel,\n      )\n      .map(node => ({\n        id: node.getID(),\n        position: node.getPosition(),\n      }));\n\n  getLinksPoints = () =>\n    this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(\n        model => Object.getPrototypeOf(model) instanceof BaseModel,\n      )\n      .map(node => node.getAllLinks())\n      .flat()\n      .map(link => ({\n        id: link.getID(),\n        points: link.getPoints().map(point => point.getPosition()),\n      }));\n\n  /**\n   * Event is fired to be on the command manager, so the user can undo\n   * and redo it.\n   */\n  fireEvent() {\n    this.engine.fireEvent(\n      {\n        nodes: {\n          before: this.nodesBefore,\n          after: this.getNodesPositions(),\n        },\n        links: {\n          before: this.linksBefore,\n          after: this.getLinksPoints(),\n        },\n      },\n      'entitiesMoved',\n    );\n  }\n\n  activated(previous) {\n    super.activated(previous);\n    this.initialPositions = {};\n  }\n\n  /**\n   * Gets all links from a given node, including all its bifurcations.\n   */\n  getLinksFromNode(node) {\n    if (!(Object.getPrototypeOf(node) instanceof BaseModel))\n      return [];\n\n    return Object.values(node.getPorts())\n      .map(p => Object.entries(p.getLinks()))\n      .filter(entry => entry.length > 0)\n      .flat()\n      .map(([id, link]) => [\n        [id, link],\n        ...this.getBifurcatedLinks(link),\n      ])\n      .flat();\n  }\n\n  getBifurcatedLinks(link) {\n    return link\n      .getBifurcations()\n      .map(b => [[b.getID(), b], ...this.getBifurcatedLinks(b)])\n      .flat();\n  }\n\n  getLinkDirections(node) {\n    return this.getLinksFromNode(node).reduce(\n      (acc, [id, link]) => ({\n        ...acc,\n        [id]: this.getLinkDirection(link),\n      }),\n      {},\n    );\n  }\n\n  getLinkDirection(link) {\n    if (!link.hasMiddlePoint()) {\n      return null;\n    }\n\n    const first = link.getFirstPosition();\n    const middle = link.getMiddlePosition();\n\n    if (sameX(first, middle)) return 'vertical';\n    if (sameY(first, middle)) return 'horizontal';\n\n    return null;\n  }\n\n  fireMouseMoved(event) {\n    // Allow moving only with left clicks\n    if (event.event.nativeEvent.which !== 1) return;\n\n    const currentDisplacement = snap(\n      new Point(\n        event.virtualDisplacementX,\n        event.virtualDisplacementY,\n      ),\n      this.engine.getModel().getOptions().gridSize,\n    );\n\n    // Avoids rearranging everything before moving at least one grid\n    if (samePosition(currentDisplacement, this.lastDisplacement)) {\n      return;\n    }\n    this.lastDisplacement = currentDisplacement;\n\n    this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(\n        entity => Object.getPrototypeOf(entity) instanceof BaseModel,\n      )\n      .forEach(entity => {\n        this.moveEntity(entity, event);\n        this.adjustNodeLinks(entity);\n      });\n\n    this.engine.repaintCanvas();\n  }\n\n  moveEntity(entity, event) {\n    if (entity.isLocked()) {\n      return;\n    }\n\n    if (!this.initialPositions[entity.getID()]) {\n      this.initialPositions[entity.getID()] = {\n        point: entity.getPosition(),\n        item: entity,\n      };\n    }\n\n    const initial = this.initialPositions[entity.getID()].point;\n    const model = this.engine.getModel();\n\n    entity.setPosition(\n      model.getGridPosition(initial.x + event.virtualDisplacementX),\n      model.getGridPosition(initial.y + event.virtualDisplacementY),\n    );\n  }\n\n  adjustNodeLinks(node) {\n    Object.values(node.getPorts()).forEach(port =>\n      Object.values(port.getLinks()).forEach(this.adjustLinkPoints),\n    );\n  }\n\n  adjustLinkPoints = link => {\n    const first = link.getFirstPosition();\n    const last = link.getLastPosition();\n\n    if (\n      !link.hasMiddlePoint() &&\n      first.x !== last.x &&\n      first.y !== last.y\n    ) {\n      link.addPoint(link.generatePoint(first.x, last.y), 1);\n    } else if (link.hasMiddlePoint()) {\n      const linkDirection = this.linkDirections[link.getID()];\n\n      if (linkDirection === 'horizontal') {\n        link.getMiddlePoint().setPosition(last.x, first.y);\n      } else {\n        link.getMiddlePoint().setPosition(first.x, last.y);\n      }\n\n      const middle = link.getMiddlePosition();\n\n      if (samePosition(first, middle) || samePosition(middle, last)) {\n        link.removePoint(link.getMiddlePoint());\n      }\n    }\n\n    // Adjusts origin/target position from bifurcations of this link\n    this.adjustLinkBifurcations(link);\n  };\n\n  adjustLinkBifurcations(link) {\n    const bifurcations = link.getBifurcations();\n\n    bifurcations.forEach(bifurcation => {\n      this.adjustFirstAndLastPoints(bifurcation);\n\n      // Adjusts the points of this bifurcation (recursion)\n      this.adjustLinkPoints(bifurcation);\n    });\n  }\n\n  /**\n   * Assures that the first position on a bifurcation is still over\n   * the source link, and that the last position is still over the\n   * target link.\n   */\n  adjustFirstAndLastPoints(bifurcation) {\n    const { gridSize } = this.engine.getModel().getOptions();\n\n    const first = bifurcation.getFirstPoint();\n    const closestToFirst = snap(\n      closestPointToLink(\n        first.getPosition(),\n        bifurcation.getBifurcationSource(),\n      ),\n      gridSize,\n    );\n    first.setPosition(closestToFirst.x, closestToFirst.y);\n\n    if (bifurcation.getBifurcationTarget()) {\n      const last = bifurcation.getLastPoint();\n      const closestToLast = snap(\n        closestPointToLink(\n          last.getPosition(),\n          bifurcation.getBifurcationTarget(),\n        ),\n        gridSize,\n      );\n      last.setPosition(closestToLast.x, closestToLast.y);\n    }\n  }\n}\n","import { Rectangle } from '@projectstorm/geometry';\nimport {\n  AbstractDisplacementState,\n  SelectionLayerModel,\n} from '@projectstorm/react-canvas-core';\nimport {\n  LinkModel,\n  PointModel,\n} from '@projectstorm/react-diagrams-core';\n\n/**\n * This State handles selection box events.\n *\n * Link (and link points) selection is currently disabled.\n */\nexport default class SelectionBoxState extends AbstractDisplacementState {\n  constructor() {\n    super({\n      name: 'selection-box',\n    });\n  }\n\n  activated(previous) {\n    super.activated(previous);\n    this.layer = new SelectionLayerModel();\n    this.engine.getModel().addLayer(this.layer);\n  }\n\n  deactivated(next) {\n    super.deactivated(next);\n    this.layer.remove();\n    this.engine.repaintCanvas();\n  }\n\n  getBoxDimensions(event) {\n    const rel = this.engine.getRelativePoint(\n      event.event.clientX,\n      event.event.clientY,\n    );\n\n    return {\n      left:\n        rel.x > this.initialXRelative ? this.initialXRelative : rel.x,\n      top:\n        rel.y > this.initialYRelative ? this.initialYRelative : rel.y,\n      width: Math.abs(rel.x - this.initialXRelative),\n      height: Math.abs(rel.y - this.initialYRelative),\n      right:\n        rel.x < this.initialXRelative ? this.initialXRelative : rel.x,\n      bottom:\n        rel.y < this.initialYRelative ? this.initialYRelative : rel.y,\n    };\n  }\n\n  fireMouseMoved(event) {\n    this.layer.setBox(this.getBoxDimensions(event));\n\n    const relative = this.engine.getRelativeMousePoint({\n      clientX: this.initialX,\n      clientY: this.initialY,\n    });\n    if (event.virtualDisplacementX < 0) {\n      relative.x -= Math.abs(event.virtualDisplacementX);\n    }\n    if (event.virtualDisplacementY < 0) {\n      relative.y -= Math.abs(event.virtualDisplacementY);\n    }\n    const rect = new Rectangle(\n      relative,\n      Math.abs(event.virtualDisplacementX),\n      Math.abs(event.virtualDisplacementY),\n    );\n\n    if (!this.engine.getModel().isLocked()) {\n      this.engine\n        .getModel()\n        .getSelectionEntities()\n        .forEach(model => {\n          if (model.getBoundingBox) {\n            if (!this.allowSelection(model)) return;\n\n            const bounds = model.getBoundingBox();\n            if (\n              rect.containsPoint(bounds.getTopLeft()) &&\n              rect.containsPoint(bounds.getBottomRight())\n            ) {\n              model.setSelected(true);\n            } else {\n              model.setSelected(false);\n            }\n          }\n        });\n    }\n\n    this.engine.repaintCanvas();\n  }\n\n  allowSelection(model) {\n    return (\n      !(model instanceof LinkModel) && !(model instanceof PointModel)\n    );\n  }\n}\n","import {\n  State,\n  Action,\n  InputType,\n} from '@projectstorm/react-canvas-core';\n\nimport SelectionBoxState from './SelectionBoxState';\n\n/**\n * This State handles nodes selection.\n */\nexport default class SelectingState extends State {\n  constructor() {\n    super({\n      name: 'selecting',\n    });\n    this.keys = ['shift'];\n\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_DOWN,\n        fire: event => {\n          const element = this.engine\n            .getActionEventBus()\n            .getModelForEvent(event);\n\n          // Go into a selection box on the canvas state\n          if (!element) {\n            this.transitionWithEvent(new SelectionBoxState(), event);\n          } else {\n            element.setSelected(true);\n            this.engine.repaintCanvas();\n          }\n        },\n      }),\n    );\n  }\n}\n","import {\n  State,\n  Action,\n  InputType,\n} from '@projectstorm/react-canvas-core';\n\nimport LinkModel from '../../Link/LinkModel';\nimport PortModel from '../../Port/PortModel';\nimport BifurcateLinkState from './BifurcateLinkState';\nimport DragCanvasState from './DragCanvasState';\nimport DragNewLinkState from './DragNewLinkState';\nimport MoveItemsState from './MoveItemsState';\nimport SelectingState from './SelectingState';\n\n/**\n * This class defines custom handlers (called states) to respond to\n * clicking events on certain elements.\n */\nexport default class States extends State {\n  constructor(showSnackbar) {\n    super({\n      name: 'diagram-states',\n    });\n\n    this.childStates = [new SelectingState()];\n    this.dragCanvas = new DragCanvasState();\n    this.dragNewLink = new DragNewLinkState(showSnackbar);\n    this.bifurcateLink = new BifurcateLinkState(showSnackbar);\n    this.dragItems = new MoveItemsState();\n\n    // Determine what was clicked on\n    this.registerAction(\n      new Action({\n        type: InputType.MOUSE_DOWN,\n        fire: event => {\n          const element = this.engine\n            .getActionEventBus()\n            .getModelForEvent(event);\n\n          // The canvas was clicked on, transition to the dragging canvas state\n          if (!element) {\n            this.transitionWithEvent(this.dragCanvas, event);\n          }\n          // Initiate dragging a new link\n          else if (element instanceof PortModel) {\n            this.transitionWithEvent(this.dragNewLink, event);\n          }\n          // Create a bifurcation\n          else if (element instanceof LinkModel) {\n            this.transitionWithEvent(this.bifurcateLink, event);\n          }\n          // Move items\n          else {\n            this.transitionWithEvent(this.dragItems, event);\n          }\n        },\n      }),\n    );\n\n    // Allows dragging the canvas on touch devices\n    this.registerAction(\n      new Action({\n        type: InputType.TOUCH_START,\n        fire: event => {\n          this.transitionWithEvent(this.dragCanvas, event);\n        },\n      }),\n    );\n  }\n}\n","import { Point } from '@projectstorm/geometry';\nimport createEngine, {\n  DiagramModel,\n} from '@projectstorm/react-diagrams';\n\nimport BaseModel from '../BaseModel';\nimport LinkFactory from '../Link/LinkFactory';\nimport PortFactory from '../Port/PortFactory';\nimport ClipboardAction from './actions/ClipboardAction';\nimport DeleteAction from './actions/DeleteAction';\nimport DuplicateAction from './actions/DuplicateAction';\nimport UndoRedoAction from './actions/UndoRedoAction';\nimport ZoomAction from './actions/ZoomAction';\nimport commandHandlers from './Command/commandHandlers';\nimport CommandManager from './Command/CommandManager';\nimport States from './states/States';\n\nexport default class DiagramEngine {\n  constructor(components, areShortcutsAllowed, showSnackbar) {\n    this.components = components;\n    this.areShortcutsAllowed = areShortcutsAllowed;\n    this.showSnackbar = showSnackbar;\n    this.locked = false;\n\n    this.initializeEngine();\n    this.initializeModel();\n  }\n\n  getEngine = () => this.engine;\n\n  getModel = () => this.engine.getModel();\n\n  /**\n   * Initialization methods\n   */\n  initializeEngine = () => {\n    this.engine = createEngine({\n      registerDefaultDeleteItemsAction: false,\n      registerDefaultZoomCanvasAction: false,\n    });\n\n    this.engine.commands = new CommandManager();\n    this.engine.registerListener(commandHandlers(this));\n\n    this.engine\n      .getStateMachine()\n      .pushState(new States(this.showSnackbar));\n\n    const actions = [\n      DuplicateAction,\n      ClipboardAction,\n      DeleteAction,\n      UndoRedoAction,\n      ZoomAction,\n    ];\n    actions.forEach(Action =>\n      this.engine\n        .getActionEventBus()\n        .registerAction(new Action(this.areShortcutsAllowed)),\n    );\n\n    this.engine.getPortFactories().registerFactory(new PortFactory());\n    this.engine.getLinkFactories().registerFactory(new LinkFactory());\n\n    this.registerComponents();\n  };\n\n  initializeModel = () => {\n    this.model = new DiagramModel();\n\n    this.model.setGridSize(15);\n    this.model.setLocked(false);\n    this.model.registerListener({\n      eventDidFire: event => {\n        const type = event.function;\n        if (type === 'offsetUpdated') this.adjustGridOffset(event);\n        if (type === 'zoomUpdated') this.adjustGridZoom(event);\n      },\n    });\n    this.realignGrid();\n\n    this.engine.setModel(this.model);\n  };\n\n  registerComponents = () => {\n    this.components.forEach(component => {\n      this.engine.getNodeFactories().registerFactory(component);\n    });\n  };\n\n  /**\n   * Serializing & deserializing methods\n   */\n  serialize = () => this.model.serialize();\n\n  load = circuit => {\n    this.engine.commands.clear();\n    this.model.deserializeModel(circuit, this.engine);\n    this.realignGrid();\n    this.engine.repaintCanvas();\n  };\n\n  /**\n   * Diagram locking methods\n   */\n  setLocked = locked => {\n    this.model.setLocked(locked);\n    this.locked = locked;\n  };\n\n  isLocked = () => this.locked;\n\n  /**\n   * Diagram painting methods\n   */\n  repaint = () => this.engine.repaintCanvas();\n\n  realignGrid = () => {\n    this.adjustGridOffset({\n      offsetX: this.model.getOffsetX(),\n      offsetY: this.model.getOffsetY(),\n    });\n\n    this.adjustGridZoom({\n      zoom: this.model.getZoomLevel(),\n    });\n  };\n\n  adjustGridOffset = ({ offsetX, offsetY }) => {\n    document.body.style.setProperty(\n      '--offset-x',\n      `${Math.round(offsetX)}px`,\n    );\n    document.body.style.setProperty(\n      '--offset-y',\n      `${Math.round(offsetY)}px`,\n    );\n  };\n\n  adjustGridZoom = ({ zoom }) => {\n    const { gridSize } = this.model.getOptions();\n    document.body.style.setProperty(\n      '--grid-size',\n      `${(gridSize * zoom) / 100}px`,\n    );\n  };\n\n  /**\n   * Component creation and configuration methods\n   */\n  handleComponentDrop = (event, component) => {\n    const { Model } = this.components.find(\n      c => c.type === component.type,\n    );\n\n    const getSnappedWindowCenter = () => {\n      const zoomFactor = this.model.getZoomLevel() / 100;\n\n      const x =\n        -(this.model.getOffsetX() / zoomFactor) +\n        window.innerWidth / (zoomFactor * 2);\n      const y =\n        -(this.model.getOffsetY() / zoomFactor) +\n        window.innerHeight / (zoomFactor * 2);\n\n      return new Point(\n        Math.round(x / 15) * 15,\n        Math.round(y / 15) * 15,\n      );\n    };\n\n    const getSnappedRelativeMousePoint = () => {\n      const { x, y } = this.engine.getRelativeMousePoint(event);\n      return new Point(\n        Math.round(x / 15) * 15,\n        Math.round(y / 15) * 15,\n      );\n    };\n\n    const point = event\n      ? getSnappedRelativeMousePoint(event)\n      : getSnappedWindowCenter();\n\n    const node = new Model(component.configurations, component.type);\n    node.setPosition(point);\n    this.model.addNode(node);\n\n    this.engine.fireEvent({ nodes: [node] }, 'componentsAdded');\n    this.engine.repaintCanvas();\n  };\n\n  handleComponentEdit = (node, configurations) => {\n    const configurationsBefore = node.configurations;\n    const linksBefore = node.getAllLinks();\n\n    this.editComponentConfiguration(node, configurations);\n\n    this.engine.fireEvent(\n      {\n        node,\n        configurations: {\n          before: configurationsBefore,\n          after: node.configurations,\n        },\n        links: {\n          before: linksBefore,\n          after: node.getAllLinks(),\n        },\n      },\n      'componentEdited',\n    );\n\n    this.engine.repaintCanvas();\n  };\n\n  /**\n   * When the component configuration is changed, we reinitialize the\n   * given component with the given configurations.\n   *\n   * For simplicity's sake, if this configuration edit creates or\n   * removes a port, we delete all its links. Also, if the number of\n   * bits of a port is changed, its main link is deleted.\n   */\n  editComponentConfiguration = (node, configurations) => {\n    const portsBefore = node.getPorts();\n\n    // Resets configurations and ports for the node and reinitialize\n    node.configurations = configurations; // eslint-disable-line no-param-reassign\n    node.ports = {}; // eslint-disable-line no-param-reassign\n    node.initialize(configurations);\n\n    const hasNewPort = Object.values(node.getPorts()).some(\n      newPort => !portsBefore[newPort.getName()],\n    );\n    const hasRemovedPort = Object.values(portsBefore).some(\n      oldPort => !node.getPort(oldPort.getName()),\n    );\n\n    if (hasNewPort || hasRemovedPort) {\n      /**\n       * If there was any port added or removed, we need to remove all\n       * links connected to the edited component.\n       */\n      Object.values(portsBefore).forEach(port =>\n        Object.values(port.getLinks()).forEach(link => link.remove()),\n      );\n      return;\n    }\n\n    /**\n     * If no port was neither added or removed, we need to map old\n     * port links to new ports\n     */\n    Object.values(portsBefore).forEach(portBefore => {\n      const newPort = node.getPort(portBefore.getName());\n      /**\n       * If the number of bits for this port has changed, delete its\n       * main link, to avoid inconsistencies.\n       */\n      if (portBefore.getBits() !== newPort.getBits()) {\n        if (portBefore.getMainLink())\n          portBefore.getMainLink().remove();\n        return;\n      }\n\n      const link = Object.values(portBefore.getLinks())[0];\n      if (!link) return;\n      newPort.addLink(link);\n      if (portBefore === link.getSourcePort())\n        link.setSourcePort(newPort);\n      if (portBefore === link.getTargetPort())\n        link.setTargetPort(newPort);\n      portBefore.remove();\n    });\n  };\n\n  clearSelection = () =>\n    this.getEngine()\n      .getModel()\n      .clearSelection();\n\n  getSelectedNodes = () =>\n    this.engine\n      .getModel()\n      .getSelectedEntities()\n      .filter(entity => entity instanceof BaseModel);\n\n  fireAction = event =>\n    this.engine.getActionEventBus().fireAction({\n      event: {\n        ...event,\n        key: '',\n        preventDefault: () => {},\n        stopPropagation: () => {},\n      },\n    });\n\n  duplicateSelected = () =>\n    this.fireAction({ type: 'keydown', ctrlKey: true, code: 'KeyD' });\n\n  cutSelected = () =>\n    this.fireAction({ type: 'keydown', ctrlKey: true, code: 'KeyX' });\n\n  copySelected = () =>\n    this.fireAction({ type: 'keydown', ctrlKey: true, code: 'KeyC' });\n\n  pasteSelected = () =>\n    this.fireAction({ type: 'keydown', ctrlKey: true, code: 'KeyV' });\n\n  deleteSelected = () =>\n    this.fireAction({ type: 'keydown', code: 'Delete' });\n\n  undo = () =>\n    this.fireAction({ type: 'keydown', ctrlKey: true, code: 'KeyZ' });\n\n  redo = () =>\n    this.fireAction({\n      type: 'keydown',\n      ctrlKey: true,\n      shiftKey: true,\n      code: 'KeyZ',\n    });\n\n  zoomIn = ({ event }) =>\n    this.fireAction({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      type: 'wheel',\n      deltaY: +1,\n    });\n\n  zoomOut = ({ event }) =>\n    this.fireAction({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      type: 'wheel',\n      deltaY: -1,\n    });\n\n  /**\n   * Simulation methods\n   */\n  synchronizeLink = (id, value) =>\n    this.getEngine()\n      .getModel()\n      .getLink(id)\n      .setValue(value);\n\n  synchronizeComponent = (id, diff) => {\n    const component = this.getEngine()\n      .getModel()\n      .getNode(id);\n\n    // Sets output port values\n    Object.entries(diff.output).forEach(([name, value]) =>\n      component.getPort(name).setValue(value),\n    );\n\n    // Sets custom properties\n    Object.entries(diff.properties).forEach(([name, value]) => {\n      component[name] = value;\n    });\n  };\n\n  clearAllValues = () => {\n    this.clearLinkValues();\n    this.clearPortValues();\n  };\n\n  clearLinkValues = () =>\n    this.getEngine()\n      .getModel()\n      .getLinks()\n      .forEach(link => link.setValue(null));\n\n  clearPortValues = () =>\n    this.getEngine()\n      .getModel()\n      .getNodes()\n      .forEach(node =>\n        Object.values(node.getPorts()).forEach(port =>\n          port.setValue(null),\n        ),\n      );\n}\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst MAX_PORTS = 5;\n\n/**\n * Given a number of ports, returns an array with the port positions\n * symmetrically distributed.\n */\nexport const distributePorts = numPorts => {\n  if (numPorts === 2) return [1, 5];\n  if (numPorts === 3) return [1, 3, 5];\n  if (numPorts === 4) return [1, 2, 4, 5];\n\n  const isNumberOfPortsEven = numPorts % 2 === 0;\n  const closestEven = numPorts - (isNumberOfPortsEven ? 0 : 1);\n\n  let startAt = 0;\n  let length = MAX_PORTS;\n  if (numPorts > MAX_PORTS) {\n    startAt = Math.floor((MAX_PORTS - closestEven) / 2);\n    length = closestEven + 1;\n  }\n\n  const result = [...Array(length).keys()].map(i => i + startAt + 1);\n  if (isNumberOfPortsEven) {\n    result.splice(numPorts / 2, 1);\n  }\n  return result;\n};\n\nconst PortExtensionBar = styled.div`\n  position: absolute;\n  left: ${props => props.offsetX}px;\n  height: ${props => props.size}px;\n  width: 2px;\n  background: ${props =>\n    props.selected\n      ? 'var(--border-selected)'\n      : 'var(--border-unselected)'};\n\n  ${props => `${props.place}: 88px;`}\n`;\n\nexport const PortExtension = ({\n  selected,\n  portPositions,\n  offsetX = 1,\n}) => {\n  const lastPortPosition = portPositions[portPositions.length - 1];\n  if (lastPortPosition <= MAX_PORTS) return null;\n\n  const size = (lastPortPosition - MAX_PORTS) * 15;\n\n  return (\n    <>\n      <PortExtensionBar\n        selected={selected}\n        size={size}\n        place=\"top\"\n        offsetX={offsetX}\n      />\n      <PortExtensionBar\n        selected={selected}\n        size={size}\n        place=\"bottom\"\n        offsetX={offsetX}\n      />\n    </>\n  );\n};\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 88px`;\n    return `${props.side}: 88px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, orientation }) => (\n  <svg\n    height={size}\n    width={size}\n    viewBox=\"0 0 23.812499 23.812501\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g\n      style={{\n        transform: `rotate(${orientation*90}deg)`,\n        transformOrigin: 'center',\n      }}\n    >\n      <path\n        transform=\"scale(0.26458333)\"\n        d=\"M 2 2 L 2 45 A 42.999999 42.999999 0 0 0 2 45.271484 L 2 88 L 45 88 A 42.999999 42.999999 0 0 0 88 45 A 42.999999 42.999999 0 0 0 45 2 L 44.728516 2 L 2 2 z \"\n      />\n    </g>\n  </svg>\n);\n\nconst AndWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  return (\n    <Wrapper selected={model.isSelected()}>\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n      />\n      {inputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={portPositions[i]}\n          edge={inputEdges[orientation]}\n          side={inputSides[orientation]}\n        />\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape orientation={orientation}/>\n    </Wrapper>\n  );\n};\n\nexport default AndWidget;\n","import React from 'react';\n\nimport { Shape } from './AndWidget';\n\nconst AndIcon = () => <Shape size={30} />;\n\nexport default AndIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './AndIcon';\nimport model from './AndModel';\nimport widget from './AndWidget';\n\nexport default new Component({\n  type: 'And',\n  name: 'And',\n  description: 'Logic \"and\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class AndModel extends BaseModel {\n  initialize(configurations) {\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: 10 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 10 });\n  }\n\n  executeBit(bits) {\n    if (bits.every(bit => bit === 1)) return 1;\n    if (bits.some(bit => bit === 0)) return 0;\n    return 'e';\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'in') return `${props.side}: 29px;`;\n    if (props.name === 'out') return `${props.side}: 29px;`;\n    return '';\n  }}\n`;\n\nexport const Shape = ({ size = 30, orientation }) => (\n  <svg\n    height={size}\n    width={size}\n    viewBox=\"0 0 45.0 45.0\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g\n      style={{\n        transform: `rotate(${orientation*90}deg)`,\n        transformOrigin: 'center',\n      }}\n    >\n      <path d=\"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z\" />\n    </g>\n  </svg>\n);\n\nconst BufferWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const orientation = model.orientation;\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  return (\n    <Wrapper selected={selected}>\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[orientation]}\n      />\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape orientation={orientation} />\n    </Wrapper>\n  );\n};\n\nexport default BufferWidget;\n","import React from 'react';\n\nimport { Shape } from './BufferWidget';\n\nconst BufferIcon = () => <Shape size={30} />;\n\nexport default BufferIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './BufferIcon';\nimport model from './BufferModel';\nimport widget from './BufferWidget';\n\nexport default new Component({\n  type: 'Buffer',\n  name: 'Buffer',\n  description: 'Simple buffer',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class BufferModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('in', { bits: DATA_BITS, orientation: (this.orientation + 2) % 4, offset: 1, length: 10 });\n    this.addOutputPort('out', { bits: DATA_BITS, orientation: this.orientation, offset: 1, length: 10 });\n  }\n\n  step(input) {\n    return { out: input.in };\n  }\n}\n","import React, { useEffect, useRef } from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n\n  transition: 100ms linear;\n`;\n\nexport const Button = styled.button`\n  position: absolute;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  outline: none;\n\n  border: 2px solid rgba(0, 0, 0, 0.3);\n  background: linear-gradient(\n    225deg,\n    rgba(238, 0, 0, 1) 0%,\n    rgba(125, 20, 20, 1) 100%\n  );\n\n  :active {\n    border: 2px solid rgba(255, 255, 255, 0.5);\n    background: linear-gradient(\n      225deg,\n      rgba(125, 20, 20, 1) 0%,\n      rgba(238, 0, 0, 1) 100%\n    );\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: 28px`};\n`;\n\nconst ButtonWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const buttonRef = useRef();\n\n  const handleReleaseAway = event => {\n    if (\n      buttonRef.current &&\n      !buttonRef.current.contains(event.target)\n    ) {\n      model.onRelease();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mouseup', handleReleaseAway);\n    return () =>\n      document.removeEventListener('mouseup', handleReleaseAway);\n  });\n\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  return (\n    <Shape selected={selected}>\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[model.orientation]}\n      />\n      <Button\n        ref={buttonRef}\n        onMouseDown={() => model.onClick()}\n        onMouseUp={() => model.onRelease()}\n      />\n    </Shape>\n  );\n};\n\nexport default ButtonWidget;\n","import React from 'react';\n\nimport { Shape, Button } from './ButtonWidget';\n\nconst ButtonIcon = () => (\n  <Shape>\n    <Button as=\"div\" />\n  </Shape>\n);\n\nexport default ButtonIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './ButtonIcon';\nimport model from './ButtonModel';\nimport widget from './ButtonWidget';\n\nexport default new Component({\n  type: 'Button',\n  name: 'Button',\n  description: 'Simple button',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class ButtonModel extends BaseModel {\n  initialize(configurations) {\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addOutputPort('out', { orientation: this.orientation, offset: 0, length: 10 });\n  }\n\n  onSimulationStart() {\n    this.emit({ out: 0 });\n  }\n\n  onClick() {\n    this.emit({ out: 1 });\n  }\n\n  onRelease() {\n    this.emit({ out: 0 });\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: 28px`};\n`;\n\nconst Body = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ${props =>\n    `rgba(62, 62, 62, ${props.selected ? 0.5 : 1})`};\n  box-shadow: 0 0 ${props => (props.isActive ? 15 : 0)}px black;\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 15px;\n`;\n\nconst Hole = styled.div`\n  width: 8px;\n  height: 8px;\n\n  background: black;\n  border-radius: 4px;\n`;\n\nexport const Shape = ({ selected, isActive, children }) => (\n  <Body selected={selected} isActive={isActive} data-testid=\"body\">\n    <Hole />\n    {children}\n  </Body>\n);\n\nconst BuzzerWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n\n  return (\n    <Shape selected={selected} isActive={model.isActive()}>\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[model.orientation]}\n      />\n    </Shape>\n  );\n};\n\nexport default BuzzerWidget;\n","import React from 'react';\n\nimport { Shape } from './BuzzerWidget';\n\nconst BuzzerIcon = () => <Shape color=\"#00ff00\" />;\n\nexport default BuzzerIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './BuzzerIcon';\nimport model from './BuzzerModel';\nimport widget from './BuzzerWidget';\n\nexport default new Component({\n  type: 'Buzzer',\n  name: 'Buzzer',\n  description: 'Outputs sound at a give frequency',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'FREQUENCY_HZ',\n      type: 'number',\n      default: 300,\n      label: 'Sound frequency (in Hertz)',\n      min: 0,\n      max: 20000,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum frequency is ${this.min} Hz`;\n        if (value > this.max)\n          return `Maximum frequency is ${this.max} Hz`;\n        return null;\n      },\n    },\n    {\n      name: 'WAVEFORM',\n      type: 'select',\n      default: 'SINE',\n      label: 'Waveform',\n      options: [\n        {\n          label: 'Sine',\n          value: 'SINE',\n        },\n        {\n          label: 'Square',\n          value: 'SQUARE',\n        },\n        {\n          label: 'Sawtooth',\n          value: 'SAWTOOTH',\n        },\n        {\n          label: 'Triangle',\n          value: 'TRIANGLE',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class BuzzerModel extends BaseModel {\n  initialize(configurations) {\n    this.frequencyHz = Number(configurations.FREQUENCY_HZ);\n    this.waveform = configurations.WAVEFORM;\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('in', { orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n  }\n\n  onSimulationStart() {\n    this.audio = this.createAudio(this.frequencyHz, this.waveform);\n\n    if (this.getInput() === 1) this.audio.play();\n  }\n\n  onSimulationPause() {\n    this.audio.pause();\n  }\n\n  step(input) {\n    if (input.in) {\n      this.audio.play();\n    } else {\n      this.audio.pause();\n    }\n  }\n\n  getInput() {\n    const value = this.getPort('in').getValue();\n\n    if (!value) return 0;\n    return value[0];\n  }\n\n  isActive() {\n    return !!this.getInput();\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: 28px`};\n`;\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n\n  transition: 100ms linear;\n`;\n\nexport const Decoration = ({\n  isActive,\n  color,\n  periodMs,\n  animateTransition,\n}) => (\n  <svg\n    width={30}\n    height={30}\n    viewBox=\"0 0 7.9374997 7.9375003\"\n    strokeWidth=\"1\"\n  >\n    <path\n      data-testid=\"decoration\"\n      stroke={color}\n      strokeWidth={0.75}\n      fill=\"none\"\n      style={{\n        transform: isActive ? 'scaleX(1)' : 'scaleX(-1)',\n        transformOrigin: 'center',\n        transition: animateTransition\n          ? `calc(${periodMs}ms / 2 * 0.4) ease-in-out`\n          : 'none',\n      }}\n      d=\"M 1.8683545,4.4337648 V 6.14192 H 4.0062447 V 1.79558 h 2.0629007 v 1.7578226\"\n    />\n  </svg>\n);\n\nconst ClockWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n    periodMs,\n  } = model;\n\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const out = model.getPort('out');\n\n  return (\n    <Shape selected={selected}>\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[model.orientation]}\n      />\n      <Decoration\n        isActive={model.isActive()}\n        color={out.getColor()}\n        periodMs={periodMs}\n        animateTransition={periodMs >= 500}\n      />\n    </Shape>\n  );\n};\n\nexport default ClockWidget;\n","import React from 'react';\n\nimport { Shape, Decoration } from './ClockWidget';\n\nconst ClockIcon = () => (\n  <Shape>\n    <Decoration color=\"var(--port-unconnected)\" />\n  </Shape>\n);\n\nexport default ClockIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './ClockIcon';\nimport model from './ClockModel';\nimport widget from './ClockWidget';\n\nexport default new Component({\n  type: 'Clock',\n  name: 'Clock',\n  description: 'Generates a clock signal',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'FREQUENCY_HZ',\n      type: 'number',\n      default: 1,\n      label: 'Frequency (in Hz)',\n      step: 0.25,\n      min: 0.25,\n      max: 1000,\n      validate(value) {\n        if (value < this.min)\n          return `Frequency should be greater than ${this.min} Hz`;\n        if (value > this.max)\n          return `Frequency should be lesser than ${this.max} Hz`;\n        if (value % this.step !== 0)\n          return `Frequency should be divisible by ${this.step} Hz`;\n        return null;\n      },\n    },\n    {\n      name: 'HIGH_DURATION',\n      type: 'number',\n      default: 1,\n      label: 'High duration (in cycles)',\n      min: 1,\n      validate(value) {\n        if (value < this.min)\n          return `High duration should be greater than ${this.min}`;\n        return null;\n      },\n    },\n    {\n      name: 'LOW_DURATION',\n      type: 'number',\n      default: 1,\n      label: 'Low duration (in cycles)',\n      min: 1,\n      validate(value) {\n        if (value < this.min)\n          return `Low duration should be greater than ${this.min}`;\n        return null;\n      },\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class ClockModel extends BaseModel {\n  initialize(configurations) {\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addOutputPort('out', { orientation: this.orientation, offset: 0, length: 10 });\n\n    this.configurations = configurations;\n\n    this.output = 0;\n    this.emitInterval = null;\n    this.periodMs = 1000 / this.configurations.FREQUENCY_HZ;\n    this.highCount = 0;\n    this.lowCount = 0;\n  }\n\n  onSimulationStart() {\n    this.emit({ out: this.output });\n\n    this.emitInterval = setInterval(() => {\n      const lastOutput = this.output;\n      this.output = this.getNextOutput();\n\n      if (lastOutput === this.output) return;\n\n      this.emit({ out: this.output });\n    }, this.periodMs / 2);\n  }\n\n  getNextOutput() {\n    const { HIGH_DURATION, LOW_DURATION } = this.configurations;\n\n    if (this.output === 1) {\n      this.highCount += 1;\n\n      if (this.highCount === HIGH_DURATION) {\n        this.highCount = 0;\n        return 0;\n      }\n\n      return 1;\n    }\n\n    this.lowCount += 1;\n\n    if (this.lowCount === LOW_DURATION) {\n      this.lowCount = 0;\n      return 1;\n    }\n\n    return 0;\n  }\n\n  onSimulationPause() {\n    clearInterval(this.emitInterval);\n  }\n\n  onSimulationStop() {\n    clearInterval(this.emitInterval);\n  }\n\n  getOutput() {\n    return this.getPort('out').getValue() || [0];\n  }\n\n  isActive() {\n    return this.getOutput()[0] === 1;\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'control') return `${props.side}: 30px;`;\n    if (props.name === 'in') return `${props.side}: 30px;`;\n    if (props.name === 'out') return `${props.side}: 30px;`;\n    return '';\n  }}\n`;\n\nexport const Shape = ({ size = 30, orientation, x1 = 22.5, y1 = 32.5, x2 = 22.5, y2 = 45 }) => (\n  <svg\n    height={size}\n    width={size}\n    viewBox=\"0 0 45.0 45.0\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g\n        style={{\n          transform: `rotate(${orientation*90}deg)`,\n          transformOrigin: 'center',\n        }}\n    >\n      <path d=\"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z\" />\n      <line x1=\"22.5\" y1=\"32.5\" x2=\"22.5\" y2=\"45\" />\n    </g>\n  </svg>\n);\n\nconst ControlledBufferWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const orientation = model.orientation;\n  const controlSides = ['top', 'right', 'bottom', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n  const x1s = [22.5, 0];\n  const y1s = [32.5, 22.5];\n  const x2s = [22.5, 12.5];\n  const y2s = [45, 22.5];\n\n  return (\n    <Wrapper selected={selected}>\n      <PositionedPort\n        name=\"control\"\n        side={controlSides[orientation]}\n      />\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[orientation]}\n      />\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        orientation={orientation}\n        x1={x1s[orientation % 2]}\n        y1={y1s[orientation % 2]}\n        x2={x2s[orientation % 2]}\n        y2={y2s[orientation % 2]}\n      />\n    </Wrapper>\n  );\n};\n\nexport default ControlledBufferWidget;\n","import React from 'react';\n\nimport { Shape } from './ControlledBufferWidget';\n\nconst ControlledBufferIcon = () => <Shape size={30} />;\n\nexport default ControlledBufferIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './ControlledBufferIcon';\nimport model from './ControlledBufferModel';\nimport widget from './ControlledBufferWidget';\n\nexport default new Component({\n  type: 'ControlledBuffer',\n  name: 'Controlled buffer',\n  description: 'Useful for I/O managing',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class ControlledBufferModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('control', { orientation: (this.orientation + 1) % 4, offset: 0, length: 10 });\n    this.addInputPort('in', { bits: DATA_BITS, orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n    this.addOutputPort('out', { bits: DATA_BITS, orientation: this.orientation, offset: 0, length: 10 });\n  }\n\n  step(input) {\n    if (input.control === 0) return { out: 'x' };\n    return { out: input.in };\n  }\n\n  stepFloating(input) {\n    if (input.control[0] === 'x') return { out: 'e' };\n    if (input.control[0] === 0) return { out: 'x' };\n    return { out: input.in };\n  }\n\n  stepError(input) {\n    return this.stepFloating(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'control') return `${props.side}: 30px; ${props.edge}: 10px`;\n    if (props.name === 'in') return `${props.side}: 45px;`;\n    if (props.name === 'out') return `${props.side}: 39px;`;\n    return '';\n  }}\n`;\n\nexport const Shape = ({ size = 30, dWidth = 15, dHeight = 0, orientation = 0, translation = 0 }) => (\n  <svg\n    height={size + dHeight}\n    width={size + dWidth}\n    viewBox=\"11 0 45.0 45.0\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g transform={`rotate(${orientation*90} 28 17) translate(${translation})`}\n    >\n      <path d=\"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z\" />\n      <circle r=\"8\" cy=\"22\" cx=\"51\" />\n      <line x1=\"22.5\" y1=\"32.5\" x2=\"22.5\" y2=\"45\" />\n    </g>\n  </svg>\n);\n\nconst ControlledInverterWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const orientation = model.orientation;\n  const controlSides = ['top', 'right', 'bottom', 'left'];\n  const controlEdges = ['left', 'top', 'right', 'bottom'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n  const dWidths = [15, 0];\n  const dHeights = [0, 15];\n  const translations = ['0 0', '0 -11', '-12 -11', '-12 0'];\n\n  return (\n    <Wrapper selected={selected}>\n      <PositionedPort\n        name=\"control\"\n        side={controlSides[orientation]}\n        edge={controlEdges[orientation]}\n      />\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[orientation]}\n      />\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        dWidth={dWidths[orientation % 2]}\n        dHeight={dHeights[orientation % 2]}\n        orientation={orientation}\n        translation={translations[orientation]}\n      />\n    </Wrapper>\n  );\n};\n\nexport default ControlledInverterWidget;\n","import React from 'react';\n\nimport { Shape } from './ControlledInverterWidget';\n\nconst ControlledInverterIcon = () => <Shape size={30} />;\n\nexport default ControlledInverterIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './ControlledInverterIcon';\nimport model from './ControlledInverterModel';\nimport widget from './ControlledInverterWidget';\n\nexport default new Component({\n  type: 'ControlledInverter',\n  name: 'Controlled inverter',\n  description: 'Useful for I/O managing',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class ControlledInverterModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('control', { orientation: (this.orientation + 1) % 4, offset: 0, length: 10 });\n    this.addInputPort('in', { bits: DATA_BITS, orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n    this.addOutputPort('out', { bits: DATA_BITS, orientation: this.orientation, offset: 2, length: 14 });\n  }\n\n  step(input) {\n    if (input.control === 0) return { out: 'x' };\n    return { out: ~input.in };\n  }\n\n  stepFloating(input) {\n    if (input.control[0] === 'x') return { out: 'e' };\n    if (input.control[0] === 0) return { out: 'x' };\n    return {\n      out: input.in.map(bit => {\n        if (bit === 0) return 1;\n        if (bit === 1) return 0;\n        if (bit === 'x') return 'e';\n        return bit;\n      }),\n    };\n  }\n\n  stepError(input) {\n    return this.stepFloating(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nexport const Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  font-size: 12px;\n\n  transition: 100ms linear;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n`;\n\nconst Chevron = ({ className, selected }) => (\n  <svg\n    className={className}\n    width={12}\n    height={20}\n    viewBox=\"0 0 12 20\"\n    stroke={`var(--border-${selected ? '' : 'un'}selected)`}\n    strokeWidth={2}\n    strokeLinecap=\"round\"\n  >\n    <line x1={0} y1={0} x2={6} y2={10} />\n    <line x1={6} y1={10} x2={0} y2={20} />\n  </svg>\n);\n\nconst PositionedChevron = styled(Chevron)`\n  position: absolute;\n  left: -1px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'in') return 'left: -7px;';\n    if (props.name === 'out') return 'right: -7px;';\n    return '';\n  }}\n`;\n\nconst CounterWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  return (\n    <Wrapper selected={selected}>\n      <PositionedChevron selected={selected} />\n      <PositionedPort name=\"in\" />\n      <PositionedPort name=\"out\" />\n      ++\n    </Wrapper>\n  );\n};\n\nexport default CounterWidget;\n","import React from 'react';\n\nimport { Wrapper } from './CounterWidget';\n\nconst CounterIcon = () => <Wrapper>++</Wrapper>;\n\nexport default CounterIcon;\n","import { Component } from '@logossim/core';\nimport { MAX_VALUE } from '@logossim/core/Simulation/utils';\n\nimport icon from './CounterIcon';\nimport model from './CounterModel';\nimport widget from './CounterWidget';\n\nexport default new Component({\n  type: 'Counter',\n  name: 'Counter',\n  description: 'Counts every input rising or falling edge',\n  group: 'Miscellaneous',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'COUNT_ON',\n      type: 'select',\n      default: 'rising',\n      label: 'Count on',\n      options: [\n        {\n          label: 'Rising edge',\n          value: 'rising',\n        },\n        {\n          label: 'Falling edge',\n          value: 'falling',\n        },\n      ],\n    },\n    {\n      name: 'START_AT',\n      type: 'number',\n      default: 0,\n      label: 'Start value at',\n      min: 0,\n      max: MAX_VALUE[16],\n      validate(value, configurations) {\n        const DATA_BITS = Number(configurations.DATA_BITS);\n\n        if (value > MAX_VALUE[DATA_BITS])\n          return `Maximum value for ${DATA_BITS}-bit is ${MAX_VALUE[DATA_BITS]}`;\n\n        return null;\n      },\n    },\n    {\n      name: 'WRAP_AT',\n      type: 'number',\n      default: 0,\n      label: 'Wrap value at (0 means no wrap)',\n      min: 0,\n      max: MAX_VALUE[16],\n      validate(value, configurations) {\n        const DATA_BITS = Number(configurations.DATA_BITS);\n        const START_AT = Number(configurations.START_AT);\n\n        if (value > MAX_VALUE[DATA_BITS])\n          return `Maximum value for ${DATA_BITS}-bit is ${MAX_VALUE[DATA_BITS]}`;\n\n        if (value !== 0 && value <= START_AT)\n          return `Value must be greater than ${START_AT} (start value)`;\n\n        return null;\n      },\n    },\n    {\n      name: 'STEP_VALUE',\n      type: 'number',\n      default: 1,\n      label: 'Step value',\n      min: 1,\n      max: MAX_VALUE[16],\n      validate(value, configurations) {\n        const DATA_BITS = Number(configurations.DATA_BITS);\n\n        if (value > MAX_VALUE[DATA_BITS])\n          return `Maximum value for ${DATA_BITS}-bit is ${MAX_VALUE[DATA_BITS]}`;\n\n        return null;\n      },\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class CounterModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n    this.countOnRising = configurations.COUNT_ON === 'rising';\n    this.startAt = configurations.START_AT;\n    this.wrapAt = configurations.WRAP_AT || 2 ** this.dataBits;\n    this.stepValue = configurations.STEP_VALUE;\n\n    this.addInputPort('in');\n    this.addOutputPort('out', { bits: this.dataBits });\n\n    this.current = this.startAt;\n  }\n\n  isRisingEdge(meta) {\n    if (this.countOnRising) return meta.in.risingEdge;\n    return meta.in.fallingEdge;\n  }\n\n  step(input, meta) {\n    if (!this.isRisingEdge(meta)) return { out: this.current };\n\n    this.current += this.stepValue;\n\n    if (this.current >= this.wrapAt) this.current = this.startAt;\n\n    return {\n      out: this.current,\n    };\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'in') return 'left: -5px;';\n    if (props.name === 'selection') return 'left: 10px;';\n    return 'right: -5px;';\n  }};\n  ${props => {\n    if (props.name === 'selection') return 'bottom: -5px;';\n    return `top: ${(props.position || 0) - 5}px;`;\n  }};\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: ${props => (props.outputNumber + 2) * 15}px;\n`;\n\nexport const Shape = ({ selected, outputNumber, icon }) => {\n  const height = (outputNumber + 2) * 15;\n\n  return (\n    <svg\n      viewBox={`0 0 30 ${height}`}\n      height={icon ? 30 : height}\n      width={icon ? 15 : 30}\n      fill={\n        selected ? 'var(--body-selected)' : 'var(--body-unselected)'\n      }\n      stroke={\n        selected ? 'var(--link-selected)' : 'var(--link-16-bit-color)'\n      }\n      strokeLinecap=\"round\"\n      strokeWidth=\"2\"\n    >\n      <path d={`M0,15 L0,${height - 15} L30,${height} L30,0 Z`} />\n      <path d={`M15,${height - 7.5} L15,${height}`} />\n    </svg>\n  );\n};\n\nconst DemuxWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const outputPorts = Object.values(model.getOutputPorts());\n  const { outputNumber } = model;\n\n  return (\n    <Wrapper outputNumber={outputNumber}>\n      <PositionedPort\n        name=\"in\"\n        position={((outputNumber + 2) * 15) / 2}\n      />\n      <PositionedPort name=\"selection\" />\n      {outputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={(i + 1) * 15}\n        />\n      ))}\n      <Shape selected={selected} outputNumber={outputNumber} />\n    </Wrapper>\n  );\n};\n\nexport default DemuxWidget;\n","import React from 'react';\n\nimport { Shape } from './DemuxWidget';\n\nconst DemuxIcon = () => <Shape dataBits={1} outputNumber={2} icon />;\n\nexport default DemuxIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './DemuxIcon';\nimport model from './DemuxModel';\nimport widget from './DemuxWidget';\n\nexport default new Component({\n  type: 'Demux',\n  name: 'Demux',\n  description: 'Demultiplexer',\n  group: 'Plexers',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bits',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'OUTPUT_NUMBER',\n      type: 'select',\n      default: '2',\n      label: 'Number of outputs',\n      options: [\n        {\n          label: '2',\n          value: '2',\n        },\n        {\n          label: '4',\n          value: '4',\n        },\n        {\n          label: '16',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class DemuxModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n    this.outputNumber = Number(configurations.OUTPUT_NUMBER);\n\n    this.addInputPort('in', { bits: DATA_BITS });\n    this.addInputPort('selection', {\n      bits: Math.log2(this.outputNumber),\n    });\n\n    for (let i = 0; i < this.outputNumber; i += 1) {\n      this.addOutputPort(`out${i}`, { bits: DATA_BITS });\n    }\n  }\n\n  step(input) {\n    return {\n      ...Object.fromEntries(\n        [...new Array(this.outputNumber)].map((_, i) => [\n          `out${i}`,\n          0,\n        ]),\n      ),\n      [`out${input.selection}`]: input.in,\n    };\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  transform: translateX(-50%);\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n`;\n\nexport const Shape = ({ selected, dataBits = 1 }) => {\n  return (\n    <svg\n      viewBox=\"0 0 30 30\"\n      width=\"30\"\n      height=\"30\"\n      fill=\"none\"\n      stroke={selected ? 'var(--value-5)' : 'var(--value-0)'}\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <polyline\n        points=\"15 0 15 15\"\n        strokeWidth={`var(--link-${dataBits}-bit-width)`}\n        strokeLinecap=\"butt\"\n      />\n      <polyline points=\"7 15 23 15\" />\n      <polyline points=\"7 15 2 25\" />\n      <polyline points=\"15 15 9 25\" />\n      <polyline points=\"23 15 17 25\" />\n    </svg>\n  );\n};\n\nconst GroundWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  return (\n    <Wrapper>\n      <Shape selected={selected} dataBits={model.dataBits} />\n      <PositionedPort name=\"out\" />\n    </Wrapper>\n  );\n};\n\nexport default GroundWidget;\n","import React from 'react';\n\nimport { Shape } from './GroundWidget';\n\nconst GroundIcon = () => <Shape />;\n\nexport default GroundIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './GroundIcon';\nimport model from './GroundModel';\nimport widget from './GroundWidget';\n\nexport default new Component({\n  type: 'Ground',\n  name: 'Ground',\n  description: 'Ground (GND) component',\n  group: 'Wiring',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class GroundModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.addOutputPort('out', { bits: this.dataBits });\n  }\n\n  onSimulationStart() {\n    this.emit({ out: 0 });\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst SHAPE_SIZES = {\n  1: { width: 30, height: 30 },\n  2: { width: 60, height: 30 },\n  4: { width: 120, height: 30 },\n  8: { width: 120, height: 60 },\n  16: { width: 240, height: 60 },\n};\n\nconst PIN_BACKGROUND = {\n  0: 'var(--value-off)',\n  1: 'var(--value-on)',\n  x: 'var(--value-floating)',\n};\n\nconst PIN_BORDER = {\n  0: 'var(--value-on)',\n  1: 'var(--value-off)',\n  x: 'black',\n};\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: ${props.position-2}px`};\n`;\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  \n  width: ${props => SHAPE_SIZES[props.dataBits].width}px;\n  height: ${props => SHAPE_SIZES[props.dataBits].height}px;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 20px;\n`;\n\nexport const PinContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  align-items: center;\n\n  max-width: 215px;\n`;\n\nexport const Pin = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ${props => PIN_BACKGROUND[props.value]};\n  border: 2px solid ${props => PIN_BORDER[props.value]};\n  border-radius: 100%;\n\n  color: ${props => (props.value === 1 ? 'black' : 'white')};\n  font-family: monospace;\n\n  transition: 100ms linear;\n`;\n\nconst InputWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n    configurations: { DATA_BITS },\n  } = model;\n\n  const dataBits = Number(DATA_BITS);\n\n  const orientation = model.orientation;\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const size = SHAPE_SIZES[dataBits];\n  const positions = [size.width, size.height, size.width, size.height];\n\n  return (\n    <Shape selected={selected} dataBits={dataBits}>\n      <PinContainer>\n        {[...new Array(dataBits)].map((_, index) => {\n          const value = model.getBitAt(index);\n\n          return (\n            <Pin\n              // eslint-disable-next-line react/no-array-index-key\n              key={index}\n              onClick={() => model.onClick(index)}\n              value={value}\n            >\n              {value}\n            </Pin>\n          );\n        })}\n      </PinContainer>\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n        position={positions[orientation]}\n      />\n    </Shape>\n  );\n};\n\nexport default InputWidget;\n","import React from 'react';\n\nimport { Shape, Pin } from './InputWidget';\n\nconst InputIcon = () => (\n  <Shape dataBits={1}>\n    <Pin as=\"div\" value={0} />\n  </Shape>\n);\n\nexport default InputIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './InputIcon';\nimport model from './InputModel';\nimport widget from './InputWidget';\n\nexport default new Component({\n  type: 'Input',\n  name: 'Input pin',\n  description: 'Simple input pin',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'THREE_STATE',\n      type: 'select',\n      default: 'false',\n      label: 'Three state',\n      options: [\n        {\n          label: 'Yes',\n          value: 'true',\n        },\n        {\n          label: 'No',\n          value: 'false',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class InputModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n    this.threeState = configurations.THREE_STATE === 'true';\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 0, length: 10 });\n  }\n\n  onSimulationStart() {\n    this.emit({ out: 0 });\n  }\n\n  nextValue(value) {\n    if (value === 'x') return 0;\n    if (value === 0) return 1;\n    return this.threeState ? 'x' : 0;\n  }\n\n  onClick(index) {\n    this.emit({\n      out: this.getOutput().map((v, i) => {\n        if (i === index) return this.nextValue(v);\n        return v;\n      }),\n    });\n  }\n\n  getOutput() {\n    return (\n      this.getPort('out').getValue() || Array(this.dataBits).fill(0)\n    );\n  }\n\n  getBitAt(index) {\n    return this.getOutput()[index];\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return `right: -5px; top: -5px`;\n    return `left: -5px; bottom: ${props.position - 5}px;`;\n  }}\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: ${props => 15 * props.dataBits}px;\n`;\n\nexport const Shape = ({ selected, dataBits }) => {\n  const height = dataBits * 15;\n\n  return (\n    <svg\n      viewBox={`0 0 30 ${height}`}\n      height={height}\n      width=\"30\"\n      fill=\"none\"\n      stroke={\n        selected ? 'var(--link-selected)' : 'var(--link-16-bit-color)'\n      }\n      strokeLinecap=\"butt\"\n      strokeWidth=\"2\"\n    >\n      <path strokeWidth=\"4\" d={`M30,0 L15,15 L15,${height}`} />\n      {[...new Array(dataBits)]\n        .map((_, index) => index)\n        .map(index => {\n          const bitHeight = height - index * 15;\n\n          return (\n            <path\n              key={index}\n              d={`M15,${bitHeight} L0,${bitHeight}`}\n            />\n          );\n        })}\n    </svg>\n  );\n};\n\nconst JoinerWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n    configurations: { DATA_BITS },\n  } = model;\n\n  const dataBits = Number(DATA_BITS);\n  const inputPorts = Object.values(model.getInputPorts());\n\n  return (\n    <Wrapper dataBits={dataBits}>\n      {inputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={i * 15}\n        />\n      ))}\n      <PositionedPort name=\"out\" />\n      <Shape selected={selected} dataBits={dataBits} />\n    </Wrapper>\n  );\n};\n\nexport default JoinerWidget;\n","import React from 'react';\n\nimport { Shape } from './JoinerWidget';\n\nconst JoinerIcon = () => <Shape dataBits={2} />;\n\nexport default JoinerIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './JoinerIcon';\nimport model from './JoinerModel';\nimport widget from './JoinerWidget';\n\nexport default new Component({\n  type: 'Joiner',\n  name: 'Joiner',\n  description: 'Joins N 1 bit wires into one N bit wire',\n  group: 'Wiring',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '2',\n      label: 'Output data bits',\n      options: [\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class JoinerModel extends BaseModel {\n  initialize(configurations) {\n    this.bits = Number(configurations.DATA_BITS);\n\n    for (let i = 0; i < this.bits; i += 1) {\n      this.addInputPort(`in${i}`);\n    }\n    this.addOutputPort('out', { bits: this.bits });\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(1)[0])\n        .map((_, index, arr) => arr[arr.length - index - 1]),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: 28px`};\n`;\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ${props =>\n    `${props.color}${props.selected ? '80' : 'ff'}`};\n  box-shadow: 0 0 ${props => (props.isActive ? 15 : 0)}px\n    ${props => props.color};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 15px;\n`;\n\nconst LedWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n\n  return (\n    <Shape\n      selected={selected}\n      color={model.getColor()}\n      isActive={model.isActive()}\n      data-testid=\"shape\"\n    >\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[model.orientation]}\n      />\n    </Shape>\n  );\n};\n\nexport default LedWidget;\n","import React from 'react';\n\nimport { Shape } from './LedWidget';\n\nconst LedIcon = () => <Shape color=\"#00ff00\" />;\n\nexport default LedIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './LedIcon';\nimport model from './LedModel';\nimport widget from './LedWidget';\n\nexport default new Component({\n  type: 'Led',\n  name: 'LED',\n  description: 'Simple LED component',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'ACTIVE_WHEN',\n      type: 'select',\n      default: 'HIGH',\n      label: 'Active when',\n      options: [\n        {\n          label: 'High',\n          value: 'HIGH',\n        },\n        {\n          label: 'Low',\n          value: 'LOW',\n        },\n      ],\n    },\n    {\n      name: 'ON_COLOR',\n      type: 'select',\n      default: '#00ff00',\n      label: 'On color',\n      options: [\n        {\n          label: 'Red',\n          value: '#ff0000',\n        },\n        {\n          label: 'Green',\n          value: '#00ff00',\n        },\n        {\n          label: 'Blue',\n          value: '#0000ff',\n        },\n        {\n          label: 'White',\n          value: '#ffffff',\n        },\n        {\n          label: 'Black',\n          value: '#000000',\n        },\n      ],\n    },\n    {\n      name: 'OFF_COLOR',\n      type: 'select',\n      default: '#000000',\n      label: 'Off color',\n      options: [\n        {\n          label: 'Red',\n          value: '#ff0000',\n        },\n        {\n          label: 'Green',\n          value: '#00ff00',\n        },\n        {\n          label: 'Blue',\n          value: '#0000ff',\n        },\n        {\n          label: 'White',\n          value: '#ffffff',\n        },\n        {\n          label: 'Black',\n          value: '#000000',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class LedModel extends BaseModel {\n  initialize(configurations) {\n    this.activeWhen = configurations.ACTIVE_WHEN;\n    this.colors = {\n      on: configurations.ON_COLOR,\n      off: configurations.OFF_COLOR,\n    };\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('in', { orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n  }\n\n  getInput() {\n    const value = this.getPort('in').getValue();\n\n    if (!value) return 0;\n    return value[0];\n  }\n\n  isActive() {\n    const input = this.getInput();\n\n    if (this.activeWhen === 'HIGH') {\n      if (input === 0) return false;\n      return true;\n    }\n\n    if (input === 0) return true;\n    return false;\n  }\n\n  getColor() {\n    if (this.isActive()) return this.colors.on;\n    return this.colors.off;\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'out') return 'right: -5px;';\n    if (props.name === 'selection') return 'left: 10px;';\n    return 'left: -5px;';\n  }};\n  ${props => {\n    if (props.name === 'selection') return 'bottom: -5px;';\n    return `top: ${(props.position || 0) - 5}px;`;\n  }};\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: ${props => (props.inputNumber + 2) * 15}px;\n`;\n\nexport const Shape = ({ selected, inputNumber, icon }) => {\n  const height = (inputNumber + 2) * 15;\n\n  return (\n    <svg\n      viewBox={`0 0 30 ${height}`}\n      height={icon ? 30 : height}\n      width={icon ? 15 : 30}\n      fill={\n        selected ? 'var(--body-selected)' : 'var(--body-unselected)'\n      }\n      stroke={\n        selected ? 'var(--link-selected)' : 'var(--link-16-bit-color)'\n      }\n      strokeLinecap=\"round\"\n      strokeWidth=\"2\"\n    >\n      <path d={`M0,0 L0,${height} L30,${height - 15} L30,15 Z`} />\n      <path d={`M15,${height - 7.5} L15,${height}`} />\n    </svg>\n  );\n};\n\nconst MuxWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const inputNumber = inputPorts.length;\n\n  return (\n    <Wrapper inputNumber={inputNumber}>\n      {inputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={(i + 1) * 15}\n        />\n      ))}\n      <PositionedPort\n        name=\"out\"\n        position={((inputNumber + 1) * 15) / 2}\n      />\n      <Shape selected={selected} inputNumber={inputNumber} />\n    </Wrapper>\n  );\n};\n\nexport default MuxWidget;\n","import React from 'react';\n\nimport { Shape } from './MuxWidget';\n\nconst MuxIcon = () => <Shape dataBits={1} inputNumber={2} icon />;\n\nexport default MuxIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './MuxIcon';\nimport model from './MuxModel';\nimport widget from './MuxWidget';\n\nexport default new Component({\n  type: 'Mux',\n  name: 'Mux',\n  description: 'Multiplexer',\n  group: 'Plexers',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bits',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'INPUT_NUMBER',\n      type: 'select',\n      default: '2',\n      label: 'Number of inputs',\n      options: [\n        {\n          label: '2',\n          value: '2',\n        },\n        {\n          label: '4',\n          value: '4',\n        },\n        {\n          label: '16',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class MuxModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n    const INPUT_NUMBER = Number(configurations.INPUT_NUMBER);\n\n    for (let i = 0; i < INPUT_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: DATA_BITS });\n    }\n\n    this.addInputPort('selection', { bits: Math.log2(INPUT_NUMBER) });\n    this.addOutputPort('out', { bits: DATA_BITS });\n  }\n\n  step(input) {\n    return { out: input[`in${input.selection}`] };\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 100px`;\n    return `${props.side}: 103px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, dWidth = 15, dHeight = 0, vbWidth = 27.781249, vbHeight = 23.812501, orientation = 0, translation = 0 }) => (\n  <svg\n    height={size + dHeight}\n    width={size + dWidth}\n    viewBox={`0 0 ${vbWidth} ${vbHeight}`}\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g transform={`scale(0.26458333) rotate(${orientation*90} 45 45) translate(${translation})`}>\n      <path d=\"m 2,2 v 43 a 42.999999,42.999999 0 0 0 0,0.271484 V 88 H 45 A 42.999999,42.999999 0 0 0 88,45 42.999999,42.999999 0 0 0 45,2 h -0.271484 z\" />\n      <circle r=\"5.72056\" cy=\"45\" cx=\"94.27944\" />\n    </g>\n  </svg>\n);\n\nconst NandWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const dWidths = [15, 0];\n  const dHeights = [0, 15];\n  const vbWidths = [27.781249, 23.812501];\n  const vbHeights = [23.812501, 27.781249];\n  const translations = [0, 0, -15, -15];\n\n  return (\n    <Wrapper\n      selected={model.isSelected()}\n      width={90 + dWidths[orientation % 2]}\n      height={90 + dHeights[orientation % 2]}\n    >\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n      />\n      {inputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={portPositions[i]}\n          edge={inputEdges[orientation]}\n          side={inputSides[orientation]}\n        />\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        dWidth={dWidths[orientation % 2]}\n        dHeight={dHeights[orientation % 2]}\n        vbWidth={vbWidths[orientation % 2]}\n        vbHeight={vbHeights[orientation % 2]}\n        orientation={orientation}\n        translation={translations[orientation]}\n      />\n    </Wrapper>\n  );\n};\n\nexport default NandWidget;\n","import React from 'react';\n\nimport { Shape } from './NandWidget';\n\nconst NandIcon = () => <Shape size={30} />;\n\nexport default NandIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './NandIcon';\nimport model from './NandModel';\nimport widget from './NandWidget';\n\nexport default new Component({\n  type: 'Nand',\n  name: 'Nand',\n  description: 'Logic \"not and\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class NandModel extends BaseModel {\n  initialize(configurations) {\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: 10 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 13 });\n  }\n\n  executeBit(bits) {\n    if (bits.some(bit => bit === 0)) return 1;\n    if (bits.every(bit => bit === 1)) return 0;\n    return 'e';\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React, { Fragment } from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PortExtensionConnector = styled.div`\n  position: absolute;\n  z-index: -1;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--border-selected)'\n      : 'var(--border-unselected)'};\n\n  height: 2px;\n  width: 15px;\n\n  top: ${props => props.position * 15 - 1}px;\n  left: -2px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 100px`;\n    return `${props.side}: 103px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, portPositions = [], dWidth = 15, dHeight = 0, vbWidth = 27.781249, vbHeight = 23.812501, orientation = 0, translation = 0, portWidth = 0.5, portColor }) => (\n  <svg\n    height={size + dHeight}\n    width={size + dWidth}\n    viewBox={`0 0 ${vbWidth} ${vbHeight}`}\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g transform={`scale(0.26458333) rotate(${orientation*90} 45 45) translate(${translation})`}>\n      <path d=\"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z\" />\n      <circle r=\"5.72056\" cy=\"45\" cx=\"94.27944\" />\n    </g>\n    <g\n      transform={`scale(0.26458333) rotate(${orientation*90} 45 45) translate(${translation})`}\n      strokeWidth={portWidth}\n      stroke={portColor}\n    >\n      {portPositions.includes(1) && (\n        <path d=\"M 18.4669,15 H 1.44549\" />\n      )}\n      {portPositions.includes(2) && (\n        <path d=\"M 20.1902,30 H 1.445\" />\n      )}\n      {portPositions.includes(3) && (\n        <path d=\"M 21.1563,45 H 1.445\" />\n      )}\n      {portPositions.includes(4) && (\n        <path d=\"M 19.8489,60 H 1.445\" />\n      )}\n      {portPositions.includes(5) && (\n        <path d=\"M 16.5984,75 H 1.445\" />\n      )}\n    </g>\n  </svg>\n);\n\nconst NorWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const portWidth = inputPorts[0].getLineWidth();\n  const portColor = inputPorts[0].getLineColor();\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const dWidths = [15, 0];\n  const dHeights = [0, 15];\n  const vbWidths = [27.781249, 23.812501];\n  const vbHeights = [23.812501, 27.781249];\n  const translations = [0, 0, -15, -15];\n\n  return (\n    <Wrapper\n      selected={model.options.selected}\n      width={90 + dWidths[orientation % 2]}\n      height={90 + dHeights[orientation % 2]}\n    >\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n        offsetX={12}\n      />\n      {inputPorts.map((port, i) => (\n        <Fragment key={port.getName()}>\n          <PositionedPort\n            name={port.getName()}\n            position={portPositions[i]}\n            edge={inputEdges[orientation]}\n            side={inputSides[orientation]}\n          />\n          {(portPositions[i] < 1 || portPositions[i] > 5) && (\n            <PortExtensionConnector\n              selected={model.isSelected()}\n              position={portPositions[i]}\n              edge={inputEdges[orientation]}\n              side={inputSides[orientation]}\n            />\n          )}\n        </Fragment>\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        portPositions={portPositions}\n        dWidth={dWidths[orientation % 2]}\n        dHeight={dHeights[orientation % 2]}\n        vbWidth={vbWidths[orientation % 2]}\n        vbHeight={vbHeights[orientation % 2]}\n        orientation={orientation}\n        translation={translations[orientation]}\n        portWidth={portWidth}\n        portColor={portColor}\n      />\n    </Wrapper>\n  );\n};\n\nexport default NorWidget;\n","import React from 'react';\n\nimport { Shape } from './NorWidget';\n\nconst NorIcon = () => <Shape size={30} />;\n\nexport default NorIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './NorIcon';\nimport model from './NorModel';\nimport widget from './NorWidget';\n\nexport default new Component({\n  type: 'Nor',\n  name: 'Nor',\n  description: 'Logic \"not or\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class NorModel extends BaseModel {\n  initialize(configurations) {\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: -5 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 13 });\n  }\n\n  executeBit(bits) {\n    if (bits.every(bit => bit === 0)) return 1;\n    if (bits.some(bit => bit === 1)) return 0;\n    return 'e';\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => {\n    if (props.name === 'in') return `${props.side}: 45px;`;\n    if (props.name === 'out') return `${props.side}: 39px;`;\n    return '';\n  }}\n`;\n\nexport const Shape = ({ size = 30, dWidth = 15, dHeight = 0, orientation = 0, translation = 0 }) => (\n  <svg\n    height={size + dHeight}\n    width={size + dWidth}\n    viewBox=\"11 0 45.0 45.0\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g transform={`rotate(${orientation*90} 28 17) translate(${translation})`}>\n      <path d=\"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z\" />\n      <circle r=\"8\" cy=\"22\" cx=\"51\" />\n    </g>\n  </svg>\n);\n\nconst NotWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const orientation = model.orientation;\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const dWidths = [15, 0];\n  const dHeights = [0, 15];\n  const translations = ['0 0', '0 -11', '-12 -11', '-12 0'];\n\n  return (\n    <Wrapper\n      selected={selected}\n      width={30 + dWidths[orientation % 2]}\n      height={30 + dHeights[orientation % 2]}\n    >\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[orientation]}\n      />\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        dWidth={dWidths[orientation % 2]}\n        dHeight={dHeights[orientation % 2]}\n        orientation={orientation}\n        translation={translations[orientation]}\n      />\n    </Wrapper>\n  );\n};\n\nexport default NotWidget;\n","import React from 'react';\n\nimport { Shape } from './NotWidget';\n\nconst NotIcon = () => <Shape size={30} />;\n\nexport default NotIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './NotIcon';\nimport model from './NotModel';\nimport widget from './NotWidget';\n\nexport default new Component({\n  type: 'Not',\n  name: 'Not',\n  description: 'Negation component',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class NotModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('in', { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 14 });\n  }\n\n  step(input) {\n    return {\n      out: input.in.asArray(this.dataBits).map(bit => {\n        if (bit === 1) return 0;\n        return 1;\n      }),\n    };\n  }\n}\n","import React, { Fragment } from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PortExtensionConnector = styled.div`\n  position: absolute;\n  z-index: -1;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--border-selected)'\n      : 'var(--border-unselected)'};\n\n  height: 2px;\n  width: 15px;\n\n  top: ${props => props.position * 15 - 1}px;\n  left: -2px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 88px`;\n    return `${props.side}: 88px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, portPositions = [], orientation = 0, portWidth = 0.5, portColor }) => (\n  <svg\n    height={size}\n    width={size}\n    viewBox=\"0 0 23.812499 23.812501\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g>\n      <path\n        d=\"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z\"\n        transform={`scale(0.26458333) rotate(${orientation*90} 45 45)`}\n      />\n    </g>\n    <g\n      transform={`scale(0.26458333) rotate(${orientation*90} 45 45)`}\n      strokeWidth={portWidth}\n      stroke={portColor}\n    >\n      {portPositions.includes(1) && (\n        <path d=\"M 18.4669,15 H 1.44549\" />\n      )}\n      {portPositions.includes(2) && (\n        <path d=\"M 20.1902,30 H 1.445\" />\n      )}\n      {portPositions.includes(3) && (\n        <path d=\"M 21.1563,45 H 1.445\" />\n      )}\n      {portPositions.includes(4) && (\n        <path d=\"M 19.8489,60 H 1.445\" />\n      )}\n      {portPositions.includes(5) && (\n        <path d=\"M 16.5984,75 H 1.445\" />\n      )}\n    </g>\n  </svg>\n);\n\nconst OrWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const portWidth = inputPorts[0].getLineWidth();\n  const portColor = inputPorts[0].getLineColor();\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  return (\n    <Wrapper selected={model.options.selected}>\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n        offsetX={12}\n      />\n      {inputPorts.map((port, i) => (\n        <Fragment key={port.getName()}>\n          <PositionedPort\n            name={port.getName()}\n            position={portPositions[i]}\n            edge={inputEdges[orientation]}\n            side={inputSides[orientation]}\n          />\n          {(portPositions[i] < 1 || portPositions[i] > 5) && (\n            <PortExtensionConnector\n              selected={model.isSelected()}\n              position={portPositions[i]}\n            />\n          )}\n        </Fragment>\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        portPositions={portPositions}\n        orientation={orientation}\n        portWidth={portWidth}\n        portColor={portColor}\n      />\n    </Wrapper>\n  );\n};\n\nexport default OrWidget;\n","import React from 'react';\n\nimport { Shape } from './OrWidget';\n\nconst OrIcon = () => <Shape size={30} />;\n\nexport default OrIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './OrIcon';\nimport model from './OrModel';\nimport widget from './OrWidget';\n\nexport default new Component({\n  type: 'Or',\n  name: 'Or',\n  description: 'Logic \"or\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class OrModel extends BaseModel {\n  initialize(configurations) {\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: -5 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 10 });\n  }\n\n  executeBit(bits) {\n    if (bits.every(bit => bit === 0)) return 0;\n    if (bits.some(bit => bit === 1)) return 1;\n    return 'e';\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst SHAPE_SIZES = {\n  1: { width: 30, height: 30 },\n  2: { width: 60, height: 30 },\n  4: { width: 120, height: 30 },\n  8: { width: 120, height: 60 },\n  16: { width: 240, height: 60 },\n};\n\nconst PIN_BACKGROUND = {\n  0: 'var(--value-off)',\n  1: 'var(--value-on)',\n  x: 'var(--value-floating)',\n  e: 'var(--value-error)',\n};\n\nconst PIN_BORDER = {\n  0: 'var(--value-on)',\n  1: 'var(--value-off)',\n  x: 'black',\n  e: 'black',\n};\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: ${props.position-2}px`};\n`;\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => {\n    if (props.format === 'BITS')\n      return SHAPE_SIZES[props.dataBits].width;\n\n    return SHAPE_SIZES[4].width;\n  }}px;\n  height: ${props => {\n    if (props.format === 'BITS')\n      return SHAPE_SIZES[props.dataBits].height;\n\n    return SHAPE_SIZES[4].height;\n  }}px;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 20px;\n`;\n\nexport const PinContainer = styled.span`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  align-items: center;\n  font-family: monospace;\n\n  max-width: 215px;\n`;\n\nexport const Pin = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ${props => PIN_BACKGROUND[props.value]};\n  border: 2px solid ${props => PIN_BORDER[props.value]};\n  border-radius: 100%;\n\n  color: ${props => (props.value === 1 ? 'black' : 'white')};\n  font-family: monospace;\n\n  transition: 100ms linear;\n`;\n\nconst ErrorMessage = styled.span`\n  color: var(--value-error);\n  font-weight: bold;\n  font-family: monospace;\n`;\n\nconst FloatingMessage = styled.span`\n  color: var(--value-floating);\n  font-weight: bold;\n  font-family: monospace;\n`;\n\nconst mapBits = model => {\n  const {\n    configurations: { DATA_BITS },\n  } = model;\n  const dataBits = Number(DATA_BITS);\n\n  return [...new Array(dataBits)].map((_, index) => {\n    const value = model.getBitAt(index);\n\n    return (\n      <Pin\n        // eslint-disable-next-line react/no-array-index-key\n        key={index}\n        value={value}\n      >\n        {value}\n      </Pin>\n    );\n  });\n};\n\nconst showAsNumber = (input, format) => {\n  const number = input.asNumber();\n  if (number === 'e') return <ErrorMessage>(error)</ErrorMessage>;\n  if (number === 'x')\n    return <FloatingMessage>(floating)</FloatingMessage>;\n\n  if (format === 'DECIMAL') return number;\n  if (format === 'HEXADECIMAL')\n    return `0x${number.toString(16).padStart(4, '0')}`;\n  return '';\n};\n\nconst OutputWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n    configurations: { OUTPUT_FORMAT, DATA_BITS },\n  } = model;\n\n  const dataBits = Number(DATA_BITS);\n\n  const orientation = model.orientation;\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n\n  const width = (OUTPUT_FORMAT === 'BITS') ? SHAPE_SIZES[dataBits].width : SHAPE_SIZES[4].width;\n  const height = (OUTPUT_FORMAT === 'BITS') ? SHAPE_SIZES[dataBits].height : SHAPE_SIZES[4].height;\n  const positions = [width, height, width, height];\n\n  return (\n    <Shape\n      selected={selected}\n      format={OUTPUT_FORMAT}\n      dataBits={dataBits}\n    >\n      <PinContainer data-testid=\"pin-container\">\n        {OUTPUT_FORMAT === 'BITS'\n          ? mapBits(model)\n          : showAsNumber(model.getInput(), OUTPUT_FORMAT)}\n      </PinContainer>\n      <PositionedPort\n        name=\"in\"\n        side={inputSides[orientation]}\n        position={positions[orientation]}\n      />\n    </Shape>\n  );\n};\n\nexport default OutputWidget;\n","import React from 'react';\n\nimport { Shape, Pin } from './OutputWidget';\n\nconst OutputIcon = () => (\n  <Shape dataBits={1} format=\"BITS\">\n    <Pin as=\"div\" value={0} />\n  </Shape>\n);\n\nexport default OutputIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './OutputIcon';\nimport model from './OutputModel';\nimport widget from './OutputWidget';\n\nexport default new Component({\n  type: 'Output',\n  name: 'Output pin',\n  description: 'Simple output pin',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'OUTPUT_FORMAT',\n      type: 'select',\n      default: 'BITS',\n      label: 'Output format',\n      options: [\n        {\n          label: 'Bit by bit',\n          value: 'BITS',\n        },\n        {\n          label: 'Decimal number',\n          value: 'DECIMAL',\n        },\n        {\n          label: 'Hexadecimal number',\n          value: 'HEXADECIMAL',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class OutputModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addInputPort('in', { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 0, length: 10 });\n  }\n\n  getInput() {\n    return (\n      this.getPort('in').getValue() ||\n      new Array(this.dataBits).fill(0)\n    );\n  }\n\n  getBitAt(index) {\n    return this.getInput()[index];\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  left: 50%;\n  bottom: -5px;\n  transform: translateX(-50%);\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n`;\n\nexport const Shape = ({ selected, dataBits = 1 }) => {\n  return (\n    <svg\n      viewBox=\"0 0 30 30\"\n      width=\"30\"\n      height=\"30\"\n      fill=\"none\"\n      stroke={selected ? 'var(--value-5)' : 'var(--value-10)'}\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <polyline\n        points=\"15 15 15 30\"\n        strokeWidth={`var(--link-${dataBits}-bit-width)`}\n        strokeLinecap=\"butt\"\n      />\n      <polyline\n        points=\"7 15 15 0 23 15 7 15\"\n        fill=\"var(--value-2)\"\n        fillOpacity={\n          selected\n            ? 'var(--unselected-opacity)'\n            : 'var(--selected-opacity)'\n        }\n      />\n    </svg>\n  );\n};\n\nconst PowerWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  return (\n    <Wrapper>\n      <Shape selected={selected} dataBits={model.dataBits} />\n      <PositionedPort name=\"out\" />\n    </Wrapper>\n  );\n};\n\nexport default PowerWidget;\n","import React from 'react';\n\nimport { Shape } from './PowerWidget';\n\nconst PowerIcon = () => <Shape />;\n\nexport default PowerIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './PowerIcon';\nimport model from './PowerModel';\nimport widget from './PowerWidget';\n\nexport default new Component({\n  type: 'Power',\n  name: 'Power',\n  description: 'Power (VCC) component',\n  group: 'Wiring',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class PowerModel extends BaseModel {\n  initialize(configurations) {\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.addOutputPort('out', { bits: this.dataBits });\n  }\n\n  onSimulationStart() {\n    this.emit({ out: 0b1111_1111_1111_1111 });\n  }\n}\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Icon = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n  font-size: 10px;\n\n  background: var(--body-unselected);\n  border: 1px solid var(--border-unselected);\n`;\n\nconst RamIcon = () => <Icon>RAM</Icon>;\n\nexport default RamIcon;\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 180px;\n  height: 150px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 1px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n\n  transition: 100ms linear;\n`;\n\nconst Memory = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  overflow: hidden;\n  background: white;\n  border: 2px solid #c9c9c9;\n\n  width: 80%;\n  height: 112px;\n  font-size: 10px;\n`;\n\nconst Cell = styled.div`\n  display: flex;\n  border-bottom: 1px solid #c9c9c9;\n  padding: 0 4px;\n`;\n\nconst ActiveAddress = styled.div`\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 8px;\n  border-color: ${({ isSelected }) =>\n    `transparent transparent transparent ${\n      isSelected ? '#f44336' : 'transparent'\n    }`};\n  margin: auto 4px auto -4px;\n`;\n\nconst AddressValueContainer = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Address = styled.span`\n  margin-right: 4px;\n  padding: 1px 4px;\n  height: fit-content;\n\n  font-family: monospace;\n  font-size: 8px;\n  color: white;\n\n  background: #2642a0;\n  border-radius: 2px;\n`;\n\nconst Value = styled.span`\n  padding: 4px;\n`;\n\nconst Chevron = ({ className, selected }) => (\n  <svg\n    className={className}\n    width={20}\n    height={12}\n    viewBox=\"0 0 20 12\"\n    stroke={`var(--border-${selected ? '' : 'un'}selected)`}\n    strokeWidth={2}\n    strokeLinecap=\"round\"\n  >\n    <line x1={0} y1={12} x2={10} y2={0} />\n    <line x1={10} y1={0} x2={20} y2={12} />\n  </svg>\n);\n\nconst PositionedChevron = styled(Chevron)`\n  position: absolute;\n  bottom: -1px;\n  left: calc(50% - 10px);\n\n  transition: 100ms linear;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'clock') return 'bottom: -5px';\n    if (props.name === 'load')\n      return 'bottom: -5px; right: calc(50% - 20px)';\n    if (props.name === 'clear')\n      return 'bottom: -5px; right: calc(50% - 35px)';\n    if (props.name === 'select')\n      return 'bottom: -5px; right: calc(50% - 50px)';\n    if (props.name === 'address') return 'left: -5px';\n    if (props.name === 'data') return 'right: -5px';\n    return '';\n  }}\n`;\n\nconst getMemoryDisplayRange = (memory, address) => {\n  if (address <= 1) return [0, 5];\n  if (address >= memory.length - 2)\n    return [memory.length - 5, memory.length];\n  return [address - 2, address + 3];\n};\n\nconst RamWidget = props => {\n  const { model } = props;\n  const selected = model.isSelected();\n\n  const memory = model.getMemory();\n  const selectedAddress = model.getAddress();\n  const range = getMemoryDisplayRange(memory, selectedAddress);\n\n  return (\n    <Wrapper selected={selected}>\n      <PositionedChevron selected={selected} />\n\n      <PositionedPort name=\"clock\" />\n      <PositionedPort name=\"load\" />\n      <PositionedPort name=\"address\" />\n      <PositionedPort name=\"data\" />\n      <PositionedPort name=\"clear\" />\n      <PositionedPort name=\"select\" />\n\n      <Memory>\n        {memory.slice(...range).map((value, index) => {\n          const address = index + range[0];\n          const formattedAddress = `0x${address\n            .toString(16)\n            .padStart(2, '0')}`;\n\n          return (\n            <Cell key={formattedAddress}>\n              <ActiveAddress\n                isSelected={address === selectedAddress}\n              />\n              <AddressValueContainer>\n                <Address>{formattedAddress}</Address>\n                <Value>{value}</Value>\n              </AddressValueContainer>\n            </Cell>\n          );\n        })}\n      </Memory>\n    </Wrapper>\n  );\n};\n\nexport default RamWidget;\n","import { Component } from '@logossim/core';\n\nimport icon from './RamIcon';\nimport model from './RamModel';\nimport widget from './RamWidget';\n\nexport default new Component({\n  type: 'Ram',\n  name: 'RAM',\n  description: 'Random access memory',\n  group: 'Memory',\n  configurations: [\n    {\n      name: 'DATA_WIDTH',\n      type: 'select',\n      default: '1',\n      label: 'Data width',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ADDRESS_WIDTH',\n      type: 'select',\n      default: '1',\n      label: 'Address width',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n      ],\n    },\n    {\n      name: 'CONTENT',\n      type: 'binary',\n      label: 'Initial content',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class RamModel extends BaseModel {\n  initialize(configurations) {\n    this.dataWidth = Number(configurations.DATA_WIDTH);\n    this.addressWidth = Number(configurations.ADDRESS_WIDTH);\n    this.memory = (configurations.CONTENT || '').parseBinary(\n      this.dataWidth,\n      2 ** this.addressWidth,\n    );\n\n    this.addInputPort('clock', { floating: 0 });\n    this.addInputPort('load', { floating: 1 });\n    this.addInputPort('address', {\n      bits: this.addressWidth,\n      floating: 0,\n    });\n    this.addInputPort('clear', { floating: 0 });\n    this.addInputPort('select', { floating: 1 });\n    this.addOutputPort('data', { bits: this.dataWidth });\n  }\n\n  clearMemory() {\n    this.memory = Array(2 ** this.addressWidth).fill(0);\n  }\n\n  getMemory() {\n    return this.memory;\n  }\n\n  getAddress() {\n    if (!this.select) return 0;\n    return (this.currentAddress || 0).asNumber();\n  }\n\n  step(input, meta) {\n    this.currentAddress = input.address;\n    this.select = input.select;\n\n    if (input.clear) this.clearMemory();\n    if (!input.select) return { data: 'x' };\n\n    if (!input.load) {\n      if (meta.clock.risingEdge && !input.clear) {\n        this.memory[input.address] = this.getPort('data')\n          .getWireValue()\n          .asNumber();\n      }\n\n      return { data: 'x' };\n    }\n\n    return {\n      data: this.memory[input.address],\n    };\n  }\n}\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Icon = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n  font-size: 10px;\n\n  background: var(--body-unselected);\n  border: 1px solid var(--border-unselected);\n`;\n\nconst RomIcon = () => <Icon>ROM</Icon>;\n\nexport default RomIcon;\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 180px;\n  height: 150px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 1px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n\n  transition: 100ms linear;\n`;\n\nconst Memory = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  overflow: hidden;\n  background: white;\n  border: 2px solid #c9c9c9;\n\n  width: 80%;\n  height: 112px;\n  font-size: 10px;\n`;\n\nconst Cell = styled.div`\n  display: flex;\n  border-bottom: 1px solid #c9c9c9;\n  padding: 0 4px;\n`;\n\nconst ActiveAddress = styled.div`\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 8px;\n  border-color: ${({ isSelected }) =>\n    `transparent transparent transparent ${\n      isSelected ? '#f44336' : 'transparent'\n    }`};\n  margin: auto 4px auto -4px;\n`;\n\nconst AddressValueContainer = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Address = styled.span`\n  margin-right: 4px;\n  padding: 1px 4px;\n  height: fit-content;\n\n  font-family: monospace;\n  font-size: 8px;\n  color: white;\n\n  background: #2642a0;\n  border-radius: 2px;\n`;\n\nconst Value = styled.span`\n  padding: 4px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'select')\n      return 'bottom: -5px; right: calc(50% - 50px)';\n    if (props.name === 'address') return 'left: -5px';\n    if (props.name === 'data') return 'right: -5px';\n    return '';\n  }}\n`;\n\nconst getMemoryDisplayRange = (memory, address) => {\n  if (address <= 1) return [0, 5];\n  if (address >= memory.length - 2)\n    return [memory.length - 5, memory.length];\n  return [address - 2, address + 3];\n};\n\nconst RomWidget = props => {\n  const { model } = props;\n  const memory = model.getMemory();\n  const selectedAddress = model.getAddress();\n  const range = getMemoryDisplayRange(memory, selectedAddress);\n\n  return (\n    <Wrapper selected={model.isSelected()}>\n      <PositionedPort name=\"address\" />\n      <PositionedPort name=\"data\" />\n      <PositionedPort name=\"select\" />\n\n      <Memory>\n        {memory.slice(...range).map((value, index) => {\n          const address = index + range[0];\n          const formattedAddress = `0x${address\n            .toString(16)\n            .padStart(2, '0')}`;\n\n          return (\n            <Cell key={formattedAddress}>\n              <ActiveAddress\n                isSelected={address === selectedAddress}\n              />\n              <AddressValueContainer>\n                <Address>{formattedAddress}</Address>\n                <Value>{value}</Value>\n              </AddressValueContainer>\n            </Cell>\n          );\n        })}\n      </Memory>\n    </Wrapper>\n  );\n};\n\nexport default RomWidget;\n","import { Component } from '@logossim/core';\n\nimport icon from './RomIcon';\nimport model from './RomModel';\nimport widget from './RomWidget';\n\nexport default new Component({\n  type: 'Rom',\n  name: 'ROM',\n  description: 'Read only memory',\n  group: 'Memory',\n  configurations: [\n    {\n      name: 'DATA_WIDTH',\n      type: 'select',\n      default: '1',\n      label: 'Data width',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'ADDRESS_WIDTH',\n      type: 'select',\n      default: '1',\n      label: 'Address width',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n      ],\n    },\n    {\n      name: 'CONTENT',\n      type: 'binary',\n      label: 'Initial content',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class RomModel extends BaseModel {\n  initialize(configurations) {\n    this.dataWidth = Number(configurations.DATA_WIDTH);\n    this.addressWidth = Number(configurations.ADDRESS_WIDTH);\n    this.memory = (configurations.CONTENT || '').parseBinary(\n      this.dataWidth,\n      2 ** this.addressWidth,\n    );\n\n    this.addInputPort('address', {\n      bits: this.addressWidth,\n      floating: 0,\n    });\n    this.addInputPort('select', { floating: 1 });\n    this.addOutputPort('data', { bits: this.dataWidth });\n  }\n\n  getMemory() {\n    return this.memory;\n  }\n\n  getAddress() {\n    if (!this.select) return 0;\n    return (this.currentAddress || 0).asNumber();\n  }\n\n  step(input) {\n    this.currentAddress = input.address;\n    this.select = input.select;\n\n    if (!input.select) return { data: 'x' };\n\n    return {\n      data: this.memory[input.address],\n    };\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => (props.name === 'in' ? 'left: -5px' : 'right: -5px')};\n  bottom: ${props => (props.position || 0) - 5}px;\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  width: 30px;\n  height: ${props => 15 * props.dataBits}px;\n`;\n\nexport const Shape = ({ selected, dataBits }) => {\n  const height = dataBits * 15;\n\n  return (\n    <svg\n      viewBox={`0 0 30 ${height}`}\n      height={height}\n      width=\"30\"\n      fill=\"none\"\n      stroke={\n        selected ? 'var(--link-selected)' : 'var(--link-16-bit-color)'\n      }\n      strokeLinecap=\"butt\"\n      strokeWidth=\"2\"\n    >\n      <path\n        strokeWidth=\"4\"\n        d={`M0,${height} L15,${height - 15} L15,0`}\n      />\n      {[...new Array(dataBits)]\n        .map((_, index) => index + 1)\n        .map(index => {\n          const bitHeight = height - index * 15;\n\n          return (\n            <path\n              key={index}\n              d={`M15,${bitHeight} L30,${bitHeight}`}\n            />\n          );\n        })}\n    </svg>\n  );\n};\n\nconst SplitterWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n    configurations: { DATA_BITS },\n  } = model;\n\n  const dataBits = Number(DATA_BITS);\n  const outputPorts = Object.values(model.getOutputPorts());\n\n  return (\n    <Wrapper dataBits={dataBits}>\n      <PositionedPort name=\"in\" />\n      {outputPorts.map((port, i) => (\n        <PositionedPort\n          key={port.getName()}\n          name={port.getName()}\n          position={(i + 1) * 15}\n        />\n      ))}\n      <Shape selected={selected} dataBits={dataBits} />\n    </Wrapper>\n  );\n};\n\nexport default SplitterWidget;\n","import React from 'react';\n\nimport { Shape } from './SplitterWidget';\n\nconst SplitterIcon = () => <Shape dataBits={2} />;\n\nexport default SplitterIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './SplitterIcon';\nimport model from './SplitterModel';\nimport widget from './SplitterWidget';\n\nexport default new Component({\n  type: 'Splitter',\n  name: 'Splitter',\n  description: 'Split wire with N bits into N 1 bit wires',\n  group: 'Wiring',\n  configurations: [\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '2',\n      label: 'Input data bits',\n      options: [\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class SplitterModel extends BaseModel {\n  initialize(configurations) {\n    this.bits = Number(configurations.DATA_BITS);\n\n    this.addInputPort('in', { bits: this.bits });\n    for (let i = 0; i < this.bits; i += 1) {\n      this.addOutputPort(`out${i}`);\n    }\n  }\n\n  step(input) {\n    return Object.fromEntries(\n      input.in\n        .asArray(this.bits)\n        .map((bit, index, { length }) => [\n          `out${length - index - 1}`,\n          bit,\n        ]),\n    );\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n\n  stepError(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst SEGMENTS = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'dp'];\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  left: ${props => props.position.horizontal}px;\n  ${props => `${props.side}: ${(props.icon ? 36 : 90) - 2}px;`}\n`;\n\nexport const Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => (props.icon ? 23 : 75)}px;\n  height: ${props => (props.icon ? 36 : 90)}px;\n\n  background: ${props => `#ffffff${props.selected ? '80' : 'ff'}`};\n  box-shadow: 0 0 ${props => (props.isActive ? 15 : 0)}px\n    ${props => props.color};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 5px;\n`;\n\nexport const Shape = ({ segments, selected, icon }) => (\n  <svg\n    width={icon ? 18 : 50}\n    height={icon ? 36 : 90}\n    viewBox={icon ? '-7 0 60 90' : '0 0 50 90'}\n    fill=\"none\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{\n      opacity: selected ? '80' : 'ff',\n      fillOpacity: selected ? '80' : 'ff',\n    }}\n  >\n    {/* A */}\n    <polyline\n      points=\"5 18 11 20 32 20 35 14 9 14\"\n      fill={segments.a}\n      data-testid=\"a\"\n    />\n    {/* B */}\n    <polyline\n      points=\"37 14 41 20 39 42 37 44 33 39 34 20\"\n      fill={segments.b}\n      data-testid=\"b\"\n    />\n    {/* C */}\n    <polyline\n      points=\"37 46 38 47 36 71 31 76 29 69 31 51\"\n      fill={segments.c}\n      data-testid=\"c\"\n    />\n    {/* D */}\n    <polyline\n      points=\"0 72 7 69 27 69 29 76 4 76\"\n      fill={segments.d}\n      data-testid=\"d\"\n    />\n    {/* E */}\n    <polyline\n      points=\"4 46 8 51 7 67 0 70 2 47\"\n      fill={segments.e}\n      data-testid=\"e\"\n    />\n    {/* F */}\n    <polyline\n      points=\"5 20 11 22 10 39 4 44 3 42\"\n      fill={segments.f}\n      data-testid=\"f\"\n    />\n    {/* G */}\n    <polyline\n      points=\"6 45 9 48 31 48 35 45 32 41 11 41\"\n      fill={segments.g}\n      data-testid=\"g\"\n    />\n    {/* DP */}\n    <circle\n      r=\"5\"\n      cx=\"45\"\n      cy=\"71\"\n      fill={segments.dp}\n      data-testid=\"dp\"\n    />\n  </svg>\n);\n\nconst LedWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  return (\n    <Wrapper selected={selected}>\n      <Shape\n        selected={selected}\n        segments={SEGMENTS.reduce(\n          (prev, segment) => ({\n            ...prev,\n            [segment]: model.getColor(segment),\n          }),\n          {},\n        )}\n      />\n      {SEGMENTS.map(segment => (\n        <PositionedPort\n          key={segment}\n          name={segment}\n          position={model.getPositionForSegment(segment)}\n          side={model.getSideForSegment(segment)}\n        />\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default LedWidget;\n","import React from 'react';\n\nimport { Wrapper, Shape } from './SsdWidget';\n\nconst SsdIcon = () => (\n  <Wrapper icon>\n    <Shape\n      icon\n      segments={{\n        a: '#ff0000',\n        b: '#ff0000',\n        c: '#ff0000',\n        d: '#ff0000',\n        e: '#ff0000',\n        f: '#ff0000',\n        g: '#ff0000',\n        dp: '#ff0000',\n      }}\n    />\n  </Wrapper>\n);\n\nexport default SsdIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './SsdIcon';\nimport model from './SsdModel';\nimport widget from './SsdWidget';\n\nexport default new Component({\n  type: 'Ssd',\n  name: 'SSD',\n  description: 'Seven segments display',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'ACTIVE_WHEN',\n      type: 'select',\n      default: 'HIGH',\n      label: 'Active when',\n      options: [\n        {\n          label: 'High',\n          value: 'HIGH',\n        },\n        {\n          label: 'Low',\n          value: 'LOW',\n        },\n      ],\n    },\n    {\n      name: 'ON_COLOR',\n      type: 'select',\n      default: '#ff0000',\n      label: 'On color',\n      options: [\n        {\n          label: 'Red',\n          value: '#ff0000',\n        },\n        {\n          label: 'Green',\n          value: '#00ff00',\n        },\n        {\n          label: 'Blue',\n          value: '#0000ff',\n        },\n        {\n          label: 'White',\n          value: '#ffffff',\n        },\n        {\n          label: 'Black',\n          value: '#000000',\n        },\n      ],\n    },\n    {\n      name: 'OFF_COLOR',\n      type: 'select',\n      default: '#00000040',\n      label: 'Off color',\n      options: [\n        {\n          label: 'Red',\n          value: '#ff000040',\n        },\n        {\n          label: 'Green',\n          value: '#00ff0040',\n        },\n        {\n          label: 'Blue',\n          value: '#0000ff40',\n        },\n        {\n          label: 'White',\n          value: '#ffffff40',\n        },\n        {\n          label: 'Black',\n          value: '#00000040',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class LedModel extends BaseModel {\n  initialize(configurations) {\n    this.activeWhen = configurations.ACTIVE_WHEN;\n    this.colors = {\n      on: configurations.ON_COLOR,\n      off: configurations.OFF_COLOR,\n    };\n\n    this.canRotate = false;\n\n    this.addInputPort('a', { floating: 0, error: 0, orientation: 3, offset: 0, length: 10 });\n    this.addInputPort('b', { floating: 0, error: 0, orientation: 3, offset: 0, length: 10 });\n    this.addInputPort('c', { floating: 0, error: 0, orientation: 1, offset: 0, length: 10 });\n    this.addInputPort('d', { floating: 0, error: 0, orientation: 1, offset: 0, length: 10 });\n    this.addInputPort('e', { floating: 0, error: 0, orientation: 1, offset: 0, length: 10 });\n    this.addInputPort('f', { floating: 0, error: 0, orientation: 3, offset: 0, length: 10 });\n    this.addInputPort('g', { floating: 0, error: 0, orientation: 3, offset: 0, length: 10 });\n    this.addInputPort('dp', { floating: 0, error: 0, orientation: 1, offset: 0, length: 10 });\n  }\n\n  getInput(segment) {\n    return this.getPort(segment).getValue() || [0];\n  }\n\n  isActive(segment) {\n    const input = this.getInput(segment)[0];\n\n    if (this.activeWhen === 'HIGH') {\n      if (input === 0) return false;\n      return true;\n    }\n\n    if (input === 0) return true;\n    return false;\n  }\n\n  getPositionForSegment(segment) {\n    const POSITIONS = {\n      a: {\n        vertical: 1,\n        horizontal: 3,\n      },\n      b: {\n        vertical: 1,\n        horizontal: 4,\n      },\n      c: {\n        vertical: 2,\n        horizontal: 3,\n      },\n      d: {\n        vertical: 2,\n        horizontal: 2,\n      },\n      e: {\n        vertical: 2,\n        horizontal: 1,\n      },\n      f: {\n        vertical: 1,\n        horizontal: 2,\n      },\n      g: {\n        vertical: 1,\n        horizontal: 1,\n      },\n      dp: {\n        vertical: 2,\n        horizontal: 4,\n      },\n    };\n\n    const position = POSITIONS[segment];\n\n    return {\n      horizontal: 8 + 15 * (position.horizontal - 1),\n      vertical: position.vertical === 1 ? -2 : 88,\n    };\n  }\n\n  getColor(segment) {\n    if (this.isActive(segment)) return this.colors.on;\n    return this.colors.off;\n  }\n\n  getSideForSegment(segment) {\n    const SIDES = {\n      a: {\n        side: 'bottom',\n      },\n      b: {\n        side: 'bottom',\n      },\n      c: {\n        side: 'top',\n      },\n      d: {\n        side: 'top',\n      },\n      e: {\n        side: 'top',\n      },\n      f: {\n        side: 'bottom',\n      },\n      g: {\n        side: 'bottom',\n      },\n      dp: {\n        side: 'top',\n      },\n    }\n\n    return SIDES[segment].side;\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  ${props => `${props.side}: ${props.position-2}px`};\n`;\n\nexport const Shape = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 60px;\n  height: 30px;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--body-selected)'\n      : 'var(--body-unselected)'};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 20px;\n`;\n\nexport const Switch = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 55px;\n  height: 24px;\n  margin: 2px;\n\n  background: #848484;\n  border: 2px solid #313131;\n  border-radius: 15px;\n\n  color: ${props => (props.value === 1 ? 'black' : 'white')};\n  font-family: monospace;\n`;\n\nexport const SwitchValue = styled.div`\n  transform: ${props =>\n    props.isActive ? 'translateX(14px)' : 'translateX(-14px)'};\n\n  width: 15px;\n  height: 15px;\n\n  border-radius: 100%;\n  transition: 100ms linear;\n  background: black;\n`;\n\nconst SwitchWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  const orientation = model.orientation;\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n  const positions = [60, 30, 60, 30];\n\n  return (\n    <Shape selected={selected}>\n      <Switch onClick={() => model.onClick()}>\n        <SwitchValue isActive={model.isActive()} />\n      </Switch>\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n        position={positions[orientation]}\n      />\n    </Shape>\n  );\n};\n\nexport default SwitchWidget;\n","import React from 'react';\n\nimport { Shape, Switch, SwitchValue } from './SwitchWidget';\n\nconst SwitchIcon = () => (\n  <Shape>\n    <Switch as=\"div\">\n      <SwitchValue value={0} />\n    </Switch>\n  </Shape>\n);\n\nexport default SwitchIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './SwitchIcon';\nimport model from './SwitchModel';\nimport widget from './SwitchWidget';\n\nexport default new Component({\n  type: 'Switch',\n  name: 'Switch',\n  description: 'On/off switch',\n  group: 'Input & output',\n  configurations: [\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class SwitchModel extends BaseModel {\n  initialize(configurations) {\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    this.addOutputPort('out', { orientation: this.orientation, offset: 2, length: 8 });\n  }\n\n  onSimulationStart() {\n    this.emit({ out: 0 });\n  }\n\n  onClick(index) {\n    const mask = 0b1 << index;\n\n    this.emit({ out: this.getOutput() ^ mask });\n  }\n\n  getOutput() {\n    return this.getPort('out').getValue() || [0];\n  }\n\n  isActive() {\n    return this.getOutput()[0] === 1;\n  }\n}\n","import React, { Fragment } from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => props.width}px;\n  height: ${props => props.height}px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PortExtensionConnector = styled.div`\n  position: absolute;\n  z-index: -1;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--border-selected)'\n      : 'var(--border-unselected)'};\n\n  height: 2px;\n  width: 15px;\n\n  top: ${props => props.position * 15 - 1}px;\n  left: -2px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 100px`;\n    return `${props.side}: 103px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, portPositions = [], dWidth = 15, dHeight = 0, vbWidth = 27.781249, vbHeight = 23.812501, orientation = 0, translation = 0, portWidth = 0.5, portColor }) => (\n  <svg\n    height={size + dHeight}\n    width={size + dWidth}\n    viewBox={`0 0 ${vbWidth} ${vbHeight}`}\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g transform={`rotate(${orientation*90} 12 12) translate(${translation})`}>\n      <path\n        fill=\"none\"\n        style={{\n          transform:\n            'scale(0.284583, 0.284583) translate(-1px, -3px)',\n        }}\n        d=\"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616\"\n      />\n      <g transform=\"scale(0.26458333)\">\n        <path\n          d=\"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z\"\n          transform=\"translate(7)\"\n        />\n        <circle r=\"5.72056\" cy=\"45\" cx=\"94.27944\" />\n      </g>\n    </g>\n    <g\n      transform={` rotate(${orientation*90} 12 12) translate(${translation})`}\n      strokeWidth={portWidth}\n      stroke={portColor}\n    >\n      <g transform=\"scale(0.26458333)\">\n        {portPositions.includes(1) && (\n          <path d=\"M 18.4669,15.5 H 1.44549\" />\n        )}\n        {portPositions.includes(2) && (\n          <path d=\"M 20.1902,30.5 H 1.445\" />\n        )}\n        {portPositions.includes(3) && (\n          <path d=\"M 21.1563,45.5 H 1.445\" />\n        )}\n        {portPositions.includes(4) && (\n          <path d=\"M 19.8489,60.5 H 1.445\" />\n        )}\n        {portPositions.includes(5) && (\n          <path d=\"M 16.5984,75.5 H 1.445\" />\n        )}\n      </g>\n    </g>\n  </svg>\n);\n\nconst XnorWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const portWidth = inputPorts[0].getLineWidth();\n  const portColor = inputPorts[0].getLineColor();\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  const dWidths = [15, 0]\n  const dHeights = [0, 15]\n  const vbWidths = [27.781249, 23.812501]\n  const vbHeights = [23.812501, 27.781249]\n  const translations = [0, 0, -4, -4]\n\n  return (\n    <Wrapper\n      selected={model.options.selected}\n      width={90 + dWidths[orientation % 2]}\n      height={90 + dHeights[orientation % 2]}\n    >\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n        offsetX={12}\n      />\n      {inputPorts.map((port, i) => (\n        <Fragment key={port.getName()}>\n          <PositionedPort\n            name={port.getName()}\n            position={portPositions[i]}\n            edge={inputEdges[orientation]}\n            side={inputSides[orientation]}\n          />\n          {(portPositions[i] < 1 || portPositions[i] > 5) && (\n            <PortExtensionConnector\n              selected={model.isSelected()}\n              position={portPositions[i]}\n              edge={inputEdges[orientation]}\n              side={inputSides[orientation]}\n            />\n          )}\n        </Fragment>\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        portPositions={portPositions}\n        dWidth={dWidths[orientation % 2]}\n        dHeight={dHeights[orientation % 2]}\n        vbWidth={vbWidths[orientation % 2]}\n        vbHeight={vbHeights[orientation % 2]}\n        orientation={orientation}\n        translation={translations[orientation]}\n        portWidth={portWidth}\n        portColor={portColor}\n      />\n    </Wrapper>\n  );\n};\n\nexport default XnorWidget;\n","import React from 'react';\n\nimport { Shape } from './XnorWidget';\n\nconst XnorIcon = () => <Shape size={30} />;\n\nexport default XnorIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './XnorIcon';\nimport model from './XnorModel';\nimport widget from './XnorWidget';\n\nexport default new Component({\n  type: 'Xnor',\n  name: 'Xnor',\n  description: 'Logic \"not exclusive or\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'MULTIPLE_INPUT_BEHAVIOR',\n      type: 'select',\n      default: 'ONE',\n      label: 'Multiple input behavior',\n      options: [\n        {\n          label: 'Detect when only one input is on',\n          value: 'ONE',\n        },\n        {\n          label: 'Detect when an even number of inputs are on',\n          value: 'EVEN',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class XnorModel extends BaseModel {\n  initialize(configurations) {\n    this.behavior = configurations.MULTIPLE_INPUT_BEHAVIOR;\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: -5 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 13 });\n  }\n\n  executeBit(bits) {\n    if (bits.some(bit => bit === 'x' || bit === 'e')) return 'e';\n    if (this.behavior === 'ONE') return this.executeOne(bits);\n    if (this.behavior === 'EVEN') return this.executeEven(bits);\n    return {};\n  }\n\n  executeOne(bits) {\n    return bits.filter(bit => bit === 1).length === 1 ? 0 : 1;\n  }\n\n  executeEven(bits) {\n    return bits.filter(bit => bit === 1).length % 2 ? 0 : 1;\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit.bind(this)),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n}\n","import React, { Fragment } from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nimport { PortExtension, distributePorts } from '../portExtendUtils';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n  transition: 100ms linear;\n    fill: ${props =>\n      props.selected\n        ? 'var(--body-selected)'\n        : 'var(--body-unselected)'};\n    stroke: ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  }\n`;\n\nconst PortExtensionConnector = styled.div`\n  position: absolute;\n  z-index: -1;\n\n  background: ${props =>\n    props.selected\n      ? 'var(--border-selected)'\n      : 'var(--border-unselected)'};\n\n  height: 2px;\n  width: 15px;\n\n  top: ${props => props.position * 15 - 1}px;\n  left: -2px;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n\n  ${props => {\n    if (props.name === 'out') return '';\n    return `${props.edge}: ${props.position * 15 - 5}px;`;\n  }}\n\n  ${props => {\n    if (props.name === 'out') return `${props.side}: 88px`;\n    return `${props.side}: 88px`;\n  }};\n`;\n\nexport const Shape = ({ size = 90, portPositions = [], orientation = 0, portWidth = 0.5, portColor }) => (\n  <svg\n    height={size}\n    width={size}\n    viewBox=\"0 0 23.812499 23.812501\"\n    fill=\"var(--body-unselected)\"\n    stroke=\"var(--border-unselected)\"\n    strokeWidth=\"var(--border-width)\"\n  >\n    <g\n      transform={`rotate(${orientation*90} 12 12)`}\n    >\n      <path\n        fill=\"none\"\n        style={{\n          transform:\n            'scale(0.284583, 0.284583) translate(-1px, -3px)',\n        }}\n        d=\"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616\"\n      />\n      <g transform=\"translate(1.8657598)\">\n        <path\n          d=\"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z\"\n          transform=\"scale(0.26458333)\"\n        />\n      </g>\n    </g>\n    <g\n      transform={`scale(0.26458333) rotate(${orientation*90} 45 45)`}\n      strokeWidth={portWidth}\n      stroke={portColor}\n    >\n      {portPositions.includes(1) && (\n        <path d=\"M 18.4669,15.5 H 1.44549\" />\n      )}\n      {portPositions.includes(2) && (\n        <path d=\"M 20.1902,30.5 H 1.445\" />\n      )}\n      {portPositions.includes(3) && (\n        <path d=\"M 21.1563,45.5 H 1.445\" />\n      )}\n      {portPositions.includes(4) && (\n        <path d=\"M 19.8489,60.5 H 1.445\" />\n      )}\n      {portPositions.includes(5) && (\n        <path d=\"M 16.5984,75.5 H 1.445\" />\n      )}\n    </g>\n  </svg>\n);\n\nconst XorWidget = props => {\n  const { model } = props;\n\n  const inputPorts = Object.values(model.getInputPorts());\n  const portPositions = distributePorts(inputPorts.length);\n\n  const portWidth = inputPorts[0].getLineWidth();\n  const portColor = inputPorts[0].getLineColor();\n\n  const orientation = model.orientation;\n  const inputEdges = ['top', 'left', 'top', 'left'];\n  const inputSides = ['right', 'bottom', 'left', 'top'];\n  const outputSides = ['left', 'top', 'right', 'bottom'];\n\n  return (\n    <Wrapper selected={model.options.selected}>\n      <PortExtension\n        selected={model.isSelected()}\n        portPositions={portPositions}\n        offsetX={12}\n      />\n      {inputPorts.map((port, i) => (\n        <Fragment key={port.getName()}>\n          <PositionedPort\n            name={port.getName()}\n            position={portPositions[i]}\n            edge={inputEdges[orientation]}\n            side={inputSides[orientation]}\n          />\n          {(portPositions[i] < 1 || portPositions[i] > 5) && (\n            <PortExtensionConnector\n              selected={model.isSelected()}\n              position={portPositions[i]}\n            />\n          )}\n        </Fragment>\n      ))}\n      <PositionedPort\n        name=\"out\"\n        side={outputSides[orientation]}\n      />\n      <Shape\n        portPositions={portPositions}\n        orientation={orientation}\n        portWidth={portWidth}\n        portColor={portColor}\n      />\n    </Wrapper>\n  );\n};\n\nexport default XorWidget;\n","import React from 'react';\n\nimport { Shape } from './XorWidget';\n\nconst XorIcon = () => <Shape size={30} />;\n\nexport default XorIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './XorIcon';\nimport model from './XorModel';\nimport widget from './XorWidget';\n\nexport default new Component({\n  type: 'Xor',\n  name: 'Xor',\n  description: 'Logic \"exclusive or\" gate',\n  group: 'Logic gates',\n  configurations: [\n    {\n      name: 'INPUT_PORTS_NUMBER',\n      type: 'number',\n      default: 2,\n      label: 'Number of input ports',\n      min: 2,\n      max: 5,\n      validate(value) {\n        if (value < this.min)\n          return `Minimum input ports is ${this.min}`;\n        if (value > this.max)\n          return `Maximum input ports is ${this.max}`;\n        return null;\n      },\n    },\n    {\n      name: 'DATA_BITS',\n      type: 'select',\n      default: '1',\n      label: 'Data bits',\n      options: [\n        {\n          label: '1 bit',\n          value: '1',\n        },\n        {\n          label: '2 bits',\n          value: '2',\n        },\n        {\n          label: '4 bits',\n          value: '4',\n        },\n        {\n          label: '8 bits',\n          value: '8',\n        },\n        {\n          label: '16 bits',\n          value: '16',\n        },\n      ],\n    },\n    {\n      name: 'MULTIPLE_INPUT_BEHAVIOR',\n      type: 'select',\n      default: 'ONE',\n      label: 'Multiple input behavior',\n      options: [\n        {\n          label: 'Detect when only one input is on',\n          value: 'ONE',\n        },\n        {\n          label: 'Detect when an odd number of inputs are on',\n          value: 'ODD',\n        },\n      ],\n    },\n    {\n      name: 'ORIENTATION',\n      type: 'hidden',\n      default: 0,\n      label: 'Orientation of component',\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n","import { BaseModel } from '@logossim/core';\n\nexport default class XorModel extends BaseModel {\n  initialize(configurations) {\n    this.behavior = configurations.MULTIPLE_INPUT_BEHAVIOR;\n    this.dataBits = Number(configurations.DATA_BITS);\n\n    this.canRotate = true;\n    this.orientation = configurations.ORIENTATION;\n\n    const INPUT_PORTS_NUMBER = Number(\n      configurations.INPUT_PORTS_NUMBER,\n    );\n\n    for (let i = 0; i < INPUT_PORTS_NUMBER; i += 1) {\n      this.addInputPort(`in${i}`, { bits: this.dataBits, orientation: (this.orientation + 2) % 4, offset: 2, length: -5 });\n    }\n    this.addOutputPort('out', { bits: this.dataBits, orientation: this.orientation, offset: 2, length: 10 });\n  }\n\n  executeBit(bits) {\n    if (bits.some(bit => bit === 'x' || bit === 'e')) return 'e';\n    if (this.behavior === 'ONE') return this.executeOne(bits);\n    if (this.behavior === 'ODD') return this.executeOdd(bits);\n    return {};\n  }\n\n  executeOne(bits) {\n    return bits.filter(bit => bit === 1).length === 1 ? 1 : 0;\n  }\n\n  executeOdd(bits) {\n    return bits.filter(bit => bit === 1).length % 2 ? 1 : 0;\n  }\n\n  step(input) {\n    return {\n      out: Object.values(input)\n        .map(value => value.asArray(this.dataBits))\n        .transpose()\n        .map(this.executeBit.bind(this)),\n    };\n  }\n\n  stepFloating(input) {\n    return this.step(input);\n  }\n}\n","import React from 'react';\n\nimport { Port } from '@logossim/core';\n\nimport styled from 'styled-components';\n\nconst PORTS = ['J', 'Clock', 'K', 'Clear', 'Q', 'Qbar'];\n\nconst Chevron = ({ className, selected, icon }) => (\n  <svg\n    className={className}\n    width={icon ? 6 : 12}\n    height={icon ? 12 : 20}\n    stroke={`var(--border-${selected ? '' : 'un'}selected)`}\n    strokeWidth={2}\n    strokeLinecap=\"round\"\n  >\n    <line x1={0} y1={0} x2={icon ? 6 : 12} y2={icon ? 6 : 10} />\n    <line x1={icon ? 6 : 12} y1={icon ? 6 : 10} x2={0} y2={icon ? 12 : 20} />\n  </svg>\n);\n\nexport const PositionedChevron = styled(Chevron)`\n  position: absolute;\n  left: -1px;\n  top: ${props => props.icon ? 10 : 33}px;\n\n  transition: 100ms linear;\n`;\n\nconst PositionedPort = styled(Port)`\n  position: absolute;\n  top: ${props => props.position}px;\n  ${props => `${props.side}: ${(props.icon ? 28 : 90) - 2}px;`}\n`;\n\nconst PositionedLabel = styled.div`\n  position: absolute;\n  top: ${props => props.position+5}px;\n  ${props => `${props.side}: ${props.offset+5}px;`}\n  font-size: 0.75em;\n  transform: translateY(-50%);\n  text-decoration: ${props => props.complemented ? 'overline' : 'none'};\n`;\n\nexport const Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ${props => (props.icon ? 28 : 90)}px;\n  height: ${props => (props.icon ? 36 : 120)}px;\n\n  background: ${props => `#ffffff${props.selected ? '80' : 'ff'}`};\n  box-shadow: 0 0 ${props => (props.isActive ? 15 : 0)}px\n    ${props => props.color};\n  border: 2px solid\n    ${props =>\n      props.selected\n        ? 'var(--border-selected)'\n        : 'var(--border-unselected)'};\n  border-radius: 5px;\n\n  transition: 100ms linear;\n`;\n\nexport const Shape = ({ selected, icon }) => (\n  <svg\n    width={icon ? 28 : 90}\n    height={icon ? 36 : 120}\n    fill=\"none\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{\n      opacity: selected ? '80' : 'ff',\n      fillOpacity: selected ? '80' : 'ff',\n    }}\n  >\n  </svg>\n);\n\nconst JKFlipFlopWidget = props => {\n  const { model } = props;\n  const {\n    options: { selected },\n  } = model;\n\n  return (\n    <Wrapper selected={selected}>\n      <Shape/>\n      <PositionedChevron selected={selected} />\n      {PORTS.map(port => (\n        <PositionedPort\n          key={port}\n          name={port}\n          position={model.getPositionForPort(port)}\n          side={model.getSideForPort(port)}\n        />\n      ))}\n      {PORTS.map(port => (\n        <PositionedLabel\n          key={`${port}Label`}\n          position={model.getPositionForPort(port)}\n          side={model.getSideForPortLabel(port)}\n          label={model.getLabelForPort(port)}\n          offset={model.getPortLabelOffset(port)}\n          complemented={model.isPortComplemented(port)}\n        >\n         {model.getLabelForPort(port)}\n        </PositionedLabel>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default JKFlipFlopWidget;\n","import React from 'react';\n\nimport { Wrapper, Shape, PositionedChevron } from './JKFlipFlopWidget';\n\nimport styled from 'styled-components';\n\nconst PositionedLabel = styled.div`\n  position: absolute;\n  top: ${props => props.position}px;\n  ${props => `${props.side}: 1px;`}\n  font-size: 0.75em;\n  transform: translateY(-50%);\n  text-decoration: ${props => props.complemented ? 'overline' : 'none'};\n`;\n\nconst JKFlipFlopIcon = () => (\n  <Wrapper icon>\n    <Shape icon/>\n    <PositionedChevron icon/>\n    <PositionedLabel\n      position=\"6\"\n      side=\"left\"\n      complemented={false}\n    >\n      J\n    </PositionedLabel>\n    <PositionedLabel\n      position=\"26\"\n      side=\"left\"\n      complemented={false}\n    >\n      K\n    </PositionedLabel>\n    <PositionedLabel\n      position=\"6\"\n      side=\"right\"\n      complemented={false}\n    >\n      Q\n    </PositionedLabel>\n    <PositionedLabel\n      position=\"26\"\n      side=\"right\"\n      complemented={true}\n    >\n      Q\n    </PositionedLabel>\n  </Wrapper>\n);\n\nexport default JKFlipFlopIcon;\n","import { Component } from '@logossim/core';\n\nimport icon from './JKFlipFlopIcon';\nimport model from './JKFlipFlopModel';\nimport widget from './JKFlipFlopWidget';\n\nexport default new Component({\n  type: 'JKFlipFlop',\n  name: 'JK Flip-Flop',\n  description: 'JK Flip-Flop',\n  group: 'Flip-flops',\n  configurations: [\n    {\n      name: 'TRIGGER_ON',\n      type: 'select',\n      default: 'rising',\n      label: 'Trigger on',\n      options: [\n        {\n          label: 'Rising edge',\n          value: 'rising',\n        },\n        {\n          label: 'Falling edge',\n          value: 'falling',\n        },\n      ],\n    },\n  ],\n  model,\n  widget,\n  icon,\n});\n\n","import { BaseModel } from '@logossim/core';\n\nexport default class JKFlipFlopModel extends BaseModel {\n  initialize(configurations) {\n    const DATA_BITS = Number(configurations.DATA_BITS);\n\n    this.triggerOnRising = configurations.TRIGGER_ON === 'rising';\n\n    this.addInputPort('J', { bits: 1, orientation: 2, offset: 0, length: 25 });\n    this.addInputPort('Clock', { bits: 1, orientation: 2, offset: 0, length: 25, complemented: configurations.TRIGGER_ON == 'falling' });\n    this.addInputPort('K', { bits: 1, orientation: 2, offset: 0, length: 25 });\n    this.addInputPort('Clear', { bits: 1, floating: 1, orientation: 2, offset: 0, length: 25, complemented: true });\n    this.addOutputPort('Q', { bits: 1, value: 0, orientation: 0, offset: 0, length: 25 });\n    this.addOutputPort('Qbar', { bits: 1, orientation: 0, offset: 0, length: 25, complemented: true  });\n  }\n\n  getPortInfo(port) {\n    const PORT_INFO = {\n      J: {\n        side: 'right',\n        position: 1,\n        label: 'J',\n        labelSide: 'left',\n        labelOffset: 0,\n        complemented: false,\n      },\n      Clock: {\n        side: 'right',\n        position: 2,\n        label: 'CLK',\n        labelSide: 'left',\n        labelOffset: 10,\n        complemented: !this.triggerOnRising,\n      },\n      K: {\n        side: 'right',\n        position: 3,\n        label: 'K',\n        labelSide: 'left',\n        labelOffset: 0,\n        complemented: false,\n      },\n      Clear: {\n        side: 'right',\n        position: 4,\n        label: 'CLR',\n        labelSide: 'left',\n        labelOffset: 0,\n        complemented: true,\n      },\n      Q: {\n        side: 'left',\n        position: 1,\n        label: 'Q',\n        labelSide: 'right',\n        labelOffset: 0,\n        complemented: false,\n      },\n      Qbar: {\n        side: 'left',\n        position: 3,\n        label: 'Q',\n        labelSide: 'right',\n        labelOffset: 0,\n        complemented: true,\n      },\n    }\n\n    return PORT_INFO[port];\n  }\n\n  getPositionForPort(port) {\n    return 8 + 30 * (this.getPortInfo(port).position - 1);\n  }\n\n  getSideForPort(port) {\n    return this.getPortInfo(port).side;\n  }\n\n  getLabelForPort(port) {\n    return this.getPortInfo(port).label;\n  }\n\n  getSideForPortLabel(port) {\n    return this.getPortInfo(port).labelSide;\n  }\n\n  getPortLabelOffset(port) {\n    return this.getPortInfo(port).labelOffset;\n  }\n\n  isPortComplemented(port) {\n    return this.getPortInfo(port).complemented;\n  }\n\n  isRisingEdge(meta) {\n    if (this.triggerOnRising) return meta.Clock.risingEdge;\n    return meta.Clock.fallingEdge;\n  }\n\n  step(input, meta) {\n    if (this.ports['output'].some(port => (typeof port.value[0] != 'number'))) {\n      const initialValues = { Q: 0, Qbar: 1 };\n      this.ports['output'] = this.ports['output'].map(port => {\n        return {\n          ...port,\n          value: [initialValues[port.name]]\n        }\n      });\n      this.emit({ Q: 0, Qbar: 1 })\n    }\n    const Q = this.getPort('Q').getValue();\n    const Qbar = this.getPort('Qbar').getValue();\n    if (!input.Clear) {\n      return {\n        Q: 0,\n        Qbar: 1,\n      }\n    }\n    const newQ = this.isRisingEdge(meta) ? (~input.K & Q) | (input.J & ~Q) : Q;\n    return {\n      Q: newQ,\n      Qbar: ~newQ,\n    };\n  }\n}\n","import And from './And/AndRegister';\nimport Buffer from './Buffer/BufferRegister';\nimport Button from './Button/ButtonRegister';\nimport Buzzer from './Buzzer/BuzzerRegister';\nimport Clock from './Clock/ClockRegister';\nimport ControlledBuffer from './ControlledBuffer/ControlledBufferRegister';\nimport ControlledInverter from './ControlledInverter/ControlledInverterRegister';\nimport Counter from './Counter/CounterRegister';\nimport Demux from './Demux/DemuxRegister';\nimport Ground from './Ground/GroundRegister';\nimport Input from './Input/InputRegister';\nimport Joiner from './Joiner/JoinerRegister';\nimport Led from './Led/LedRegister';\nimport Mux from './Mux/MuxRegister';\nimport Nand from './Nand/NandRegister';\nimport Nor from './Nor/NorRegister';\nimport Not from './Not/NotRegister';\nimport Or from './Or/OrRegister';\nimport Output from './Output/OutputRegister';\nimport Power from './Power/PowerRegister';\nimport Ram from './Ram/RamRegister';\nimport Rom from './Rom/RomRegister';\nimport Splitter from './Splitter/SplitterRegister';\nimport Ssd from './Ssd/SsdRegister';\nimport Switch from './Switch/SwitchRegister';\nimport Xnor from './Xnor/XnorRegister';\nimport Xor from './Xor/XorRegister';\nimport JKFlipFlop from './JKFlipFlop/JKFlipFlopRegister'\n\nconst components = [\n  Input,\n  Output,\n  Button,\n  Switch,\n  Clock,\n  Led,\n  Ssd,\n  Buzzer,\n  And,\n  Nand,\n  Or,\n  Nor,\n  Xor,\n  Xnor,\n  Buffer,\n  Not,\n  ControlledBuffer,\n  ControlledInverter,\n  Splitter,\n  Joiner,\n  Power,\n  Ground,\n  Mux,\n  Demux,\n  Ram,\n  Rom,\n  Counter,\n  JKFlipFlop,\n];\n\nexport default components;\n\nexport const groupedComponents = components.reduce(\n  (acc, component) => {\n    const group = acc.find(g => g.name === component.group);\n\n    if (group) group.components.push(component);\n    else acc.push({ name: component.group, components: [component] });\n\n    return acc;\n  },\n  [],\n);\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n\n  z-index: 2;\n`;\n\nconst Button = styled.button.attrs(({ ...props }) => ({\n  ...props,\n  type: 'button',\n}))`\n  border: none;\n  border-radius: 100%;\n\n  background: orange;\n  box-shadow: inset 0 0 10px #ff8d00;\n\n  width: 60px;\n  height: 60px;\n  margin: 16px;\n\n  font-size: 2em;\n  line-height: 1em;\n  color: white;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n    box-shadow: inset 0 0 10px black;\n  }\n`;\n\nconst ComponentSelectButton = ({ handleClick, disabled }) => (\n  <Container id=\"component-select-button\">\n    <Button\n      onClick={handleClick}\n      disabled={disabled}\n      data-for=\"tooltip\"\n      data-tip=\"Add component...\"\n      data-place=\"left\"\n    >\n      +\n    </Button>\n  </Container>\n);\n\nexport default ComponentSelectButton;\n","import React from 'react';\n\nconst ArrowLeft = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    fill={color}\n    viewBox=\"100 100 300 300\"\n  >\n    <polygon points=\"352,128.4 319.7,96 160,256 160,256 160,256 319.7,416 352,383.6 224.7,256 \" />\n  </svg>\n);\n\nexport default ArrowLeft;\n","import React from 'react';\n\nconst Chevron = ({ size = 16, color = 'gray' }) => (\n  <svg width={size} height={size} fill={color} viewBox=\"0 0 48 48\">\n    <polygon points=\"5,30.9 8.1,34 24,18.1 39.9,34 43,30.9 24,12\" />\n  </svg>\n);\n\nexport default Chevron;\n","import React from 'react';\n\nconst Chevrons = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <polyline points=\"17 11 12 6 7 11\" />\n    <polyline points=\"17 18 12 13 7 18\" />\n  </svg>\n);\n\nexport default Chevrons;\n","import React from 'react';\n\nconst Close = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    fill={color}\n    viewBox=\"0 0 60.963 60.842\"\n  >\n    <path d=\"M59.595,52.861L37.094,30.359L59.473,7.98c1.825-1.826,1.825-4.786,0-6.611  c-1.826-1.825-4.785-1.825-6.611,0L30.483,23.748L8.105,1.369c-1.826-1.825-4.785-1.825-6.611,0c-1.826,1.826-1.826,4.786,0,6.611  l22.378,22.379L1.369,52.861c-1.826,1.826-1.826,4.785,0,6.611c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  l22.502-22.502l22.501,22.502c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  C61.42,57.647,61.42,54.687,59.595,52.861z\" />\n  </svg>\n);\n\nexport default Close;\n","import React from 'react';\n\nconst Copy = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\" />\n    <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\" />\n  </svg>\n);\n\nexport default Copy;\n","import React from 'react';\n\nconst Cut = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <circle cx=\"6\" cy=\"6\" r=\"3\" />\n    <circle cx=\"6\" cy=\"18\" r=\"3\" />\n    <line x1=\"20\" y1=\"4\" x2=\"8.12\" y2=\"15.88\" />\n    <line x1=\"14.47\" y1=\"14.48\" x2=\"20\" y2=\"20\" />\n    <line x1=\"8.12\" y1=\"8.12\" x2=\"12\" y2=\"12\" />\n  </svg>\n);\n\nexport default Cut;\n","import React from 'react';\n\nconst Delete = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <polyline points=\"3 6 5 6 21 6\" />\n    <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n    <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" />\n    <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" />\n  </svg>\n);\n\nexport default Delete;\n","import React from 'react';\n\nconst Duplicate = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={(size * 18) / 24}\n    viewBox=\"0 0 24 18\"\n    fill=\"none\"\n    stroke=\"none\"\n    strokeWidth=\"2\"\n  >\n    <g transform=\"translate(-678.000000, -2727.000000)\">\n      <g transform=\"translate(100.000000, 2626.000000)\">\n        <g transform=\"translate(578.000000, 98.000000)\">\n          <g transform=\"translate(0.000000, 0.000000)\">\n            <polygon points=\"0 0 24 0 24 24 0 24\" />\n            <path\n              d=\"M15,8 C14.45,8 14,8.45 14,9 L14,11 L12,11 C11.45,11 11,11.45 11,12 C11,12.55 11.45,13 12,13 L14,13 L14,15 C14,15.55 14.45,16 15,16 C15.55,16 16,15.55 16,15 L16,13 L18,13 C18.55,13 19,12.55 19,12 C19,11.45 18.55,11 18,11 L16,11 L16,9 C16,8.45 15.55,8 15,8 Z M2,12 C2,9.42 3.4,7.17 5.48,5.96 C5.8,5.77 6.01,5.45 6.01,5.08 C6.01,4.31 5.17,3.83 4.5,4.22 C1.82,5.78 0,8.68 0,12 C0,15.32 1.82,18.22 4.5,19.78 C5.17,20.17 6.01,19.69 6.01,18.92 C6.01,18.55 5.8,18.23 5.48,18.04 C3.4,16.83 2,14.58 2,12 Z M15,3 C10.04,3 6,7.04 6,12 C6,16.96 10.04,21 15,21 C19.96,21 24,16.96 24,12 C24,7.04 19.96,3 15,3 Z M15,19 C11.14,19 8,15.86 8,12 C8,8.14 11.14,5 15,5 C18.86,5 22,8.14 22,12 C22,15.86 18.86,19 15,19 Z\"\n              fill={color}\n            />\n          </g>\n        </g>\n      </g>\n    </g>\n  </svg>\n);\n\nexport default Duplicate;\n","import React from 'react';\n\nconst Edit = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n    <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n  </svg>\n);\n\nexport default Edit;\n","import React from 'react';\n\nconst Paste = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    fill={color}\n    viewBox=\"0 0 512.001 512.001\"\n  >\n    <g>\n      <g>\n        <g>\n          <path\n            d=\"M481,371c11.046,0,20-8.954,20-20v-92c0-33.084-26.916-60-60-60h-39v-79c0-44.112-35.888-80-80-80h-47.533\n\t\t\t\tc-7.739-23.749-29.864-40-55.16-40h-25.614c-25.296,0-47.421,16.251-55.16,40H91c-44.112,0-80,35.888-80,80v312\n\t\t\t\tc0,44.112,35.888,80,80,80h88c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H91c-22.056,0-40-17.944-40-40V120\n\t\t\t\tc0-22.056,17.944-40,40-40h2v59c0,11.046,8.954,20,20,20h189c11.046,0,20-8.954,20-20V80c22.056,0,40,17.944,40,40v79h-65.007\n\t\t\t\tC263.914,199,237,225.913,237,258.993v193.015c0,33.08,26.916,59.993,60.01,59.993L441,511.926c33.084,0,60-26.913,60-59.992\n\t\t\t\tc0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20c0,11.024-8.972,19.992-20.01,19.992L297,472c-11.028,0-20-8.969-20-19.993\n\t\t\t\tV258.993c0-11.024,8.969-19.993,19.993-19.993H441c11.028,0,20,8.972,20,20v92C461,362.046,469.955,371,481,371z M282,119H133V80\n\t\t\t\th21c9.177,0,17.177-6.246,19.403-15.149l2.798-11.194C178.211,45.616,185.404,40,193.693,40h25.614\n\t\t\t\tc8.289,0,15.481,5.616,17.492,13.657l2.798,11.194C241.823,73.754,249.823,80,259,80h23V119z\"\n          />\n          <path\n            d=\"M401,279h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20\n\t\t\t\tC421,287.954,412.047,279,401,279z\"\n          />\n          <path\n            d=\"M401,349h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20\n\t\t\t\tC421,357.954,412.047,349,401,349z\"\n          />\n        </g>\n      </g>\n    </g>\n  </svg>\n);\n\nexport default Paste;\n","import React from 'react';\n\nconst Pause = ({ size = 16, color = '#ffb100' }) => (\n  <svg width={size} height={size} fill={color} viewBox=\"0 0 512 512\">\n    <path d=\"M395,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,395,512Z\" />\n    <path d=\"M117,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,117,512Z\" />\n  </svg>\n);\n\nexport default Pause;\n","import React from 'react';\n\nconst Play = ({ size = 16, color = '#008000' }) => (\n  <svg width={size} height={size} fill={color} viewBox=\"0 0 512 512\">\n    <path d=\"M60.54,512c-17.06,0-30.43-13.86-30.43-31.56V31.55C30.12,13.86,43.48,0,60.55,0A32.94,32.94,0,0,1,77,4.52L465.7,229c10.13,5.85,16.18,16,16.18,27s-6,21.2-16.18,27L77,507.48A32.92,32.92,0,0,1,60.55,512Z\" />\n  </svg>\n);\n\nexport default Play;\n","import React from 'react';\n\nconst Redo = ({ size = 16, color = 'gray' }) => (\n  <svg width={size} height={size} viewBox=\"0 0 512 512\" fill={color}>\n    <path d=\"m431 481c0 11.046-8.954 20-20 20h-66c-11.046 0-20-8.954-20-20s8.954-20 20-20h66c11.046 0 20 8.954 20 20zm63.358-352.994-112.284-111.215c-7.848-7.773-20.511-7.713-28.284.135s-7.712 20.511.135 28.284l106.808 105.79h-285.733c-96.495 0-175 78.505-175 175s78.505 175 175 175h69c11.046 0 20-8.954 20-20s-8.954-20-20-20h-69c-74.439 0-135-60.561-135-135s60.561-135 135-135h284.836l-105.037 105.917c-7.778 7.843-7.725 20.506.118 28.284 3.9 3.868 8.992 5.799 14.083 5.799 5.146 0 10.292-1.975 14.202-5.917l111.225-112.157c11.332-11.332 17.573-26.4 17.573-42.426s-6.241-31.094-17.642-42.494z\" />\n  </svg>\n);\n\nexport default Redo;\n","import React from 'react';\n\nconst Settings = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"3\" />\n    <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n  </svg>\n);\n\nexport default Settings;\n","import React from 'react';\n\nconst Stop = ({ size = 16, color = '#c53838' }) => (\n  <svg width={size} height={size} fill={color} viewBox=\"0 0 512 512\">\n    <path d=\"M 65.249771,0 A 65.248738,65.376306 0 0 0 0.413662,58.057582 h -0.18732 v 1.884685 A 65.248738,65.376306 0 0 0 0,65.377342 65.248738,65.376306 0 0 0 0.226342,70.796781 V 441.18757 A 65.248738,65.376306 0 0 0 0,446.62268 a 65.248738,65.376306 0 0 0 0.226342,5.41161 v 2.88566 H 0.530738 A 65.248738,65.376306 0 0 0 65.249771,512 a 65.248738,65.376306 0 0 0 2.44297,-0.0468 H 444.31507 a 65.248738,65.376306 0 0 0 2.43514,0.0468 65.248738,65.376306 0 0 0 2.44297,-0.0468 h 0.56977 v -0.024 a 65.248738,65.376306 0 0 0 61.70628,-57.00966 h 0.0312 v -0.22662 a 65.248738,65.376306 0 0 0 0.49952,-8.07049 65.248738,65.376306 0 0 0 -0.49952,-8.01579 V 67.011775 a 65.248738,65.376306 0 0 0 0.0234,-1.634433 65.248738,65.376306 0 0 0 -0.0234,-1.681351 v -5.638409 h -0.38247 A 65.248738,65.376306 0 0 0 456.2645,0.77420532 V 0 H 446.40678 446.2741 65.374651 Z\" />\n  </svg>\n);\n\nexport default Stop;\n","import React from 'react';\n\nconst Undo = ({ size = 16, color = 'gray' }) => (\n  <svg width={size} height={size} viewBox=\"0 0 512 512\" fill={color}>\n    <path d=\"m 81,481 c 0,11.046 8.954,20 20,20 h 66 c 11.046,0 20,-8.954 20,-20 0,-11.046 -8.954,-20 -20,-20 h -66 c -11.046,0 -20,8.954 -20,20 z M 17.642,128.006 129.926,16.791 c 7.848,-7.773 20.511,-7.713 28.284,0.135 7.773,7.848 7.712,20.511 -0.135,28.284 L 51.267,151 H 337 c 96.495,0 175,78.505 175,175 0,96.495 -78.505,175 -175,175 h -69 c -11.046,0 -20,-8.954 -20,-20 0,-11.046 8.954,-20 20,-20 h 69 c 74.439,0 135,-60.561 135,-135 0,-74.439 -60.561,-135 -135,-135 H 52.164 l 105.037,105.917 c 7.778,7.843 7.725,20.506 -0.118,28.284 -3.9,3.868 -8.992,5.799 -14.083,5.799 -5.146,0 -10.292,-1.975 -14.202,-5.917 L 17.573,212.926 C 6.241,201.594 0,186.526 0,170.5 0,154.474 6.241,139.406 17.642,128.006 Z\" />\n  </svg>\n);\n\nexport default Undo;\n","import React from 'react';\n\nconst ZoomIn = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <circle cx=\"11\" cy=\"11\" r=\"8\" />\n    <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n    <line x1=\"11\" y1=\"8\" x2=\"11\" y2=\"14\" />\n    <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\" />\n  </svg>\n);\n\nexport default ZoomIn;\n","import React from 'react';\n\nconst ZoomOut = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke={color}\n    strokeWidth=\"2\"\n  >\n    <circle cx=\"11\" cy=\"11\" r=\"8\" />\n    <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n    <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\" />\n  </svg>\n);\n\nexport default ZoomOut;\n","import React from 'react';\n\nconst RotateLeft = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    fill={color}\n    viewBox=\"0 0 512 512\"\n  >\n    <path\n      d=\"M 437.02,75.112 C 388.667,26.76 324.38,0.133 256,0.133 214.782,0.133 173.811,10.166 137.515,29.149 116.586,40.094 97.191,54.029 80,70.302 V 0.133 H 40 v 140 h 140 v -40 h -73.338 c 39.887,-38.075 93.411,-60 149.338,-60 119.102,0 216,96.896 216,215.999 -10e-4,6.632 -0.304,13.317 -0.901,19.87 l 39.836,3.628 c 0.706,-7.753 1.064,-15.658 1.065,-23.495 l -20,-0.002 h 20 C 512,187.752 485.371,123.466 437.02,75.112 Z\"\n      id=\"path2\" /><polygon\n      points=\"512,256.132 512,256.133 \"\n      id=\"polygon4\" />\n    <path\n      d=\"m 87.724,391.566 -31.145,25.101 c 9.048,11.226 19.114,21.762 29.92,31.315 l 26.494,-29.967 c -9.126,-8.069 -17.628,-16.966 -25.269,-26.449 z\"\n      id=\"path12\" />\n    <path\n      d=\"m 52.219,327.943 -37.727,13.296 c 4.794,13.601 10.796,26.896 17.842,39.517 L 67.26,361.259 C 61.319,350.617 56.259,339.407 52.219,327.943 Z\"\n      id=\"path18\" />\n    <path\n      d=\"M 40,256.133 H 0 c 0,14.47 1.22,28.986 3.624,43.145 L 43.06,292.58 C 41.029,280.627 40,268.365 40,256.133 Z\"\n      id=\"path24\" />\n    <path\n      d=\"m 142.33,439.841 -21.082,33.993 c 12.271,7.611 25.265,14.215 38.618,19.629 l 15.029,-37.069 C 163.637,451.831 152.68,446.26 142.33,439.841 Z\"\n      id=\"path30\" />\n    <path\n      d=\"m 464.717,311.981 c -3.137,11.748 -7.307,23.311 -12.395,34.365 l 36.335,16.727 c 6.037,-13.115 10.985,-26.835 14.706,-40.777 z\"\n      id=\"path36\" />\n    <path\n      d=\"m 383.554,430.468 c -9.833,7.208 -20.335,13.616 -31.213,19.047 l 17.867,35.788 c 12.896,-6.438 25.342,-14.033 36.994,-22.574 z\"\n      id=\"path42\" />\n    <path\n      d=\"m 434.282,378.123 c -6.883,10.035 -14.672,19.56 -23.152,28.311 l 28.725,27.837 c 10.041,-10.361 19.265,-21.642 27.415,-33.527 z\"\n      id=\"path48\" />\n    <path\n      d=\"m 318.37,462.995 c -11.632,3.503 -23.662,6.03 -35.756,7.515 l 4.873,39.702 c 14.343,-1.761 28.612,-4.76 42.412,-8.914 z\"\n      id=\"path54\" />\n    <path\n      d=\"m 209.794,467.185 -8.514,39.083 c 14.054,3.062 28.505,4.946 42.953,5.6 l 1.809,-39.959 c -12.198,-0.552 -24.394,-2.143 -36.248,-4.724 z\"\n      id=\"path60\" />\n  </svg>\n);\n\nexport default RotateLeft;\n","import React from 'react';\n\nconst RotateRight = ({ size = 16, color = 'gray' }) => (\n  <svg\n    width={size}\n    height={size}\n    fill={color}\n    viewBox=\"0 0 512 512\"\n  >\n    <path\n      d=\"M 74.98,75.112 C 123.333,26.76 187.62,0.133 256,0.133 c 41.218,0 82.189,10.033 118.485,29.016 20.929,10.945 40.324,24.88 57.515,41.153 V 0.133 h 40 v 140 H 332 v -40 h 73.338 c -39.887,-38.075 -93.411,-60 -149.338,-60 -119.102,0 -216,96.896 -216,215.999 10e-4,6.632 0.304,13.317 0.901,19.87 L 1.065,279.63 C 0.359,271.877 10e-4,263.972 0,256.135 l 20,-0.002 H 0 C 0,187.752 26.629,123.466 74.98,75.112 Z\"\n      id=\"path2\" /><polygon\n      points=\"512,256.133 512,256.132 \"\n      id=\"polygon4\"\n      transform=\"matrix(-1,0,0,1,512,0)\" />\n    <path\n      d=\"m 424.276,391.566 31.145,25.101 c -9.048,11.226 -19.114,21.762 -29.92,31.315 l -26.494,-29.967 c 9.126,-8.069 17.628,-16.966 25.269,-26.449 z\"\n      id=\"path12\" />\n    <path\n      d=\"m 459.781,327.943 37.727,13.296 c -4.794,13.601 -10.796,26.896 -17.842,39.517 L 444.74,361.259 c 5.941,-10.642 11.001,-21.852 15.041,-33.316 z\"\n      id=\"path18\" />\n    <path\n      d=\"m 472,256.133 h 40 c 0,14.47 -1.22,28.986 -3.624,43.145 L 468.94,292.58 c 2.031,-11.953 3.06,-24.215 3.06,-36.447 z\"\n      id=\"path24\" />\n    <path\n      d=\"m 369.67,439.841 21.082,33.993 c -12.271,7.611 -25.265,14.215 -38.618,19.629 l -15.029,-37.069 c 11.258,-4.563 22.215,-10.134 32.565,-16.553 z\"\n      id=\"path30\" />\n    <path\n      d=\"m 47.283,311.981 c 3.137,11.748 7.307,23.311 12.395,34.365 L 23.343,363.073 C 17.306,349.958 12.358,336.238 8.637,322.296 Z\"\n      id=\"path36\" />\n    <path\n      d=\"m 128.446,430.468 c 9.833,7.208 20.335,13.616 31.213,19.047 l -17.867,35.788 C 128.896,478.865 116.45,471.27 104.798,462.729 Z\"\n      id=\"path42\" />\n    <path\n      d=\"m 77.718,378.123 c 6.883,10.035 14.672,19.56 23.152,28.311 L 72.145,434.271 C 62.104,423.91 52.88,412.629 44.73,400.744 Z\"\n      id=\"path48\" />\n    <path\n      d=\"m 193.63,462.995 c 11.632,3.503 23.662,6.03 35.756,7.515 l -4.873,39.702 c -14.343,-1.761 -28.612,-4.76 -42.412,-8.914 z\"\n      id=\"path54\" />\n    <path\n      d=\"m 302.206,467.185 8.514,39.083 c -14.054,3.062 -28.505,4.946 -42.953,5.6 l -1.809,-39.959 c 12.198,-0.552 24.394,-2.143 36.248,-4.724 z\"\n      id=\"path60\" />\n  </svg>\n);\n\nexport default RotateRight;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Play, Pause, Stop } from '../Icons';\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 16px;\n  left: 50%;\n  transform: translate(-50%, 0);\n\n  background: rgb(224, 224, 224);\n  background: linear-gradient(\n    0deg,\n    rgba(224, 224, 224, 1) 0%,\n    rgba(255, 255, 255, 1) 100%\n  );\n\n  border: 1px solid gray;\n  border-radius: 16px;\n\n  z-index: 2;\n\n  & > button {\n    border-right: 1px solid gray;\n    &:last-child {\n      border-right: none;\n    }\n  }\n`;\n\nconst Button = styled.button.attrs(({ ...props }) => ({\n  ...props,\n  type: 'button',\n}))`\n  background: none;\n  border: none;\n\n  font-size: 1.2em;\n\n  min-width: 75px;\n  min-height: 60px;\n\n  &:disabled {\n    & > svg {\n      fill: #bfbfbf;\n    }\n  }\n`;\n\nconst SimulationControlButtons = ({\n  state,\n  handleClickStart,\n  handleClickPause,\n  handleClickStop,\n}) => (\n  <Container id=\"simulation-control-buttons\">\n    <Button\n      onClick={handleClickStart}\n      disabled={state === 'started'}\n      data-for=\"tooltip\"\n      data-tip=\"Start simulation\"\n    >\n      <Play />\n    </Button>\n    <Button\n      onClick={handleClickPause}\n      disabled={state === 'paused' || state === 'stopped'}\n      data-for=\"tooltip\"\n      data-tip=\"Pause simulation\"\n    >\n      <Pause />\n    </Button>\n    <Button\n      onClick={handleClickStop}\n      disabled={state === 'stopped'}\n      data-for=\"tooltip\"\n      data-tip=\"Stop simulation\"\n    >\n      <Stop />\n    </Button>\n  </Container>\n);\n\nexport default SimulationControlButtons;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Overlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  z-index: 3;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 100vw;\n  height: 100vh;\n\n  background: rgba(0, 0, 0, 0.75);\n`;\n\nconst Window = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  width: 60vw;\n  height: 80vh;\n\n  max-width: 600px;\n  max-height: 800px;\n\n  background: white;\n\n  border: 1px solid black;\n  border-radius: 25px;\n\n  padding: 16px;\n\n  z-index: 4;\n`;\n\nconst Modal = ({ children }) => (\n  <Overlay>\n    <Window>{children}</Window>\n  </Overlay>\n);\n\nexport default Modal;\n","import styled from 'styled-components';\n\nexport const Header = styled.div`\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-content: space-between;\n\n  height: 50px;\n`;\n\nexport const Title = styled.h1`\n  flex-grow: 1;\n  font-size: 1.5em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n`;\n\nexport const Subtitle = styled.h2`\n  flex-grow: 1;\n  font-size: 1.2em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n`;\n\nexport const Content = styled.div`\n  margin-top: 32px;\n  flex: 1;\n`;\n\nexport const IconButton = styled.button`\n  position: absolute;\n\n  flex-shrink: 0;\n\n  border: 1px solid gray;\n  border-radius: 25px;\n  width: 50px;\n  height: 50px;\n\n  ${props => {\n    if (props.left) return 'left: 0;';\n    return 'right: 0;';\n  }}\n\n  background: none;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.05);\n    cursor: pointer;\n  }\n`;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 16px;\n\n  label {\n    font-size: 0.8em;\n    font-weight: bold;\n    text-transform: uppercase;\n    color: ${props => (props.error ? '#710606' : 'inherit')};\n\n    background: #eee;\n    border: 1px solid ${props => (props.error ? '#c80a0a' : 'gray')};\n    border-radius: 8px;\n\n    position: relative;\n    top: 0.8em;\n\n    width: max-content;\n    margin-left: 15px;\n    padding: 0 8px;\n  }\n\n  select,\n  input {\n    background: white;\n    border: 1px solid ${props => (props.error ? '#c80a0a' : 'gray')};\n    border-radius: 25px;\n\n    font-size: 1.2em;\n\n    padding: 10px 0 5px 16px;\n  }\n\n  input[type='file'] {\n    font-size: 1em;\n    margin-top: 2px;\n  }\n`;\n\nconst Input = ({\n  // Formik\n  form,\n  field,\n  // General\n  name,\n  label,\n  componentType,\n  type,\n  innerRef,\n  // Select\n  options = [],\n  // Number\n  step,\n  min,\n  max,\n}) => {\n  const handleBinaryLoad = event => {\n    const {\n      target: { files },\n    } = event;\n\n    if (files.length !== 1) return;\n\n    const handleError = () =>\n      this.showSnackbar(\n        `Error loading binary file:\\n${files[0].name}`,\n      );\n\n    const fr = new FileReader();\n    fr.onerror = handleError;\n    fr.onload = e => {\n      try {\n        const file = e.target.result;\n        form.setFieldValue(field.name, file);\n      } catch (exception) {\n        handleError();\n      }\n    };\n    fr.readAsText(files.item(0));\n  };\n\n  switch (type) {\n    case 'select':\n      return (\n        <>\n          <label htmlFor={name}>{label}</label>\n          <select id={name} ref={innerRef} {...field}>\n            {options.map(option => (\n              <option value={option.value} key={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </>\n      );\n    case 'number':\n      return (\n        <>\n          <label htmlFor={name}>{label}</label>\n          <input\n            id={name}\n            ref={innerRef}\n            {...field}\n            step={step}\n            min={min}\n            max={max}\n            type=\"number\"\n          />\n        </>\n      );\n    case 'text':\n      return (\n        <>\n          <label htmlFor={name}>{label}</label>\n          <input id={name} ref={innerRef} {...field} type=\"text\" />\n        </>\n      );\n    case 'binary':\n      return (\n        <>\n          <label htmlFor={name}>{label}</label>\n          <input\n            id={name}\n            accept=\".lgbin\"\n            type=\"file\"\n            onChange={handleBinaryLoad}\n          />\n        </>\n      );\n    case 'hidden':\n      return (\n        <>\n        </>\n      );\n    default:\n      throw new Error(\n        `[logossim] Invalid configuration type for ${componentType}: ${type}`,\n      );\n  }\n};\n\nconst ErrorMessage = styled.div`\n  font-size: 0.8em;\n  color: #c80a0a;\n\n  background: white;\n\n  position: relative;\n  bottom: 0.7em;\n\n  width: max-content;\n  padding: 0 8px;\n  margin: -15px auto auto auto;\n  transform: translateY(15px);\n`;\n\nconst ComponentConfigurationInput = props => {\n  const {\n    field: { name },\n    form: { errors },\n  } = props;\n\n  const error = errors[name];\n\n  return (\n    <Container error={error}>\n      <Input {...props} />\n      {error && <ErrorMessage>{error}</ErrorMessage>}\n    </Container>\n  );\n};\n\nexport default ComponentConfigurationInput;\n","import React from 'react';\nimport Tooltip from 'react-tooltip';\n\nimport ComponentContext from '@logossim/core/ComponentContext';\nimport DiagramContext from '@logossim/core/Diagram/DiagramContext';\n\nimport styled from 'styled-components';\n\nconst diagramEngineStub = {\n  getEngine: () => ({\n    registerListener: () => {},\n    getCanvas: () => {},\n    getPortCoords: () => ({\n      getWidth: () => {},\n      getHeight: () => {},\n      getTopLeft: () => {},\n    }),\n    getModel: () => ({ isLocked: () => false }),\n  }),\n};\n\nconst getTooltip = (error, disabled) => {\n  if (disabled) return '';\n  if (error) return 'Check form errors';\n  return 'Drag me!';\n};\n\nconst ErrorWidget = styled.div`\n  border: 1px dashed var(--value-error);\n  border-radius: 5px;\n  width: 30px;\n  height: 30px;\n`;\n\nconst DraggableComponent = ({\n  component: { type, Widget, Model },\n  configurations,\n  handleClose,\n  error,\n  disabled,\n}) => {\n  const model = new Model(configurations, type);\n\n  return (\n    <div\n      draggable={!error && !disabled}\n      onDragStart={event => {\n        event.dataTransfer.setDragImage(\n          event.currentTarget.children[0],\n          0,\n          0,\n        );\n\n        event.dataTransfer.setData(\n          'component',\n          JSON.stringify({\n            type,\n            configurations,\n          }),\n        );\n\n        requestAnimationFrame(() => {\n          Tooltip.hide();\n          handleClose();\n        });\n      }}\n      data-for=\"tooltip\"\n      data-tip={getTooltip(error, disabled)}\n      data-place=\"bottom\"\n    >\n      {error ? (\n        <ErrorWidget />\n      ) : (\n        <DiagramContext.Provider value={diagramEngineStub}>\n          <ComponentContext.Provider value={model}>\n            <Widget model={model} />\n          </ComponentContext.Provider>\n        </DiagramContext.Provider>\n      )}\n    </div>\n  );\n};\n\nexport default DraggableComponent;\n","import React, { useEffect, useRef } from 'react';\nimport Tooltip from 'react-tooltip';\n\nimport { Formik, Form as BaseForm, Field } from 'formik';\nimport styled from 'styled-components';\n\nimport { ArrowLeft, Close } from '../Icons';\nimport {\n  Header,\n  Title,\n  Content,\n  IconButton,\n} from '../Modal/ModalContentLayout';\nimport ComponentConfigurationInput from './ComponentConfigurationInput';\nimport DraggableComponent from './DraggableComponent';\n\nconst DragArea = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 200px;\n  margin-bottom: 32px;\n\n  box-shadow: ${props =>\n    `inset 0 0 20px rgba(${props.error ? 255 : 0}, 0, 0, 0.3)`};\n\n  background-image: ${props => `linear-gradient(\n      to right,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.05) 30px,\n      transparent 31px\n    ),\n    linear-gradient(\n      to bottom,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(${props.error ? 255 : 0}, 0, 0, 0.05) 30px,\n      transparent 31px\n    )`};\n  background-size: 45px 45px;\n  border-radius: 25px;\n\n  overflow: hidden;\n`;\n\nconst FormScroll = styled.div`\n  max-height: calc(min(800px, 80vh) - 400px);\n  overflow-y: auto;\n`;\n\nconst Form = styled(BaseForm)`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  margin-top: auto;\n`;\n\nconst Hint = styled.span`\n  font-size: 0.8em;\n  font-style: italic;\n  align-self: center;\n  text-align: right;\n  margin-right: 10px;\n`;\n\nconst SubmitButton = styled.button.attrs(({ ...props }) => ({\n  ...props,\n  type: 'submit',\n}))`\n  border: none;\n  border-radius: 5px;\n  background: #07d26b;\n\n  color: white;\n  font-size: 1.2em;\n\n  width: 100%;\n  padding: 5px 20px;\n  margin: 5px;\n\n  :disabled {\n    background: #d22307;\n    cursor: not-allowed;\n  }\n`;\n\nconst getInitialValues = component =>\n  Object.fromEntries(\n    component.configurations.map(configuration => [\n      configuration.name,\n      configuration.default,\n    ]),\n  );\n\nconst getFormSubmitLabel = (isValid, editMode) => {\n  if (!isValid) return 'Check form errors';\n  if (editMode) return 'Save component';\n  return 'Add to circuit';\n};\n\nconst ComponentConfiguration = ({\n  editMode,\n  component,\n  handleClose,\n  handleBack,\n  handleSubmit,\n}) => {\n  const firstInputRef = useRef();\n  const buttonRef = useRef();\n\n  useEffect(() => {\n    if (firstInputRef.current) {\n      firstInputRef.current.focus();\n    } else {\n      buttonRef.current.focus();\n    }\n  });\n\n  useEffect(Tooltip.rebuild);\n\n  return (\n    <>\n      <Header>\n        {!editMode && (\n          <IconButton\n            left\n            onClick={handleBack}\n            data-for=\"tooltip\"\n            data-tip=\"Go back...\"\n            data-place=\"right\"\n          >\n            <ArrowLeft />\n          </IconButton>\n        )}\n        <Title>{editMode ? 'Edit' : 'Configure'} component</Title>\n        <IconButton\n          right\n          onClick={handleClose}\n          data-for=\"tooltip\"\n          data-tip=\"Close\"\n          data-place=\"left\"\n        >\n          <Close />\n        </IconButton>\n      </Header>\n\n      <Content>\n        <Formik\n          initialValues={getInitialValues(component)}\n          onSubmit={values => {\n            handleSubmit(null, {\n              type: component.type,\n              configurations: values,\n            });\n            handleClose();\n          }}\n        >\n          {({ values, isValid }) => (\n            <Form>\n              <DragArea error={!isValid}>\n                <DraggableComponent\n                  component={component}\n                  configurations={values}\n                  handleClose={handleClose}\n                  error={!isValid}\n                  disabled={editMode}\n                />\n              </DragArea>\n\n              <FormScroll autoComplete=\"off\">\n                {component.configurations.map(\n                  (configuration, index) => (\n                    <Field\n                      key={configuration.name}\n                      component={ComponentConfigurationInput}\n                      innerRef={index === 0 ? firstInputRef : null}\n                      {...configuration}\n                      validate={\n                        configuration.validate\n                          ? value =>\n                              configuration.validate(value, values)\n                          : null\n                      }\n                    />\n                  ),\n                )}\n              </FormScroll>\n\n              <Footer>\n                {!editMode && (\n                  <Hint>(hint: you can also drag the component)</Hint>\n                )}\n                <SubmitButton disabled={!isValid} ref={buttonRef}>\n                  {getFormSubmitLabel(isValid, editMode)}\n                </SubmitButton>\n              </Footer>\n            </Form>\n          )}\n        </Formik>\n      </Content>\n    </>\n  );\n};\n\nexport default ComponentConfiguration;\n","import React, { useEffect, useCallback } from 'react';\n\nimport Modal from '../Modal/Modal';\nimport ComponentConfiguration from './ComponentConfiguration';\n\nconst closeOnEsc = ({ code }, handleClose) => {\n  if (code !== 'Escape') return;\n  handleClose();\n};\n\nconst ComponentEdit = ({\n  isOpen,\n  components,\n  component,\n  handleClose,\n  handleComponentEdit,\n}) => {\n  const callback = useCallback(\n    event => closeOnEsc(event, handleClose),\n    [handleClose],\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', callback);\n    return () => window.removeEventListener('keydown', callback);\n  }, [callback]);\n\n  if (!isOpen) return null;\n\n  const factory = components.find(\n    c => c.type === component.options.type,\n  );\n\n  const edit = {\n    ...factory,\n    configurations: factory.configurations.map(configuration => ({\n      ...configuration,\n      default: component.configurations[configuration.name],\n    })),\n  };\n\n  return (\n    <Modal>\n      <ComponentConfiguration\n        editMode\n        handleClose={handleClose}\n        handleSubmit={(event, { configurations }) =>\n          handleComponentEdit(component, configurations)\n        }\n        component={edit}\n      />\n    </Modal>\n  );\n};\n\nexport default ComponentEdit;\n","import React, { useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport { Chevron } from '../Icons';\n\nconst Container = styled.div`\n  margin-bottom: 32px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Title = styled.div`\n  font-weight: bold;\n  font-size: 1.3em;\n`;\n\nconst HorizontalSeparator = styled.hr`\n  flex-grow: 1;\n  align-self: center;\n\n  margin: 16px;\n  border-top: 1px solid black;\n`;\n\nconst IconButton = styled.button`\n  background: none;\n  border: none;\n  width: 50px;\n\n  transform: ${props => (props.isOpen ? 'rotate(180deg)' : 'none')};\n`;\n\nconst ComponentsGrid = styled.div`\n  display: ${props => (props.isOpen ? 'grid' : 'none')};\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 8px;\n`;\n\nconst ComponentButton = styled.button`\n  display: flex;\n  align-items: center;\n\n  padding: 8px;\n\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.1);\n    border-style: dashed;\n  }\n`;\n\nconst ComponentTitle = styled.h2`\n  font-weight: normal;\n  font-size: 1.2em;\n`;\n\nconst ComponentIcon = styled.div`\n  margin-right: 16px;\n`;\n\nconst ComponentGroup = ({\n  name,\n  components,\n  handleComponentSelect,\n}) => {\n  const [isOpen, setOpen] = useState(true);\n\n  return (\n    <Container>\n      <Header onClick={() => setOpen(!isOpen)}>\n        <Title>{name}</Title>\n        <HorizontalSeparator />\n        <IconButton\n          left\n          isOpen={isOpen}\n          onClick={() => setOpen(!isOpen)}\n        >\n          <Chevron />\n        </IconButton>\n      </Header>\n      <ComponentsGrid isOpen={isOpen}>\n        {components.map(component => (\n          <ComponentButton\n            onClick={() => handleComponentSelect(component)}\n            key={component.name}\n            data-for=\"tooltip\"\n            data-tip={component.description}\n          >\n            <ComponentIcon>\n              <component.Icon />\n            </ComponentIcon>\n            <ComponentTitle>{component.name}</ComponentTitle>\n          </ComponentButton>\n        ))}\n      </ComponentsGrid>\n    </Container>\n  );\n};\n\nexport default ComponentGroup;\n","import React, { useState, useEffect } from 'react';\nimport Tooltip from 'react-tooltip';\n\nimport styled from 'styled-components';\n\nimport { Close } from '../Icons';\nimport {\n  Header,\n  Content,\n  IconButton,\n} from '../Modal/ModalContentLayout';\nimport ComponentGroup from './ComponentGroup';\n\nconst SearchBar = styled.input`\n  flex-grow: 1;\n\n  padding: 10px;\n  margin-right: 60px;\n  font-size: 1.5em;\n\n  border-radius: 25px;\n  border: 1px solid gray;\n\n  ::placeholder {\n    font-weight: 300;\n    color: #cfcfcf;\n  }\n`;\n\nconst Scroll = styled.div`\n  padding-right: 16px;\n  max-height: calc(min(800px, 80vh) - 130px);\n  overflow-y: auto;\n`;\n\nconst ComponentSearch = ({\n  groups,\n  handleComponentSelect,\n  handleClose,\n}) => {\n  useEffect(Tooltip.rebuild);\n\n  const [filteredGroups, setFilteredGroups] = useState(groups);\n  const [searchText, setSearchText] = useState('');\n\n  const handleSearchChange = value => {\n    setSearchText(value);\n\n    if (!value) {\n      setFilteredGroups(groups);\n      return;\n    }\n\n    const like = new RegExp(`${value}.*`, 'i');\n\n    const newFilteredGroups = groups\n      .map(group => {\n        const hasAnyMatchingComponent = group.components.some(\n          component => component.name.match(like),\n        );\n\n        if (hasAnyMatchingComponent)\n          return {\n            ...group,\n            components: group.components.filter(component =>\n              component.name.match(like),\n            ),\n          };\n        return null;\n      })\n      .filter(group => group != null);\n\n    setFilteredGroups(newFilteredGroups);\n  };\n\n  const handleKeyDown = key => {\n    if (key === 'Escape') {\n      setSearchText('');\n      setFilteredGroups(groups);\n    }\n\n    if (\n      key === 'Enter' &&\n      searchText &&\n      filteredGroups.length > 0 &&\n      filteredGroups[0].components.length > 0\n    ) {\n      handleComponentSelect(filteredGroups[0].components[0]);\n    }\n  };\n\n  return (\n    <>\n      <Header>\n        <SearchBar\n          autoFocus\n          placeholder=\"Search components...\"\n          value={searchText}\n          onChange={({ target: { value } }) =>\n            handleSearchChange(value)\n          }\n          onKeyDown={({ key }) => handleKeyDown(key)}\n        />\n        <IconButton\n          right\n          onClick={handleClose}\n          data-for=\"tooltip\"\n          data-tip=\"Close\"\n          data-place=\"left\"\n        >\n          <Close />\n        </IconButton>\n      </Header>\n\n      <Content>\n        <Scroll>\n          {filteredGroups.map(({ name, components }) => (\n            <ComponentGroup\n              name={name}\n              components={components}\n              handleComponentSelect={handleComponentSelect}\n              key={name}\n            />\n          ))}\n        </Scroll>\n      </Content>\n    </>\n  );\n};\n\nexport default ComponentSearch;\n","import React, { useState, useEffect, useCallback } from 'react';\n\nimport Modal from '../Modal/Modal';\nimport ComponentConfiguration from './ComponentConfiguration';\nimport ComponentSearch from './ComponentSearch';\n\nconst closeOnEsc = (\n  { code },\n  { handleClose, setSelectedComponent },\n) => {\n  if (code !== 'Escape') return;\n  handleClose();\n  setSelectedComponent(null);\n};\n\nconst ComponentSelect = ({\n  isOpen,\n  groups,\n  handleClose,\n  handleComponentDrop,\n}) => {\n  const [selectedComponent, setSelectedComponent] = useState(null);\n  const callback = useCallback(\n    event => closeOnEsc(event, { handleClose, setSelectedComponent }),\n    [handleClose],\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', callback);\n    return () => window.removeEventListener('keydown', callback);\n  }, [callback]);\n\n  if (!isOpen) return null;\n\n  return (\n    <Modal>\n      {selectedComponent ? (\n        <ComponentConfiguration\n          handleClose={() => {\n            handleClose();\n            setSelectedComponent(null);\n          }}\n          handleSubmit={handleComponentDrop}\n          handleBack={() => setSelectedComponent(null)}\n          component={selectedComponent}\n        />\n      ) : (\n        <ComponentSearch\n          handleClose={handleClose}\n          handleComponentSelect={setSelectedComponent}\n          groups={groups}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default ComponentSelect;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Container = styled.span`\n  display: inline-flex;\n  align-items: center;\n\n  height: ${props => props.size}px;\n  padding: 0 ${props => props.size / 4}px;\n  margin: 2px ${props => props.size / 8}px;\n\n  font-size: ${props => props.size / 2}px;\n  font-family: monospace;\n  color: #000000c4;\n\n  background: #ececec;\n  border-radius: 4px;\n  border: 1px solid #ffffff17;\n  box-shadow: inset 0 0 ${props => props.size / 4}px #0000000a;\n`;\n\nconst Key = ({ children, size = 16 }) => (\n  <Container size={size}>{children}</Container>\n);\n\nexport default Key;\n","import styled from 'styled-components';\n\nconst ContextMenuIconContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  width: 16px;\n  height: 16px;\n  margin-right: 16px;\n`;\n\nexport default ContextMenuIconContainer;\n","import styled from 'styled-components';\n\nconst ContextMenuShortcutContainer = styled.div`\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  margin-left: 8px;\n`;\n\nexport default ContextMenuShortcutContainer;\n","import React from 'react';\nimport { Menu, Item, Separator } from 'react-contexify';\n\nimport {\n  Duplicate,\n  Copy,\n  Delete,\n  Paste,\n  Redo,\n  Settings,\n  Undo,\n  Cut,\n  ZoomIn,\n  ZoomOut,\n  RotateLeft,\n  RotateRight,\n} from '../Icons';\nimport Key from '../Key/Key';\nimport ContextMenuIconContainer from './ContextMenuIconContainer';\nimport ContextMenuShortcutContainer from './ContextMenuShortcutContainer';\n\nconst ComponentContextMenu = ({\n  duplicateSelected,\n  cutSelected,\n  copySelected,\n  pasteSelected,\n  deleteSelected,\n  undo,\n  redo,\n  zoomIn,\n  zoomOut,\n  rotateLeft,\n  rotateRight,\n  configureComponent,\n}) => (\n  <Menu id=\"component\">\n    <Item onClick={duplicateSelected}>\n      <ContextMenuIconContainer>\n        <Duplicate />\n      </ContextMenuIconContainer>\n      Duplicate\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>D</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={cutSelected}>\n      <ContextMenuIconContainer>\n        <Cut />\n      </ContextMenuIconContainer>\n      Cut\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>X</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={copySelected}>\n      <ContextMenuIconContainer>\n        <Copy />\n      </ContextMenuIconContainer>\n      Copy\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>C</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={pasteSelected}>\n      <ContextMenuIconContainer>\n        <Paste />\n      </ContextMenuIconContainer>\n      Paste\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>V</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={deleteSelected}>\n      <ContextMenuIconContainer>\n        <Delete />\n      </ContextMenuIconContainer>\n      Delete\n      <ContextMenuShortcutContainer>\n        <Key>Delete</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Separator />\n\n    <Item onClick={zoomIn}>\n      <ContextMenuIconContainer>\n        <ZoomIn />\n      </ContextMenuIconContainer>\n      Zoom in\n    </Item>\n\n    <Item onClick={zoomOut}>\n      <ContextMenuIconContainer>\n        <ZoomOut />\n      </ContextMenuIconContainer>\n      Zoom out\n    </Item>\n\n    <Separator />\n\n    <Item\n      onClick={({ props }) =>\n        rotateLeft(props.component)\n      }\n      disabled={({ props }) =>\n        !props.component.canRotate\n      }\n    >\n      <ContextMenuIconContainer>\n        <RotateLeft />\n      </ContextMenuIconContainer>\n      Rotate left\n    </Item>\n\n    <Item\n      onClick={({ props }) =>\n        rotateRight(props.component)\n      }\n      disabled={({ props }) =>\n        !props.component.canRotate\n      }\n    >\n      <ContextMenuIconContainer>\n        <RotateRight />\n      </ContextMenuIconContainer>\n      Rotate right\n    </Item>\n\n    <Separator />\n\n    <Item onClick={undo}>\n      <ContextMenuIconContainer>\n        <Undo />\n      </ContextMenuIconContainer>\n      Undo\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>Z</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={redo}>\n      <ContextMenuIconContainer>\n        <Redo />\n      </ContextMenuIconContainer>\n      Redo\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>SHIFT</Key>\n        <Key>Z</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Separator />\n\n    <Item\n      onClick={({ props }) =>\n        configureComponent(props.component)\n      }\n    >\n      <ContextMenuIconContainer>\n        <Settings />\n      </ContextMenuIconContainer>\n      Edit configurations...\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>E</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n  </Menu>\n);\n\nexport default ComponentContextMenu;\n","import React from 'react';\nimport { Menu, Item, Separator } from 'react-contexify';\n\nimport { Redo, Undo, Paste, ZoomIn, ZoomOut } from '../Icons';\nimport Key from '../Key/Key';\nimport ContextMenuIconContainer from './ContextMenuIconContainer';\nimport ContextMenuShortcutContainer from './ContextMenuShortcutContainer';\n\nconst DiagramContextMenu = ({\n  pasteSelected,\n  undo,\n  redo,\n  zoomIn,\n  zoomOut,\n}) => (\n  <Menu id=\"diagram\">\n    <Item onClick={pasteSelected}>\n      <ContextMenuIconContainer>\n        <Paste />\n      </ContextMenuIconContainer>\n      Paste\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>V</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Separator />\n\n    <Item onClick={zoomIn}>\n      <ContextMenuIconContainer>\n        <ZoomIn />\n      </ContextMenuIconContainer>\n      Zoom in\n    </Item>\n    <Item onClick={zoomOut}>\n      <ContextMenuIconContainer>\n        <ZoomOut />\n      </ContextMenuIconContainer>\n      Zoom out\n    </Item>\n\n    <Separator />\n\n    <Item onClick={undo}>\n      <ContextMenuIconContainer>\n        <Undo />\n      </ContextMenuIconContainer>\n      Undo\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>Z</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n\n    <Item onClick={redo}>\n      <ContextMenuIconContainer>\n        <Redo />\n      </ContextMenuIconContainer>\n      Redo\n      <ContextMenuShortcutContainer>\n        <Key>CTRL</Key>\n        <Key>SHIFT</Key>\n        <Key>Z</Key>\n      </ContextMenuShortcutContainer>\n    </Item>\n  </Menu>\n);\n\nexport default DiagramContextMenu;\n","import React from 'react';\n\nimport ComponentContextMenu from './ComponentContextMenu';\nimport DiagramContextMenu from './DiagramContextMenu';\n\nimport 'react-contexify/dist/ReactContexify.min.css';\n\nconst ContextMenus = ({\n  duplicateSelected,\n  cutSelected,\n  copySelected,\n  pasteSelected,\n  deleteSelected,\n  undo,\n  redo,\n  zoomIn,\n  zoomOut,\n  rotateLeft,\n  rotateRight,\n  configureComponent,\n}) => (\n  <>\n    <DiagramContextMenu\n      pasteSelected={pasteSelected}\n      undo={undo}\n      redo={redo}\n      zoomIn={zoomIn}\n      zoomOut={zoomOut}\n    />\n    <ComponentContextMenu\n      duplicateSelected={duplicateSelected}\n      cutSelected={cutSelected}\n      copySelected={copySelected}\n      pasteSelected={pasteSelected}\n      deleteSelected={deleteSelected}\n      undo={undo}\n      redo={redo}\n      zoomIn={zoomIn}\n      zoomOut={zoomOut}\n      rotateLeft={rotateLeft}\n      rotateRight={rotateRight}\n      configureComponent={configureComponent}\n    />\n  </>\n);\n\nexport default ContextMenus;\n","import React, { useEffect, useCallback } from 'react';\nimport GitHubButton from 'react-github-button';\n\nimport styled from 'styled-components';\n\nimport { version } from '../../../package.json';\nimport { Close } from '../Icons';\nimport Modal from '../Modal/Modal';\nimport {\n  Header,\n  Title,\n  Content,\n  IconButton,\n} from '../Modal/ModalContentLayout';\n\nconst Version = styled.span`\n  font-weight: bold;\n  font-size: 1.1em;\n  margin-top: -32px;\n`;\n\nconst Divider = styled.hr`\n  width: 80%;\n  margin: 24px;\n  border-color: white;\n`;\n\nconst closeOnEsc = ({ code }, handleClose) => {\n  if (code !== 'Escape') return;\n  handleClose();\n};\n\nconst HelpAbout = ({ isOpen, handleClose }) => {\n  const callback = useCallback(\n    event => closeOnEsc(event, handleClose),\n    [handleClose],\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', callback);\n    return () => window.removeEventListener('keydown', callback);\n  }, [callback]);\n\n  if (!isOpen) return null;\n\n  return (\n    <Modal>\n      <Header>\n        <Title>About</Title>\n        <IconButton\n          right\n          onClick={handleClose}\n          data-for=\"tooltip\"\n          data-tip=\"Close\"\n          data-place=\"left\"\n        >\n          <Close />\n        </IconButton>\n      </Header>\n\n      <Content\n        style={{\n          paddingTop: 0,\n          marginTop: 16,\n          overflowY: 'auto',\n          height: 'calc(100% - 70px)',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n        }}\n      >\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <img\n            src={`${process.env.PUBLIC_URL}/social.png`}\n            alt=\"logossim's logo\"\n            style={{ width: '75%' }}\n          />\n          <Version>Version {version}</Version>\n        </div>\n\n        <Divider />\n\n        <div style={{ margin: '0 32px' }}>\n          <p style={{ textAlign: 'center' }}>\n            If you want to know more about the project,{' '}\n            <a\n              href=\"https://github.com/renato-bohler/logossim\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              check us out on GitHub!\n            </a>\n          </p>\n          <GitHubButton\n            type=\"stargazers\"\n            namespace=\"renato-bohler\"\n            repo=\"logossim\"\n          />\n          <p style={{ textAlign: 'center' }}>\n            <strong>You can help us</strong> make logossim better! If\n            you know a little bit of web development, you can quite\n            easily develop new components to the application.\n          </p>\n        </div>\n\n        <Divider />\n\n        <div style={{ margin: '0 32px' }}>\n          <p style={{ textAlign: 'center' }}>\n            This is a project built by{' '}\n            <a\n              href=\"https://renato-bohler.github.io/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Renato Bhler\n            </a>{' '}\n            as an undegraduate thesis on Computer Engineering at{' '}\n            <a\n              href=\"http://www.utfpr.edu.br/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              UTFPR\n            </a>\n            .\n          </p>\n        </div>\n      </Content>\n    </Modal>\n  );\n};\n\nexport default HelpAbout;\n","import React, { useEffect, useCallback } from 'react';\n\nimport styled from 'styled-components';\n\nimport { Close } from '../Icons';\nimport Key from '../Key/Key';\nimport Modal from '../Modal/Modal';\nimport {\n  Header,\n  Title,\n  Subtitle,\n  Content,\n  IconButton,\n} from '../Modal/ModalContentLayout';\n\nconst closeOnEsc = ({ code }, handleClose) => {\n  if (code !== 'Escape') return;\n  handleClose();\n};\n\nconst TableContainer = styled.div`\n  display: flex;\n`;\n\nconst Table = styled.table`\n  flex: 1;\n  margin: 8px 0;\n`;\n\nconst TableColumn = styled.td`\n  padding: 8px;\n\n  border: 1px solid #5d2eb526;\n  border-radius: 8px;\n`;\n\nconst HelpKeyboardShortcuts = ({ isOpen, handleClose }) => {\n  const callback = useCallback(\n    event => closeOnEsc(event, handleClose),\n    [handleClose],\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', callback);\n    return () => window.removeEventListener('keydown', callback);\n  }, [callback]);\n\n  if (!isOpen) return null;\n\n  return (\n    <Modal>\n      <Header>\n        <Title>Keyboard shortcuts</Title>\n        <IconButton\n          right\n          onClick={handleClose}\n          data-for=\"tooltip\"\n          data-tip=\"Close\"\n          data-place=\"left\"\n        >\n          <Close />\n        </IconButton>\n      </Header>\n\n      <Content\n        style={{\n          paddingTop: 16,\n          marginTop: 16,\n          overflowY: 'auto',\n          height: 'calc(100% - 70px)',\n        }}\n      >\n        <span>\n          <strong>Note:</strong> some of the actions may have two\n          shortcuts.\n        </span>\n\n        <Subtitle style={{ marginTop: 32 }}>\n          Circuit management\n        </Subtitle>\n        <TableContainer>\n          <Table>\n            <tbody>\n              <tr>\n                <TableColumn>Save</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>S</Key>\n                </TableColumn>\n                <TableColumn />\n              </tr>\n              <tr>\n                <TableColumn>Load</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>L</Key>\n                </TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>SHIFT</Key>\n                  <Key size={32}>S</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Undo</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>Z</Key>\n                </TableColumn>\n                <TableColumn />\n              </tr>\n              <tr>\n                <TableColumn>Redo</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>SHIFT</Key>\n                  <Key size={32}>Z</Key>\n                </TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>Y</Key>\n                </TableColumn>\n              </tr>\n            </tbody>\n          </Table>\n        </TableContainer>\n\n        <Subtitle style={{ marginTop: 32 }}>\n          Component management\n        </Subtitle>\n        <TableContainer>\n          <Table>\n            <tbody>\n              <tr>\n                <TableColumn>Edit configurations</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>E</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Duplicate</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>D</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Delete</TableColumn>\n                <TableColumn>\n                  <Key size={32}>Delete</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Copy</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>C</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Paste</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>V</Key>\n                </TableColumn>\n              </tr>\n              <tr>\n                <TableColumn>Cut</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>X</Key>\n                </TableColumn>\n              </tr>\n            </tbody>\n          </Table>\n        </TableContainer>\n\n        <Subtitle style={{ marginTop: 32 }}>\n          Simulation control\n        </Subtitle>\n        <TableContainer>\n          <Table>\n            <tbody>\n              <tr>\n                <TableColumn>Play</TableColumn>\n                <TableColumn>\n                  <Key size={32}>SPACE</Key>\n                </TableColumn>\n                <TableColumn />\n              </tr>\n              <tr>\n                <TableColumn>Pause</TableColumn>\n                <TableColumn>\n                  <Key size={32}>SPACE</Key>\n                </TableColumn>\n                <TableColumn />\n              </tr>\n              <tr>\n                <TableColumn>Stop</TableColumn>\n                <TableColumn>\n                  <Key size={32}>CTRL</Key>\n                  <Key size={32}>SPACE</Key>\n                </TableColumn>\n                <TableColumn>\n                  <Key size={32}>ESC</Key>\n                </TableColumn>\n              </tr>\n            </tbody>\n          </Table>\n        </TableContainer>\n      </Content>\n    </Modal>\n  );\n};\n\nexport default HelpKeyboardShortcuts;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  position: absolute;\n  z-index: 10;\n\n  font-size: 2em;\n  font-weight: bold;\n  font-family: monospace;\n\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  background: #ffffff80;\n  border: 1px solid #6441a5;\n  border-radius: 16px;\n\n  padding: 16px;\n`;\n\nconst LoadingExample = () => (\n  <Container>Loading example...</Container>\n);\n\nexport default LoadingExample;\n","import React from 'react';\n\nimport styled, { keyframes } from 'styled-components';\n\nconst BACKGROUND_COLOR = {\n  error: '#f44336',\n  warning: '#ff9800',\n  info: '#2196f3',\n  success: '#4caf50',\n};\n\nconst TRANSITION_DURATION = 500;\n\nconst Container = styled.div`\n  position: absolute;\n  top: ${props => (props.open ? '5px' : '-200px')};\n  left: 50%;\n  transition: top ${TRANSITION_DURATION}ms;\n  transform: translateX(-50%);\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  border-radius: 10px;\n  min-width: 300px;\n  min-height: 50px;\n\n  cursor: pointer;\n\n  background: ${props => BACKGROUND_COLOR[props.type]};\n  color: white;\n  font-size: 14px;\n  font-weight: bold;\n  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),\n    0px 6px 10px 0px rgba(0, 0, 0, 0.14),\n    0px 1px 18px 0px rgba(0, 0, 0, 0.12);\n  z-index: 2;\n`;\n\nconst Message = styled.span`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  width: 100%;\n  align-items: flex-start;\n  margin-top: 5px;\n  padding: 8px 16px;\n`;\n\nconst progress = keyframes`\n  0% {\n    width: 100%;\n  }\n  100% {\n    width: 0;\n  }\n`;\n\nconst ProgressBar = styled.div`\n  background: #ffffff80;\n  height: 5px;\n  border-radius: 5px;\n  align-self: flex-start;\n  width: 100%;\n\n  animation-name: ${progress};\n  animation-play-state: ${props =>\n    props.paused ? 'paused' : 'running'};\n  animation-duration: ${props =>\n    props.timeout - TRANSITION_DURATION / 2}ms;\n  animation-delay: ${TRANSITION_DURATION / 2}ms;\n  animation-timing-function: linear;\n`;\n\nconst Snackbar = ({ open, handleClose, message, type, timeout }) => {\n  return (\n    <Container\n      type={type}\n      timeout={timeout}\n      open={open}\n      onClick={handleClose}\n    >\n      <Message>\n        {message.split(`\\n`).map((string, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <div key={index}>{string}</div>\n        ))}\n      </Message>\n\n      {open && <ProgressBar timeout={timeout} />}\n    </Container>\n  );\n};\n\nexport default Snackbar;\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport styled from 'styled-components';\n\nimport { Edit, Chevrons } from '../Icons';\n\nconst Container = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n\n  z-index: 2;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  background: white;\n  border-bottom: 1px solid #e5e5e5;\n  box-shadow: 0px -10px 20px 0px black;\n  padding: 12px;\n\n  transform: ${({ isHidden }) =>\n    isHidden ? 'translateY(-100%)' : 'none'};\n  transition: 0.5s ease-in-out;\n`;\n\nconst NameContainer = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 4px;\n  border: 1px solid\n    ${({ isFocused }) => (isFocused ? '#e5e5e5' : 'transparent')};\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid #e5e5e5;\n  }\n`;\n\nconst NameInput = styled.input`\n  background: none;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  font-size: 20px;\n`;\n\nconst IconButton = styled.button`\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n`;\n\nconst Button = styled.button.attrs(({ ...props }) => ({\n  ...props,\n  type: 'button',\n}))`\n  border: none;\n  border-radius: 5px;\n  background: ${props => {\n    switch (props.color) {\n      case 'green':\n        return '#07d26b';\n      case 'orange':\n        return 'orange';\n      default:\n        return 'gray';\n    }\n  }};\n\n  color: white;\n  font-size: 1.2em;\n\n  min-width: 110px;\n  padding: 5px 20px;\n  margin: 5px;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n  }\n`;\n\nconst FileInput = styled.input`\n  display: none;\n`;\n\nconst HelpButton = styled.button.attrs(({ ...props }) => ({\n  ...props,\n  type: 'button',\n}))`\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 50%;\n  border: 1px solid #6441a5;\n\n  width: 34px;\n  height: 34px;\n\n  margin: 5px;\n\n  color: #6441a5;\n  font-weight: bold;\n  font-size: 1.3em;\n\n  &:focus,\n  &:hover {\n    background: #6441a5;\n    border: 1px solid rgba(255, 255, 255, 0.6);\n    color: rgba(255, 255, 255, 0.6);\n  }\n`;\n\nconst HelpButtonMenu = styled.div`\n  position: absolute;\n  top: 80px;\n  transform: translateX(calc(17px + -50%));\n\n  display: flex;\n  flex-direction: column;\n\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px solid #6441a5;\n  border-radius: 10px;\n  padding: 3px;\n\n  z-index: 3;\n`;\n\nconst HelpButtonMenuItem = styled.button`\n  font-size: 14px;\n  color: #222;\n  padding: 16px;\n  border: 0;\n  background: transparent;\n  border-bottom: ${props =>\n    props.last ? 'none' : '1px solid #6441a5'};\n\n  &:focus,\n  &:hover {\n    color: #6441a5;\n  }\n`;\n\nconst HideButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 80px;\n  right: 20px;\n  background: white;\n  border: 1px solid #e5e5e5;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  box-shadow: 0px 0px 12px 0px #6b6b6b;\n\n  svg {\n    transform: ${({ isHidden }) =>\n      isHidden ? 'rotate(180deg)' : 'none'};\n    transition: 0.5s ease-in-out;\n  }\n`;\n\nconst Titlebar = ({\n  circuitName,\n  isCircuitNameFocused,\n  handleChangeCircuitName,\n  handleFocusCircuitName,\n  handleBlurCircuitName,\n  handleClickSave,\n  handleFileLoad,\n  handleClickKeyboardShortcuts,\n  handleClickRedoTour,\n  handleClickAbout,\n  disabled,\n}) => {\n  const helpButtonRef = useRef();\n  const helpMenuRef = useRef();\n  const nameInputRef = useRef();\n  const fileInputRef = useRef();\n  const [isHelpMenuOpen, setHelpMenuOpen] = useState(false);\n  const [isHidden, setHidden] = useState(false);\n\n  const handleHideClick = () => setHidden(hidden => !hidden);\n  const handleNameConfirm = event => {\n    if (!nameInputRef.current) return;\n\n    const { key } = event;\n    if (key === 'Enter' || key === 'Escape')\n      nameInputRef.current.blur();\n  };\n  const handleNameEditClick = () => {\n    if (!nameInputRef.current) return;\n    nameInputRef.current.focus();\n  };\n  const handleToggleHelpMenu = () => setHelpMenuOpen(!isHelpMenuOpen);\n  const handleClickLoad = () => {\n    if (!fileInputRef.current) return;\n    fileInputRef.current.click();\n  };\n  const handleClickAway = event => {\n    if (\n      helpMenuRef.current &&\n      !helpMenuRef.current.contains(event.target) &&\n      helpButtonRef.current &&\n      !helpButtonRef.current.contains(event.target)\n    ) {\n      handleToggleHelpMenu();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickAway);\n    return () =>\n      document.removeEventListener('mousedown', handleClickAway);\n  });\n\n  return (\n    <Container isHidden={isHidden}>\n      <NameContainer\n        isFocused={isCircuitNameFocused}\n        data-for=\"tooltip\"\n        data-tip=\"Rename your circuit...\"\n        data-place=\"right\"\n      >\n        <NameInput\n          ref={nameInputRef}\n          value={circuitName}\n          onChange={handleChangeCircuitName}\n          onFocus={handleFocusCircuitName}\n          onBlur={handleBlurCircuitName}\n          onKeyDown={handleNameConfirm}\n          maxLength={50}\n        />\n        <IconButton onClick={handleNameEditClick}>\n          <Edit />\n        </IconButton>\n      </NameContainer>\n\n      <ButtonsContainer>\n        <HelpButton\n          id=\"help-button\"\n          ref={helpButtonRef}\n          onClick={handleToggleHelpMenu}\n          data-for=\"tooltip\"\n          data-tip=\"Get help...\"\n          data-place=\"left\"\n        >\n          <span>?</span>\n        </HelpButton>\n        {isHelpMenuOpen && (\n          <HelpButtonMenu ref={helpMenuRef}>\n            <HelpButtonMenuItem\n              onClick={() => {\n                handleClickKeyboardShortcuts();\n                handleToggleHelpMenu();\n              }}\n            >\n              Keyboard shortcuts\n            </HelpButtonMenuItem>\n            <HelpButtonMenuItem\n              onClick={() => {\n                setHidden(false);\n                handleClickRedoTour();\n                handleToggleHelpMenu();\n              }}\n            >\n              Redo the tour\n            </HelpButtonMenuItem>\n            <HelpButtonMenuItem\n              onClick={() => {\n                handleClickAbout();\n                handleToggleHelpMenu();\n              }}\n              last\n            >\n              About\n            </HelpButtonMenuItem>\n          </HelpButtonMenu>\n        )}\n\n        <div id=\"save-load-buttons\">\n          <Button\n            color=\"green\"\n            onClick={handleClickSave}\n            disabled={disabled}\n            data-for=\"tooltip\"\n            data-tip=\"Save circuit to file\"\n            data-place=\"left\"\n          >\n            Save\n          </Button>\n          <Button\n            color=\"orange\"\n            disabled={disabled}\n            onClick={handleClickLoad}\n            data-for=\"tooltip\"\n            data-tip=\"Load circuit from file...\"\n            data-place=\"left\"\n          >\n            Load\n          </Button>\n          <FileInput\n            id=\"file-input\"\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".lgsim\"\n            onChange={handleFileLoad}\n          />\n        </div>\n      </ButtonsContainer>\n\n      <HideButton\n        isHidden={isHidden}\n        onClick={handleHideClick}\n        data-for=\"tooltip\"\n        data-tip={isHidden ? 'Show titlebar' : 'Hide titlebar'}\n        data-place=\"left\"\n      >\n        <Chevrons />\n      </HideButton>\n    </Container>\n  );\n};\n\nexport default Titlebar;\n","export const DIMENSIONS = { width: 180, height: 135 };\n\n/**\n * Example circuit used to make the tour\n */\nexport default {\n  id: 'tour-circuit',\n  name: \"Logossim's tour circuit\",\n  createdAt: '2020-05-21T20:18:00.000Z',\n  updatedAt: '2020-09-08T11:47:00.000Z',\n  circuit: {\n    id: 'tour-circuit',\n    locked: false,\n    offsetX: 0,\n    offsetY: 0,\n    zoom: 100,\n    gridSize: 15,\n    layers: [\n      {\n        id: '4d94cbed-1005-4dc6-b0e3-44d71dc14380',\n        type: 'diagram-links',\n        isSvg: true,\n        transformed: true,\n        models: {\n          'clock-out-link': {\n            id: 'clock-out-link',\n            type: 'link',\n            selected: false,\n            source: 'clock',\n            sourcePort: 'clock-port',\n            target: 'and',\n            targetPort: 'and-port-in0',\n            points: [\n              {\n                id: 'bb7c0935-a272-45ea-b47a-f9b79fa7fac3',\n                type: 'point',\n                x: 30,\n                y: 15,\n              },\n              {\n                id: '2f339615-1c6c-450c-9862-06742ed3893f',\n                type: 'point',\n                x: 60,\n                y: 15,\n              },\n            ],\n            labels: [],\n            bifurcations: [],\n            bifurcationSource: null,\n            bifurcationTarget: null,\n            value: null,\n            bits: 1,\n          },\n          'and-out-link': {\n            id: 'and-out-link',\n            type: 'link',\n            selected: false,\n            source: 'and',\n            sourcePort: 'and-port-out',\n            target: null,\n            targetPort: null,\n            points: [\n              {\n                id: 'e4916002-7182-4866-9df7-46473e7de8bc',\n                type: 'point',\n                x: 150,\n                y: 45,\n              },\n              {\n                id: 'd677077d-9750-4831-be02-566294c988b1',\n                type: 'point',\n                x: 180,\n                y: 45,\n              },\n            ],\n            labels: [],\n            bifurcations: [],\n            bifurcationSource: null,\n            bifurcationTarget: null,\n            value: null,\n            bits: 1,\n          },\n          'button-out-link': {\n            id: 'button-out-link',\n            type: 'link',\n            selected: false,\n            source: 'button',\n            sourcePort: 'c241c69b-8e1a-45be-9982-4c96a537584f',\n            target: 'and',\n            targetPort: 'and-port-in1',\n            points: [\n              {\n                id: 'fbd656c6-6a36-4903-94b8-c715db34052d',\n                type: 'point',\n                x: 30,\n                y: 75,\n              },\n              {\n                id: 'f70cce22-3d5d-4257-9916-b602da9a901b',\n                type: 'point',\n                x: 60,\n                y: 75,\n              },\n            ],\n            labels: [],\n            bifurcations: ['not-in-link'],\n            bifurcationSource: null,\n            bifurcationTarget: null,\n            value: null,\n            bits: 1,\n          },\n          'not-out-link': {\n            id: 'not-out-link',\n            type: 'link',\n            selected: false,\n            source: 'not',\n            sourcePort: 'not-port-out',\n            target: null,\n            targetPort: null,\n            points: [\n              {\n                id: 'ba84ed0f-78ed-43c2-93d8-cf907b91b5fd',\n                type: 'point',\n                x: 120,\n                y: 120,\n              },\n              {\n                id: '78a6e161-97c3-4a31-a46c-244469ac75ff',\n                type: 'point',\n                x: 180,\n                y: 120,\n              },\n            ],\n            labels: [],\n            bifurcations: [],\n            bifurcationSource: null,\n            bifurcationTarget: null,\n            value: null,\n            bits: 1,\n          },\n          'not-in-link': {\n            id: 'not-in-link',\n            type: 'link',\n            selected: false,\n            source: null,\n            sourcePort: null,\n            target: 'not',\n            targetPort: '589ba5d7-8c75-4c82-9068-a67c9b023f77',\n            points: [\n              {\n                id: 'fada8e3b-4b46-4a24-a7ec-e3ca3bab77ab',\n                type: 'point',\n                x: 45,\n                y: 75,\n              },\n              {\n                id: 'f31e71e6-5d72-4f17-9af1-c23bfd257980',\n                type: 'point',\n                x: 45,\n                y: 120,\n              },\n              {\n                id: '2e747ee3-1c90-4e95-a40b-f221eb0710b3',\n                type: 'point',\n                x: 75,\n                y: 120,\n              },\n            ],\n            labels: [],\n            bifurcations: [],\n            bifurcationSource: 'button-out-link',\n            bifurcationTarget: null,\n            value: null,\n            bits: 1,\n          },\n        },\n      },\n      {\n        id: '9d30c1dd-e474-45b1-ad88-6b7739678ef3',\n        type: 'diagram-nodes',\n        isSvg: false,\n        transformed: true,\n        models: {\n          clock: {\n            id: 'clock',\n            type: 'Clock',\n            selected: false,\n            x: 0,\n            y: 0,\n            ports: [\n              {\n                id: 'clock-port',\n                type: 'Port',\n                selected: false,\n                x: 25,\n                y: 10,\n                name: 'out',\n                parentNode: 'clock',\n                links: ['clock-out-link'],\n                input: false,\n                value: null,\n                bits: 1,\n              },\n            ],\n            configurations: {\n              FREQUENCY_HZ: 0.5,\n              HIGH_DURATION: 1,\n              LOW_DURATION: 1,\n            },\n          },\n          and: {\n            id: 'and',\n            type: 'And',\n            selected: false,\n            x: 60,\n            y: 0,\n            ports: [\n              {\n                id: 'and-port-in0',\n                type: 'Port',\n                selected: false,\n                x: 55,\n                y: 10,\n                name: 'in0',\n                parentNode: 'and',\n                links: ['clock-out-link'],\n                input: true,\n                value: null,\n                bits: 1,\n              },\n              {\n                id: 'and-port-in1',\n                type: 'Port',\n                selected: false,\n                x: 55,\n                y: 70,\n                name: 'in1',\n                parentNode: 'and',\n                links: ['button-out-link'],\n                input: true,\n                value: null,\n                bits: 1,\n              },\n              {\n                id: 'and-port-out',\n                type: 'Port',\n                selected: false,\n                x: 145,\n                y: 40,\n                name: 'out',\n                parentNode: 'and',\n                links: ['and-out-link'],\n                input: false,\n                value: null,\n                bits: 1,\n              },\n            ],\n            configurations: { DATA_BITS: '1', INPUT_PORTS_NUMBER: 2 },\n          },\n          button: {\n            id: 'button',\n            type: 'Button',\n            selected: false,\n            x: 0,\n            y: 60,\n            ports: [\n              {\n                id: 'c241c69b-8e1a-45be-9982-4c96a537584f',\n                type: 'Port',\n                selected: false,\n                x: 25,\n                y: 70,\n                name: 'out',\n                parentNode: 'button',\n                links: ['button-out-link'],\n                input: false,\n                value: null,\n                bits: 1,\n              },\n            ],\n            configurations: {},\n          },\n          not: {\n            id: 'not',\n            type: 'Not',\n            selected: false,\n            x: 75,\n            y: 105,\n            ports: [\n              {\n                id: '589ba5d7-8c75-4c82-9068-a67c9b023f77',\n                type: 'Port',\n                selected: false,\n                x: 70,\n                y: 115,\n                name: 'in',\n                parentNode: 'not',\n                links: ['not-in-link'],\n                input: true,\n                value: null,\n                bits: 1,\n              },\n              {\n                id: 'not-port-out',\n                type: 'Port',\n                selected: false,\n                x: 115,\n                y: 115,\n                name: 'out',\n                parentNode: 'not',\n                links: ['not-out-link'],\n                input: false,\n                value: null,\n                bits: 1,\n              },\n            ],\n            configurations: {\n              DATA_BITS: '1',\n            },\n          },\n        },\n      },\n    ],\n  },\n};\n","import React, { Component } from 'react';\nimport GitHubButton from 'react-github-button';\nimport Joyride, { ACTIONS, EVENTS } from 'react-joyride';\n\nimport styled, { keyframes } from 'styled-components';\n\nimport Key from '../Key/Key';\nimport bifurcation from './images/bifurcation.gif';\nimport contextMenu from './images/context-menu.gif';\nimport simulation from './images/simulation.gif';\nimport wire from './images/wire.gif';\nimport { DIMENSIONS } from './tourCircuit';\n\nconst pulse = keyframes`\n  0% {\n    transform: scale(1);\n  }\n\n  55% {\n    background-color: rgba(42, 8, 69, 0.5);\n    transform: scale(1.2);\n  }\n`;\n\nconst Pulse = styled.span`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  animation: ${pulse} 1s ease-in-out infinite;\n  background-color: ${props => props.color};\n  border: 1px solid rgba(42, 8, 69, 0.7);\n  border-radius: 50%;\n\n  height: ${props => props.size}px;\n  width: ${props => props.size}px;\n`;\n\nconst Beacon = React.forwardRef((props, ref) => (\n  <Pulse\n    size={30}\n    color=\"rgba(100, 65, 165, 0.3)\"\n    ref={ref}\n    {...props}\n  >\n    <Pulse size={20} color=\"rgba(100, 65, 165, 0.5)\" />\n  </Pulse>\n));\n\nconst imageStyle = {\n  alignSelf: 'center',\n  borderRadius: 25,\n  boxShadow: 'rgba(171, 171, 171, 0.38) 0px 13px 20px 0px',\n  marginBottom: 16,\n};\n\nexport default class Tour extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentStep: 0,\n      steps: [\n        {\n          title: 'Welcome!',\n          content: (\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <img\n                src={`${process.env.PUBLIC_URL}/social.png`}\n                alt=\"logossim's logo\"\n                style={{\n                  width: 300,\n                  height: 158,\n                  alignSelf: 'center',\n                }}\n              />\n              <p>\n                This is <strong>logossim</strong>: an open source\n                digital logic simulator, built for the web and to be\n                extensible.\n              </p>\n              <p>Would you like to take a quick tour?</p>\n            </div>\n          ),\n          target: 'body',\n          placement: 'center',\n          showProgress: false,\n          disableOverlayClose: false,\n          locale: {\n            skip: 'No, thanks',\n            next: 'Yes, please!',\n          },\n        },\n        {\n          target: '#tour-circuit-area-wrapper',\n          title: 'This is the circuit workstation',\n          content: (\n            <p>\n              Here&apos;s where you are going to draw your circuits\n            </p>\n          ),\n        },\n        {\n          target: '#component-select-button',\n          title: 'Adding components',\n          content: (\n            <span>\n              <p>And you&apos;ll start by adding some components.</p>\n              <p>\n                You can do it by clicking on this button, then\n                you&apos;ll see all available components, so you can\n                create awesome circuits...\n              </p>\n              <p>\n                <strong>Hint:</strong> use the\n                <Key size={24}>CTRL</Key>\n                <Key size={24}>A</Key> shortcut.\n              </p>\n            </span>\n          ),\n          placement: 'top',\n        },\n        {\n          target: '#tour-circuit-wrapper',\n          title: 'Adding components',\n          content: <p>... like this one, for example!</p>,\n          spotlightPadding: 30,\n        },\n        {\n          target: '#tour-circuit-wrapper',\n          title: 'Managing components',\n          content: (\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <p>\n                Notice that you can right click anywhere on the canvas\n                to access some handy commands, like duplicate, undo\n                &amp; redo and component configuration editing.\n              </p>\n              <img\n                src={contextMenu}\n                alt=\"Context menu example video\"\n                style={{\n                  ...imageStyle,\n                  width: 268,\n                  height: 132,\n                }}\n              />\n            </div>\n          ),\n          spotlightPadding: 30,\n        },\n        {\n          target: '[data-linkid=\"clock-out-link\"]',\n          title: 'Wiring components',\n          content: (\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <p>\n                To wire components together, you can drag a\n                component&apos;s port onto another port.\n              </p>\n              <img\n                src={wire}\n                alt=\"Wiring components example video\"\n                style={{\n                  ...imageStyle,\n                  width: 268,\n                  height: 178,\n                }}\n              />\n              <p>\n                <strong>Oh! Important note:</strong> you can select a\n                wire by clicking it, and delete it using the Delete\n                key.\n              </p>\n            </div>\n          ),\n          placement: 'top',\n          spotlightPadding: 45,\n        },\n        {\n          target: '[data-linkid=\"not-in-link\"]',\n          title: 'Wiring components',\n          content: (\n            <span\n              style={{ display: 'flex', flexDirection: 'column' }}\n            >\n              <p>\n                You can also drag a new wire from an existing wire.\n              </p>\n              <img\n                src={bifurcation}\n                alt=\"Bifurcating wires example video\"\n                style={{\n                  ...imageStyle,\n                  width: 268,\n                  height: 160,\n                }}\n              />\n              <p>\n                <strong>Another important note:</strong> you can leave\n                the wire with a loose end and connect it afterwards.\n              </p>\n            </span>\n          ),\n          placement: 'top',\n          spotlightPadding: 45,\n        },\n        {\n          target: '#simulation-control-buttons',\n          title: 'Simulation control',\n          content: (\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <p>\n                After wiring it all together, you just need to run the\n                simulation to test your ideas!\n              </p>\n              <img\n                src={simulation}\n                alt=\"Simulation execution example video\"\n                style={{\n                  ...imageStyle,\n                  width: 254,\n                  height: 194,\n                }}\n              />\n              <p>Useful shortcuts:</p>\n              <ul style={{ margin: 0 }}>\n                <li>\n                  <strong>Play/pause:</strong>\n                  <Key size={24}>SPACE</Key>\n                </li>\n                <li>\n                  <strong>Stop:</strong>\n                  <Key size={24}>CTRL</Key>\n                  <Key size={24}>SPACE</Key>\n                </li>\n              </ul>\n            </div>\n          ),\n          placement: 'top',\n        },\n        {\n          target: '#help-button',\n          title: 'Still need help?',\n          content: (\n            <span>\n              <p>\n                In case you need any assistance in the future, come\n                back to this help button. Here you&apos;ll find:\n              </p>\n              <ol style={{ lineHeight: '200%' }}>\n                <li>All keyboard shortcuts</li>\n                <li>More about the project</li>\n                <li>\n                  And this tour, if you feel like doing it another\n                  time\n                </li>\n              </ol>\n            </span>\n          ),\n        },\n        {\n          target: '#save-load-buttons',\n          title: 'By the way...',\n          content: (\n            <span>\n              <p>\n                After you&apos;ve done your amazing circuit,\n                don&apos;t forget that you can save it and reload it\n                later!\n              </p>\n              <p>Useful shortcuts:</p>\n              <ul style={{ margin: 0 }}>\n                <li>\n                  <strong>Save:</strong>\n                  <Key size={24}>CTRL</Key>\n                  <Key size={24}>S</Key>\n                </li>\n                <li>\n                  <strong>Load:</strong>\n                  <Key size={24}>CTRL</Key>\n                  <Key size={24}>L</Key>\n                </li>\n              </ul>\n            </span>\n          ),\n        },\n        {\n          target: 'body',\n          title: \"And that's all folks!\",\n          content: (\n            <div>\n              <p>\n                If you want to know more about the project,{' '}\n                <a\n                  href=\"https://github.com/renato-bohler/logossim\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  check us out on GitHub!\n                </a>\n              </p>\n              <GitHubButton\n                type=\"stargazers\"\n                namespace=\"renato-bohler\"\n                repo=\"logossim\"\n              />\n              <p>\n                <strong>You can help us</strong> make logossim better!\n                If you know a little bit of web development, you can\n                quite easily develop new components to the\n                application.\n              </p>\n            </div>\n          ),\n          placement: 'center',\n          showProgress: false,\n          showSkipButton: false,\n          disableOverlayClose: false,\n        },\n      ],\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.recenterTourCircuit);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.recenterTourCircuit);\n  }\n\n  recenterTourCircuit = () => {\n    const { currentStep } = this.state;\n    const { run } = this.props;\n\n    if (!run) return;\n    if (currentStep < 3) return;\n\n    const { recenterCircuit } = this.props;\n    recenterCircuit();\n  };\n\n  callback = ({ type, action, index }) => {\n    const { setTourRunning, loadCircuit, clearCircuit } = this.props;\n\n    // Next step\n    if (type === EVENTS.STEP_AFTER) {\n      if (index === 2 && action === ACTIONS.NEXT) loadCircuit();\n      if (index === 3 && action === ACTIONS.PREV) clearCircuit();\n\n      this.setState({\n        currentStep: index + (action === ACTIONS.NEXT ? 1 : -1),\n      });\n    }\n\n    // Dismiss (skipping, closing or ending tour)\n    if (type === EVENTS.TOUR_END || action === ACTIONS.CLOSE) {\n      clearCircuit();\n      localStorage.setItem('tour-done', true);\n      setTourRunning(false);\n      this.setState({ currentStep: 0 });\n    }\n  };\n\n  render() {\n    const { steps, currentStep } = this.state;\n    const { run } = this.props;\n\n    return (\n      <>\n        <Joyride\n          run={run}\n          steps={steps}\n          stepIndex={currentStep}\n          continuous\n          scrollToFirstStep\n          showProgress\n          showSkipButton\n          disableOverlayClose\n          styles={{\n            tooltip: {\n              borderRadius: 10,\n            },\n            tooltipContent: {\n              fontSize: 14,\n              textAlign: 'left',\n            },\n            buttonBack: {\n              color: 'black',\n              fontSize: 12,\n            },\n            buttonNext: {\n              background: '#6441a5',\n              fontSize: 12,\n              borderRadius: 5,\n            },\n            buttonSkip: {\n              color: '#6441a5',\n              fontSize: 12,\n              border: '1px solid #6441a5',\n              borderRadius: 5,\n            },\n          }}\n          locale={{\n            back: 'Back',\n            close: 'Close',\n            last: 'Got it!',\n            next: 'Next',\n            open: 'Open',\n            skip: 'Skip',\n          }}\n          beaconComponent={Beacon}\n          callback={this.callback}\n        />\n        <div\n          style={{\n            display: run ? 'block' : 'none',\n            position: 'absolute',\n            width: window.innerWidth * 0.75,\n            height: window.innerHeight * 0.5,\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n          }}\n          id=\"tour-circuit-area-wrapper\"\n        />\n        <div\n          style={{\n            display: run ? 'block' : 'none',\n            position: 'absolute',\n            width: DIMENSIONS.width,\n            height: DIMENSIONS.height,\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n          }}\n          id=\"tour-circuit-wrapper\"\n        />\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Tooltip from 'react-tooltip';\n\nimport components, { groupedComponents } from '@logossim/components';\nimport {\n  SimulationEngine,\n  DiagramEngine,\n  Diagram,\n} from '@logossim/core';\n\nimport FileSaver from 'file-saver';\n\nimport {\n  Titlebar,\n  SimulationControlButtons,\n  ComponentSelectButton,\n  ComponentSelect,\n  ComponentEdit,\n  ContextMenus,\n  HelpKeyboardShortcuts,\n  LoadingExample,\n  HelpAbout,\n  Snackbar,\n  Tour,\n} from './ui-components';\nimport tourCircuit, {\n  DIMENSIONS,\n} from './ui-components/Tour/tourCircuit';\n\nimport './App.css';\n\nconst DEFAULT_CIRCUIT_NAME = 'Untitled circuit';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isComponentSelectOpen: false,\n      isComponentEditOpen: false,\n      isHelpKeyboardOpen: false,\n      isHelpAboutOpen: false,\n      componentEdit: null,\n      isTourAvailable: false,\n      isTourRunning: !JSON.parse(localStorage.getItem('tour-done')),\n      circuitName: DEFAULT_CIRCUIT_NAME,\n      circuitCreatedAt: null,\n      isCircuitNameFocused: false,\n      isLoadingExample: false,\n      snackbar: {\n        open: false,\n        message: '',\n        type: 'success',\n        timeout: 0,\n        timeoutID: null,\n      },\n    };\n\n    this.diagram = new DiagramEngine(\n      components,\n      this.areShortcutsAllowed,\n      this.showSnackbar,\n    );\n    this.simulation = new SimulationEngine(components);\n  }\n\n  componentDidMount() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const example = urlParams.get('example');\n\n    if (example === null) {\n      window.addEventListener('load', this.loadHandler);\n    } else {\n      this.loadExample(example);\n    }\n\n    window.addEventListener('keydown', this.shortcutHandler);\n    window.addEventListener('beforeunload', this.unloadHandler);\n\n    this.autoSaveInterval = setInterval(this.autoSave, 5000);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.shortcutHandler);\n    window.addEventListener('load', this.loadHandler);\n    window.removeEventListener('beforeunload', this.unloadHandler);\n\n    clearInterval(this.autoSaveInterval);\n  }\n\n  areShortcutsAllowed = () => {\n    const {\n      isComponentSelectOpen,\n      isComponentEditOpen,\n      isHelpKeyboardOpen,\n      isHelpAboutOpen,\n      isCircuitNameFocused,\n      isTourRunning,\n    } = this.state;\n\n    return !(\n      isComponentSelectOpen ||\n      isComponentEditOpen ||\n      isHelpKeyboardOpen ||\n      isHelpAboutOpen ||\n      isCircuitNameFocused ||\n      isTourRunning\n    );\n  };\n\n  shortcutHandler = event => {\n    const { ctrlKey, shiftKey, code } = event;\n\n    if (!this.areShortcutsAllowed()) return;\n\n    // Add component\n    if (ctrlKey && code === 'KeyA') {\n      event.preventDefault();\n      if (!this.simulation.isStopped()) return;\n\n      this.showAddComponent();\n    }\n\n    // Component configuration\n    if (ctrlKey && code === 'KeyE') {\n      event.preventDefault();\n      if (!this.simulation.isStopped()) return;\n\n      const selectedNodes = this.diagram.getSelectedNodes();\n      if (selectedNodes.length !== 1) return;\n      const node = selectedNodes[0];\n      this.showEditComponent(node);\n    }\n\n    // Play/pause toggle simulation\n    if (!ctrlKey && code === 'Space') {\n      event.preventDefault();\n      if (this.simulation.isRunning()) this.handleClickPause();\n      else this.handleClickStart();\n    }\n\n    // Stop simulation\n    if ((ctrlKey && code === 'Space') || code === 'Escape') {\n      event.preventDefault();\n\n      if (!this.simulation.isStopped()) this.handleClickStop();\n    }\n\n    // Save circuit\n    if (ctrlKey && !shiftKey && code === 'KeyS') {\n      event.preventDefault();\n      this.handleClickSave();\n    }\n\n    // Load circuit\n    if (\n      (ctrlKey && code === 'KeyL') ||\n      (ctrlKey && shiftKey && code === 'KeyS')\n    ) {\n      event.preventDefault();\n      this.handleClickLoad();\n    }\n  };\n\n  isCircuitEmpty = circuit => {\n    if (!circuit) return true;\n\n    return Object.keys(circuit.layers[1].models).length === 0;\n  };\n\n  loadFile = file => {\n    this.setState({\n      circuitName: file.name,\n      circuitCreatedAt: file.createdAt,\n    });\n    this.diagram.load(file.circuit);\n  };\n\n  loadExample = async name => {\n    this.setState({ isLoadingExample: true });\n    const response = await window.fetch(`./examples/${name}.lgsim`);\n    const circuit = await response.json();\n    this.loadFile(circuit);\n    this.setState({ isLoadingExample: false });\n  };\n\n  loadHandler = () => {\n    const lastSaved = JSON.parse(\n      localStorage.getItem('circuit-autosave'),\n    );\n\n    if (this.isCircuitEmpty(lastSaved?.circuit)) {\n      this.setState({ isTourAvailable: true });\n      return;\n    }\n\n    // eslint-disable-next-line no-alert\n    const reload = window.confirm('Reload last unsaved circuit?');\n    if (reload) {\n      this.loadFile(lastSaved);\n    } else {\n      this.setState({ isTourAvailable: true });\n      localStorage.removeItem('circuit-autosave');\n    }\n  };\n\n  shouldWarnUnload = (currentCircuit, lastSavedCircuit) => {\n    if (this.isCircuitEmpty(currentCircuit)) return false;\n\n    return (\n      JSON.stringify(lastSavedCircuit.layers) !==\n      JSON.stringify(currentCircuit.layers)\n    );\n  };\n\n  unloadHandler = event => {\n    const lastSaved = JSON.parse(\n      localStorage.getItem('last-saved-circuit'),\n    );\n    const file = this.generateFile();\n\n    if (this.shouldWarnUnload(file.circuit, lastSaved.circuit)) {\n      if (this.simulation.isStopped()) {\n        localStorage.setItem(\n          'circuit-autosave',\n          JSON.stringify(file),\n        );\n      }\n      // eslint-disable-next-line no-param-reassign\n      event.returnValue =\n        'You have unsaved changes. Sure you want to leave?';\n    }\n  };\n\n  generateFile = () => {\n    const { circuitName, circuitCreatedAt } = this.state;\n    const circuit = this.diagram.serialize();\n\n    return {\n      id: circuit.id,\n      name: circuitName,\n      createdAt: circuitCreatedAt || new Date(),\n      updatedAt: new Date(),\n      circuit,\n    };\n  };\n\n  autoSave = () => {\n    const file = this.generateFile();\n\n    if (file.circuit.id === 'tour-circuit') return;\n    if (this.isCircuitEmpty(file.circuit)) return;\n    if (!this.simulation.isStopped()) return;\n\n    localStorage.setItem('circuit-autosave', JSON.stringify(file));\n  };\n\n  synchronizeSimulation = () => {\n    const diff = this.simulation.getDiff();\n\n    // Handles components diff\n    Object.entries(diff.components).forEach(([id, componentDiff]) =>\n      this.diagram.synchronizeComponent(id, componentDiff),\n    );\n\n    // Handles link value diff\n    Object.entries(diff.links).forEach(([id, value]) =>\n      this.diagram.synchronizeLink(id, value),\n    );\n\n    this.simulation.clearDiff();\n    this.diagram.repaint();\n  };\n\n  renderSimulation = () => {\n    if (!this.simulation.isRunning()) return;\n\n    this.synchronizeSimulation();\n\n    requestAnimationFrame(this.renderSimulation);\n  };\n\n  handleCircuitNameChange = event => {\n    event.stopPropagation();\n    event.preventDefault();\n    this.setState({ circuitName: event.target.value });\n  };\n\n  handleCircuitNameFocus = event => {\n    this.setState({ isCircuitNameFocused: true });\n    if (event.target.value === DEFAULT_CIRCUIT_NAME)\n      event.target.select();\n  };\n\n  handleCircuitNameBlur = () =>\n    this.setState({ isCircuitNameFocused: false });\n\n  handleClickSave = () => {\n    const { circuitCreatedAt } = this.state;\n    if (!circuitCreatedAt)\n      this.setState({ circuitCreatedAt: new Date() });\n\n    const file = JSON.stringify(this.generateFile(), null, 2);\n    const blob = new Blob([file], {\n      type: 'application/json',\n    });\n\n    const { circuitName } = this.state;\n    const filename = circuitName.replace(/[/|\\\\:*?\"<>]/g, '');\n    localStorage.setItem('last-saved-circuit', file);\n\n    FileSaver.saveAs(blob, `${filename}.lgsim`);\n  };\n\n  handleClickLoad = () =>\n    document.getElementById('file-input').click();\n\n  handleFileLoad = event => {\n    const {\n      target: { files },\n    } = event;\n\n    if (files.length !== 1) return;\n\n    const handleError = () =>\n      this.showSnackbar(\n        `Error loading circuit file:\\n${files[0].name}`,\n      );\n\n    const fr = new FileReader();\n    fr.onerror = handleError;\n    fr.onload = e => {\n      try {\n        const file = JSON.parse(e.target.result);\n        this.loadFile(file);\n      } catch (exception) {\n        handleError();\n      }\n    };\n    fr.readAsText(files.item(0));\n  };\n\n  handleClickStart = () => {\n    const serialized = JSON.stringify(this.diagram.serialize());\n    localStorage.setItem('circuit-autosave', serialized);\n\n    this.diagram.clearSelection();\n    this.diagram.setLocked(true);\n\n    this.simulation.start(this.diagram.getModel());\n    this.renderSimulation();\n    this.forceUpdate();\n  };\n\n  handleClickPause = () => {\n    this.simulation.pause();\n    this.forceUpdate();\n  };\n\n  handleClickStop = async () => {\n    await this.simulation.stop();\n    this.diagram.clearAllValues();\n    this.diagram.setLocked(false);\n    this.forceUpdate();\n    this.simulation.clearDiff();\n  };\n\n  showAddComponent = () =>\n    this.setState({\n      isComponentSelectOpen: true,\n    });\n\n  hideAddComponent = () =>\n    this.setState({\n      isComponentSelectOpen: false,\n    });\n\n  showEditComponent = componentEdit => {\n    this.diagram.clearSelection();\n\n    this.setState({\n      isComponentEditOpen: true,\n      componentEdit,\n    });\n  };\n\n  hideEditComponent = () =>\n    this.setState({\n      isComponentEditOpen: false,\n      componentEdit: null,\n    });\n\n  rotateComponentBy = (component, increment) => {\n    if (component.canRotate) {\n      const configurations = { ...component.configurations };\n      configurations.ORIENTATION = (((configurations.ORIENTATION + increment) % 4) + 4) % 4;\n      this.diagram.handleComponentEdit(component, configurations)\n    }\n  }\n\n  rotateComponentLeft = component => this.rotateComponentBy(component, -1)\n\n  rotateComponentRight = component => this.rotateComponentBy(component, 1)\n\n  setTourRunning = isTourRunning => this.setState({ isTourRunning });\n\n  showHelpTour = () => this.setTourRunning(true);\n\n  showHelpKeyboard = () =>\n    this.setState({ isHelpKeyboardOpen: true });\n\n  hideHelpKeyboard = () =>\n    this.setState({ isHelpKeyboardOpen: false });\n\n  showHelpAbout = () => this.setState({ isHelpAboutOpen: true });\n\n  hideHelpAbout = () => this.setState({ isHelpAboutOpen: false });\n\n  showSnackbar = async (message, type = 'error') => {\n    const { snackbar } = this.state;\n    const timeout = 3000 + message.split(' ').length * 50;\n\n    if (snackbar.open) {\n      clearTimeout(snackbar.timeoutID);\n      this.hideSnackbar();\n      await new Promise(res => setTimeout(res, 500));\n    }\n\n    this.setState({\n      snackbar: {\n        open: true,\n        message,\n        type,\n        timeout,\n        timeoutID: setTimeout(this.hideSnackbar, timeout),\n      },\n    });\n  };\n\n  hideSnackbar = () => {\n    const { snackbar } = this.state;\n    clearTimeout(snackbar.timeoutID);\n\n    this.setState(state => ({\n      snackbar: {\n        ...state.snackbar,\n        open: false,\n      },\n    }));\n  };\n\n  handleLoadTourCircuit = () => {\n    this.circuitBeforeTour = this.generateFile();\n    this.loadFile(tourCircuit);\n    this.handleCenterTourCircuitOffset();\n  };\n\n  handleUnloadTourCircuit = () => {\n    if (!this.circuitBeforeTour) return;\n\n    this.loadFile(this.circuitBeforeTour);\n    this.circuitBeforeTour = null;\n  };\n\n  handleCenterTourCircuitOffset = () => {\n    this.diagram\n      .getModel()\n      .setOffset(\n        (window.innerWidth - DIMENSIONS.width) / 2,\n        (window.innerHeight - DIMENSIONS.height) / 2,\n      );\n    this.diagram.realignGrid();\n    this.diagram.repaint();\n  };\n\n  render() {\n    const {\n      isComponentSelectOpen,\n      isComponentEditOpen,\n      isHelpKeyboardOpen,\n      isHelpAboutOpen,\n      componentEdit,\n      isTourAvailable,\n      isTourRunning,\n      circuitName,\n      isCircuitNameFocused,\n      isLoadingExample,\n      snackbar,\n    } = this.state;\n\n    return (\n      <>\n        <Titlebar\n          circuitName={circuitName}\n          isCircuitNameFocused={isCircuitNameFocused}\n          handleChangeCircuitName={this.handleCircuitNameChange}\n          handleFocusCircuitName={this.handleCircuitNameFocus}\n          handleBlurCircuitName={this.handleCircuitNameBlur}\n          handleClickSave={this.handleClickSave}\n          handleFileLoad={this.handleFileLoad}\n          handleClickKeyboardShortcuts={this.showHelpKeyboard}\n          handleClickRedoTour={this.showHelpTour}\n          handleClickAbout={this.showHelpAbout}\n          disabled={!this.simulation.isStopped()}\n        />\n        <SimulationControlButtons\n          state={this.simulation.getState()}\n          handleClickStart={this.handleClickStart}\n          handleClickPause={this.handleClickPause}\n          handleClickStop={this.handleClickStop}\n        />\n        <ComponentSelectButton\n          handleClick={this.showAddComponent}\n          disabled={!this.simulation.isStopped()}\n        />\n\n        <ComponentSelect\n          isOpen={isComponentSelectOpen}\n          groups={groupedComponents}\n          handleClose={this.hideAddComponent}\n          handleComponentDrop={this.diagram.handleComponentDrop}\n        />\n        <ComponentEdit\n          isOpen={isComponentEditOpen}\n          components={components}\n          component={componentEdit}\n          handleClose={this.hideEditComponent}\n          handleComponentEdit={this.diagram.handleComponentEdit}\n        />\n\n        <HelpKeyboardShortcuts\n          isOpen={isHelpKeyboardOpen}\n          handleClose={this.hideHelpKeyboard}\n        />\n        <HelpAbout\n          isOpen={isHelpAboutOpen}\n          handleClose={this.hideHelpAbout}\n        />\n        {isTourAvailable && (\n          <Tour\n            run={isTourRunning}\n            setTourRunning={this.setTourRunning}\n            loadCircuit={this.handleLoadTourCircuit}\n            clearCircuit={this.handleUnloadTourCircuit}\n            recenterCircuit={this.handleCenterTourCircuitOffset}\n          />\n        )}\n\n        {isLoadingExample && <LoadingExample />}\n        <Diagram engine={this.diagram} />\n\n        <ContextMenus\n          duplicateSelected={this.diagram.duplicateSelected}\n          cutSelected={this.diagram.cutSelected}\n          copySelected={this.diagram.copySelected}\n          pasteSelected={this.diagram.pasteSelected}\n          deleteSelected={this.diagram.deleteSelected}\n          undo={this.diagram.undo}\n          redo={this.diagram.redo}\n          zoomIn={this.diagram.zoomIn}\n          zoomOut={this.diagram.zoomOut}\n          rotateLeft={this.rotateComponentLeft}\n          rotateRight={this.rotateComponentRight}\n          configureComponent={this.showEditComponent}\n        />\n\n        <Tooltip id=\"tooltip\" globalEventOff=\"click\" />\n        <Snackbar\n          open={snackbar.open}\n          type={snackbar.type}\n          message={snackbar.message}\n          timeout={snackbar.timeout}\n          handleClose={this.hideSnackbar}\n        />\n      </>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (\n    process.env.NODE_ENV === 'production' &&\n    'serviceWorker' in navigator\n  ) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\n        'Error during service worker registration:',\n        error,\n      );\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null &&\n          contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-disable no-extend-native */\nArray.prototype.asArray = function arrayAsArray() {\n  return this;\n};\n\nArray.prototype.asNumber = function arrayAsNumber() {\n  if (this.some(bit => bit === 'e')) return 'e';\n  if (this.some(bit => bit === 'x')) return 'x';\n\n  if (this.some(bit => bit !== 0 && bit !== 1))\n    throw new Error(\n      '[logossim] Array cannot be converted to number because it contains invalid values',\n    );\n\n  return this.slice()\n    .reverse()\n    .reduce((acc, curr, index) => acc + curr * 2 ** index, 0);\n};\n\nArray.prototype.transpose = function transpose() {\n  return this[0].map((x1, i) => this.map(x2 => x2[i]));\n};\n\nNumber.prototype.asNumber = function numberAsNumber() {\n  return Number(this);\n};\n\nNumber.prototype.asArray = function numberAsArray(dataBits) {\n  if (!dataBits)\n    throw new Error(\n      '[logossim] To transform a number to array, you need to pass as argument the length of the array',\n    );\n\n  const result = [...this.toString(2)].map(Number);\n\n  return Array(dataBits)\n    .fill(0)\n    .concat(result)\n    .slice(result.length);\n};\n\nString.prototype.asArray = function stringAsArray(dataBits) {\n  if (!dataBits)\n    throw new Error(\n      '[logossim] To transform a number to array, you need to pass as argument the length of the array',\n    );\n\n  return [...this.padStart(dataBits, 0)].map(char => {\n    if (char === '0') return 0;\n    if (char === '1') return 1;\n    return char;\n  });\n};\n\nString.prototype.parseBinary = function parseBinary(\n  dataBits,\n  arrayLength,\n  fillWith = 0,\n) {\n  if (!dataBits)\n    throw new Error(\n      '[logossim] To parse a binary, you need to pass the value length in bits as first argument.',\n    );\n\n  if (!arrayLength)\n    throw new Error(\n      '[logossim] To parse a binary, you need to pass the result array length as second argument.',\n    );\n\n  const sanitize = /[^01]/g;\n  const chunk = new RegExp(`.{1,${dataBits}}`, 'g');\n\n  const content = (\n    this.replace(sanitize, '').match(chunk) || []\n  ).map(value => parseInt(value, 2));\n\n  return Array(arrayLength)\n    .fill(fillWith)\n    .map((original, i) => {\n      const value = content[i];\n      if (!value) return original;\n      return value;\n    });\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport '@logossim/core/common/prototype';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}