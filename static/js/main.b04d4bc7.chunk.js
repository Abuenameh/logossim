(this["webpackJsonp@logossim/page"]=this["webpackJsonp@logossim/page"]||[]).push([[0],{261:function(e,t,n){e.exports=function(){return new Worker(n.p+"SimulationWorker.878fd11fb50547bc230f.js")}},267:function(e){e.exports=JSON.parse('{"a":"0.0.1"}')},271:function(e,t,n){e.exports=n.p+"static/media/bifurcation.e3ec32b9.gif"},272:function(e,t,n){e.exports=n.p+"static/media/context-menu.94343183.gif"},273:function(e,t,n){e.exports=n.p+"static/media/simulation.2d0f910c.gif"},274:function(e,t,n){e.exports=n.p+"static/media/wire.e7e521da.gif"},277:function(e,t,n){e.exports=n(527)},526:function(e,t,n){},527:function(e,t,n){"use strict";n.r(t);var i,a,o,r=n(0),l=n.n(r),c=n(32),s=n.n(c),u=n(5),d=n(23),p=n(30),f=n.n(p),m=n(58),h=n(10),g=n(14),b=n(12),v=n(11),y=n(57),E=n(13),x=n(18),O=n(15),k=n(16),w=n(27),P=n.n(w),j=n(39),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e instanceof k.Point?new k.Point(Math.round(e.x/t)*t,Math.round(e.y/t)*t):Math.round(e/t)*t},C=function(e,t){return e&&t&&Math.round(e.x)===Math.round(t.x)&&Math.round(e.y)===Math.round(t.y)},T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return Math.round(e.x)})).every((function(e,t,n){return e===n[0]}))},A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return Math.round(e.y)})).every((function(e,t,n){return e===n[0]}))},I=function(){return T.apply(void 0,arguments)||A.apply(void 0,arguments)},L=function(e,t){var n=function(e,t){return Math.hypot(e.x-t.x,e.y-t.y)},i=function(e,t){var i=t.A,a=t.B,o=new k.Point(a.x-i.x,a.y-i.y),r=new k.Point(i.x-e.x,i.y-e.y),l=-(o.x*r.x+o.y*r.y)/(Math.pow(o.x,2)+Math.pow(o.y,2));if(l>=0&&l<=1){var c=new k.Point((1-l)*i.x+l*a.x,(1-l)*i.y+l*a.y);return{point:c,distance:n(e,c)}}var s=n(e,i),u=n(e,a);return s<=u?{point:i,distance:s}:{point:a,distance:u}};if(!t.hasMiddlePoint())return i(e,{A:t.getFirstPosition(),B:t.getLastPosition()}).point;var a=i(e,{A:t.getFirstPosition(),B:t.getMiddlePosition()}),o=i(e,{A:t.getMiddlePosition(),B:t.getLastPosition()});return a.distance<=o.distance?a.point:o.point},N=function(e,t){var n=t.A,i=t.B;if(T(n,e,i)){var a=Math.max(n.y,i.y);return Math.min(n.y,i.y)<=e.y&&e.y<=a}if(A(n,e,i)){var o=Math.max(n.x,i.x);return Math.min(n.x,i.x)<=e.x&&e.x<=o}return!1},B=function(e,t){return function(e,t){return N(e,{A:t.getFirstPosition(),B:t.getSecondPosition()})}(e,t)||function(e,t){return!!t.hasMiddlePoint()&&N(e,{A:t.getSecondPosition(),B:t.getLastPosition()})}(e,t)},M=function(e,t){var n=e.getLastPoint().getPosition();return Object.values(t.getModel().getLinkLayers()[0].getLinks()).find((function(t){return t.getID()!==e.getID()&&B(n,t)}))},z=function(e,t){return"Incompatible bit widths!\n\nSource: ".concat(e.getBits()," bit").concat(e.getBits()>1?"s":"","\n\nTarget: ").concat(t.getBits()," bit").concat(t.getBits()>1?"s":"")},D=n(43),R={1:1,2:3,4:15,8:255,16:65535},F=function(e){return null===e||Array.isArray(e)&&e.every((function(e){return"number"===typeof e}))},W=function(e){return"e"===e||Array.isArray(e)&&e.some((function(e){return"e"===e}))},H=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,Object(u.a)({type:"link"},e))).bifurcations=[],i.bifurcationSource=null,i.bifurcationTarget=null,i.value=null,i.bits=null,i}return Object(g.a)(n,[{key:"getGridSize",value:function(){return this.getParent().getParent().getOptions().gridSize}},{key:"addLabel",value:function(e){if(e instanceof w.LabelModel)return Object(x.a)(Object(O.a)(n.prototype),"addLabel",this).call(this,e);var t=new j.DefaultLabelModel;return t.setLabel(e),Object(x.a)(Object(O.a)(n.prototype),"addLabel",this).call(this,t)}},{key:"setBifurcationSource",value:function(e){this.bifurcationSource=e}},{key:"getBifurcationSource",value:function(){return this.bifurcationSource}},{key:"setBifurcationTarget",value:function(e){this.bifurcationTarget=e}},{key:"getBifurcationTarget",value:function(){return this.bifurcationTarget}},{key:"isBifurcation",value:function(){return!(!this.getBifurcationSource()&&!this.getBifurcationTarget())}},{key:"addBifurcation",value:function(e){this.bifurcations.find((function(t){return t.getID()===e.getID()}))||this.bifurcations.push(e)}},{key:"removeBifurcation",value:function(e){this.bifurcations=this.bifurcations.filter((function(t){return t.getID()!==e.getID()}))}},{key:"getBifurcations",value:function(){return this.bifurcations}},{key:"getAllBifurcations",value:function(){var e=Object(E.a)(this.bifurcations);return this.bifurcations.forEach((function(t){return e.push(t.getAllBifurcations())})),e.flat(1/0)}},{key:"getSelectionEntities",value:function(){return[].concat(Object(E.a)(Object(x.a)(Object(O.a)(n.prototype),"getSelectionEntities",this).call(this)),Object(E.a)(this.bifurcations))}},{key:"setSelected",value:function(e){Object(x.a)(Object(O.a)(n.prototype),"setSelected",this).call(this,e),this.bifurcations.forEach((function(t){return t.setSelected(e)})),this.getSourcePort()&&this.getSourcePort().setSelected(e),this.getTargetPort()&&this.getTargetPort().setSelected(e)}},{key:"remove",value:function(){this.bifurcations.forEach((function(e){return e.remove()})),this.bifurcationSource&&this.bifurcationSource.removeBifurcation(this),this.bifurcationTarget&&this.bifurcationTarget.removeBifurcation(this),Object(x.a)(Object(O.a)(n.prototype),"remove",this).call(this)}},{key:"serialize",value:function(){return Object(u.a)(Object(u.a)({},Object(x.a)(Object(O.a)(n.prototype),"serialize",this).call(this)),{},{bifurcations:this.bifurcations.map((function(e){return e.getID()})),bifurcationSource:this.bifurcationSource?this.bifurcationSource.getID():null,bifurcationTarget:this.bifurcationTarget?this.bifurcationTarget.getID():null,value:this.value,bits:this.bits})}},{key:"deserialize",value:function(e){var t=this;Object(x.a)(Object(O.a)(n.prototype),"deserialize",this).call(this,e);var i=e.getModel,a=e.registerModel,o=e.data,r=o.bifurcationSource,l=o.bifurcationTarget,c=o.bifurcations,s=o.bits;a(this),requestAnimationFrame((function(){t.bits=s,t.points=e.data.points.map((function(e){return new w.PointModel({link:t,position:new k.Point(e.x,e.y)})})),c.forEach((function(e){return i(e).then((function(e){return t.addBifurcation(e)}))})),r&&i(r).then((function(e){return t.setBifurcationSource(e)})),l&&i(l).then((function(e){return t.setBifurcationTarget(e)})),e.engine.repaintCanvas()}))}},{key:"addPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(x.a)(Object(O.a)(n.prototype),"addPoint",this).call(this,e,t),e}},{key:"generatePoint",value:function(e,t){var i=Object(x.a)(Object(O.a)(n.prototype),"generatePoint",this).call(this,e,t);return i.setPosition(S(e,this.getGridSize()),S(t,this.getGridSize())),i}},{key:"getMiddlePoint",value:function(){return this.hasMiddlePoint()?this.getPoints()[1]:null}},{key:"getSecondPoint",value:function(){return this.getPoints()[1]}},{key:"getSecondLastPoint",value:function(){var e=this.getPoints();return e[e.length-2]}},{key:"getFirstPosition",value:function(){return S(this.getFirstPoint().getPosition(),this.getGridSize())}},{key:"getSecondPosition",value:function(){return S(this.getSecondPoint().getPosition(),this.getGridSize())}},{key:"getMiddlePosition",value:function(){return this.hasMiddlePoint()?S(this.getMiddlePoint().getPosition(),this.getGridSize()):null}},{key:"getSecondLastPosition",value:function(){return S(this.getSecondLastPoint().getPosition(),this.getGridSize())}},{key:"getLastPosition",value:function(){return S(this.getLastPoint().getPosition(),this.getGridSize())}},{key:"hasMiddlePoint",value:function(){return 3===this.getPoints().length}},{key:"isStraight",value:function(){if(!this.hasMiddlePoint())return!0;var e=this.getFirstPosition(),t=this.getMiddlePosition(),n=this.getLastPosition();return!!I(e,t,n)}},{key:"getBits",value:function(){return this.bits}},{key:"setBits",value:function(e){if(![1,2,4,8,16].includes(e))throw new Error("[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16");this.bits=e}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}},{key:"getColor",value:function(){return this.isSelected()?"var(--link-selected)":F(this.value,this.bits)?null===this.value?"var(--link-".concat(this.bits||1,"-bit-color)"):"var(--value-".concat(Math.round(this.value.asNumber()/R[this.bits]*10),")"):W(this.value)?"var(--value-error)":"var(--value-floating)"}},{key:"getLineWidth",value:function(){return"var(--link-".concat(this.bits||1,"-bit-width)")}},{key:"getPointRadius",value:function(){return getComputedStyle(document.body).getPropertyValue("--link-".concat(this.bits||1,"-bit-join-radius"))}}]),n}(w.LinkModel),_=function(e,t,n){if(0!==e&&1!==e&&"x"!==e&&"e"!==e)throw new Error("[logossim] Invalid default ".concat(t," value provided for port `").concat(n,"`. Should be either 0, 1, 'x' or 'e'."))},V=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,n),(e=t.call(this,Object(u.a)({type:"Port",maximumLinks:3},i))).value=null,e.input=null,e.bits=null,e.defaultFloatingValue=null,e.defaultErrorValue=null,e.orientation=0,e.complemented=!1,e.offset=0,e.length=25,e}return Object(g.a)(n,[{key:"serialize",value:function(){return Object(u.a)(Object(u.a)({},Object(x.a)(Object(O.a)(n.prototype),"serialize",this).call(this)),{},{input:this.input,value:this.value,bits:this.bits,defaultFloatingValue:this.defaultFloatingValue,defaultErrorValue:this.defaultErrorValue,orientation:this.orientation,complemented:this.complemented,offset:this.offset,length:this.length})}},{key:"deserialize",value:function(e,t){Object(x.a)(Object(O.a)(n.prototype),"deserialize",this).call(this,e,t),this.value=e.data.value,this.input=e.data.input,this.bits=e.data.bits,this.defaultFloatingValue=e.data.defaultFloatingValue,this.defaultErrorValue=e.data.defaultErrorValue,this.orientation=e.data.orientation,this.complemented=e.data.complemented,this.offset=e.data.offset,this.length=e.data.length}},{key:"setOrientation",value:function(e){this.orientation=e}},{key:"getOrientation",value:function(){return this.orientation}},{key:"setComplemented",value:function(e){this.complemented=e}},{key:"isComplemented",value:function(){return this.complemented}},{key:"setOffset",value:function(e){this.offset=e}},{key:"getOffset",value:function(){return this.offset}},{key:"setLength",value:function(e){this.length=e}},{key:"getLength",value:function(){return this.length}},{key:"setAsInput",value:function(){this.input=!0}},{key:"setAsOutput",value:function(){this.input=!1}},{key:"isInput",value:function(){return!0===this.input}},{key:"isOutput",value:function(){return!1===this.input}},{key:"getBits",value:function(){return this.bits}},{key:"setBits",value:function(e){if(![1,2,4,8,16].includes(e))throw new Error("[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16");this.bits=e}},{key:"setDefaultFloatingValue",value:function(e){_(e,"floating",this.getName()),this.defaultFloatingValue=e}},{key:"getDefaultFloatingValue",value:function(){return this.defaultFloatingValue}},{key:"setDefaultErrorValue",value:function(e){_(e,"error",this.getName()),this.defaultErrorValue=e}},{key:"getDefaultErrorValue",value:function(){return this.defaultErrorValue}},{key:"getValue",value:function(){var e=this;return null===this.value?Array(this.bits).fill(0):this.value.map((function(t){return"x"===t?e.getDefaultFloatingValue():"e"===t?e.getDefaultErrorValue():t}))}},{key:"setValue",value:function(e){this.value=e}},{key:"isNewLinkAllowed",value:function(){return Object.keys(this.getLinks()).length<this.getMaximumLinks()}},{key:"canLinkToPort",value:function(e){return e.isNewLinkAllowed()&&this.getID()!==e.getID()}},{key:"createLinkModel",value:function(){if(this.isNewLinkAllowed()){var e=new H;return e.setBits(this.bits),e}return null}},{key:"getMainLink",value:function(){var e=Object.values(this.getLinks());return e.length>0?e[0]:null}},{key:"getColor",value:function(){var e=this.getMainLink();return e?e.getColor():"var(--port-unconnected)"}},{key:"getLineWidth",value:function(){return getComputedStyle(document.body).getPropertyValue("--link-1-bit-width")}},{key:"getLineColor",value:function(){return getComputedStyle(document.body).getPropertyValue("--link-".concat(this.bits||1,"-bit-color"))}},{key:"getPointRadius",value:function(){return getComputedStyle(document.body).getPropertyValue("--link-".concat(this.bits||1,"-bit-join-radius"))}}]),n}(w.PortModel),U=function(){function e(){Object(h.a)(this,e),this.context=new AudioContext,this.destination=this.context.destination,this.audios={}}return Object(g.a)(e,[{key:"create",value:function(e){var t=e.id,n=e.frequency,i=void 0===n?1e3:n,a=e.waveform,o=void 0===a?"sine":a,r=this.context.createGain();r.gain.value=.5;var l=this.context.createOscillator();l.type=o,l.frequency.value=i,l.connect(r),l.start(),this.audios[t]={gainNode:r,oscillator:l}}},{key:"play",value:function(e){var t=e.id;try{this.getGainNode(t).connect(this.destination)}catch(n){}}},{key:"pause",value:function(e){var t=e.id;try{this.getGainNode(t).disconnect(this.destination)}catch(n){}}},{key:"setFrequency",value:function(e){var t=e.id,n=e.frequency;this.getOscillator(t).frequency.value=n}},{key:"setWaveform",value:function(e){var t=e.id,n=e.waveform;this.getOscillator(t).type=n}},{key:"handlePayload",value:function(e){switch(e.command){case"create":this.create(e);break;case"play":this.play(e);break;case"pause":this.pause(e);break;case"setFrequency":this.setFrequency(e);break;case"setWaveform":this.setWaveform(e)}}},{key:"getOscillator",value:function(e){return this.getAudio(e).oscillator}},{key:"getGainNode",value:function(e){return this.getAudio(e).gainNode}},{key:"getAudio",value:function(e){var t=this.audios[e];if(!t)throw new Error("[logossim] Audio with id ".concat(e," was not found."));return t}},{key:"cleanUp",value:function(){Object.values(this.audios).forEach((function(e){return e.oscillator.stop()})),this.audios=[]}}]),e}(),K=function(e){return e.map((function(e){return{id:e.getID(),type:e.getType(),configurations:e.configurations,ports:(n=e.ports,Object.values(n).map((function(e){return{id:e.getID(),name:e.getName(),input:e.isInput(),bits:e.getBits(),defaultFloatingValue:e.getDefaultFloatingValue(),defaultErrorValue:e.getDefaultErrorValue()}}))),properties:(t=e,Object.keys(t).filter((function(e){return!["listeners","options","position","ports","width","height","configurations","parent"].includes(e)}))).reduce((function(t,n){return Object(u.a)(Object(u.a)({},t),{},Object(D.a)({},n,e[n]))}),{})};var t,n}))},X=function(e){return e?{componentId:e.getParent().getID(),name:e.getName(),input:e.isInput()}:null},Y=function(e){return e?e.getID():null},Z=function(e,t){return{models:(i=t,i.map((function(e){var t,n=e.type,i=e.Model;return{type:n,methods:(t=i,Object.getOwnPropertyNames(t.prototype).filter((function(e){return!["constructor"].includes(e)}))).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(D.a)({},t,i.prototype[t].toString()))}),{})}}))),links:(n=Object.values(e.getActiveLinkLayer().getModels()),n.map((function(e){return{id:e.getID(),source:X(e.getSourcePort()),target:X(e.getTargetPort()),bifurcations:e.getBifurcations().map((function(e){return e.getID()})),bifurcation:{source:Y(e.getBifurcationSource()),target:Y(e.getBifurcationTarget())},isBifurcation:e.isBifurcation(),bits:e.getBits()}}))),components:K(Object.values(e.getActiveNodeLayer().getModels()))};var n,i},G=n(261),Q=new(n.n(G).a),J=function(){function e(t){var n=this;Object(h.a)(this,e),this.onSimulationMessage=function(e){var t=e.data,i=t.type,a=t.payload;"diff"===i&&n.appendDiff(a),"audio"===i&&n.audioEngine.handlePayload(a),"clear"===i&&n.audioEngine.cleanUp()},this.components=t,this.worker=Q,this.worker.addEventListener("message",this.onSimulationMessage),this.audioEngine=new U,this.state="stopped",this.clearDiff()}return Object(g.a)(e,[{key:"start",value:function(e){this.worker.postMessage({command:"start",diagram:"stopped"===this.state?Z(e,this.components):void 0}),this.state="started"}},{key:"pause",value:function(){this.worker.postMessage({command:"pause"}),this.state="paused"}},{key:"stop",value:function(){var e=Object(m.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.worker.addEventListener("message",(function n(i){"clear"===i.data.type&&(t.worker.removeEventListener("message",n),t.state="stopped",e())})),t.worker.postMessage({command:"stop"})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getState",value:function(){return this.state}},{key:"isRunning",value:function(){return"started"===this.state}},{key:"isPaused",value:function(){return"paused"===this.state}},{key:"isStopped",value:function(){return"stopped"===this.state}},{key:"getDiff",value:function(){return this.diff}},{key:"clearDiff",value:function(){this.diff={components:{},links:{}}}},{key:"appendDiff",value:function(e){this.diff={components:Object(u.a)(Object(u.a)({},this.diff.components),e.components),links:Object(u.a)(Object(u.a)({},this.diff.links),e.links)}}}]),e}(),q=function(e){return e instanceof V?e:new V({name:e})},$=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";return Object(h.a)(this,n),(e=t.call(this,{type:a})).canRotate=!1,e.initialize(i),e.configurations=i,e}return Object(g.a)(n,[{key:"serialize",value:function(){return Object(u.a)(Object(u.a)({},Object(x.a)(Object(O.a)(n.prototype),"serialize",this).call(this)),{},{configurations:this.configurations})}},{key:"addInputPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.bits,a=t.floating,o=t.error,r=t.orientation,l=t.complemented,c=t.offset,s=t.length,u=q(e);u.setAsInput(),"string"===typeof e&&(u.setBits(i||1),u.setDefaultFloatingValue(null!==a&&void 0!==a?a:"x"),u.setDefaultErrorValue(null!==o&&void 0!==o?o:"e"),u.setOrientation(null!==r&&void 0!==r?r:0),u.setComplemented(null!==l&&void 0!==l&&l),u.setOffset(null!==c&&void 0!==c?c:0),u.setLength(null!==s&&void 0!==s?s:25)),Object(x.a)(Object(O.a)(n.prototype),"addPort",this).call(this,u)}},{key:"addOutputPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.bits,a=t.orientation,o=t.complemented,r=t.offset,l=t.length,c=q(e);c.setAsOutput(),"string"===typeof e&&(c.setBits(i||1),c.setDefaultFloatingValue("x"),c.setDefaultErrorValue("e"),c.setOrientation(null!==a&&void 0!==a?a:0),c.setComplemented(null!==o&&void 0!==o&&o),c.setOffset(null!==r&&void 0!==r?r:0),c.setLength(null!==l&&void 0!==l?l:25)),Object(x.a)(Object(O.a)(n.prototype),"addPort",this).call(this,c)}},{key:"addPort",value:function(e,t){var n=q(e);if(n.isInput())this.addInputPort(n,t);else{if(!n.isOutput())throw new Error("[logossim] Use either `addInputPort` or `addOutputPort`");this.addOutputPort(n,t)}}},{key:"removePort",value:function(e){var t=q(e);Object(x.a)(Object(O.a)(n.prototype),"removePort",this).call(this,t)}},{key:"getInputPorts",value:function(){return Object.fromEntries(Object.entries(this.getPorts()).filter((function(e){return Object(d.a)(e,2)[1].isInput()})))}},{key:"getOutputPorts",value:function(){return Object.fromEntries(Object.entries(this.getPorts()).filter((function(e){return!Object(d.a)(e,2)[1].isInput()})))}},{key:"getAllLinks",value:function(){return Object.values(this.getPorts()).map((function(e){return e.getMainLink()})).filter((function(e){return!!e})).reduce((function(e,t){return[].concat(Object(E.a)(e),[t],Object(E.a)(t.getAllBifurcations()))}),[])}},{key:"clone",value:function(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=(e=Object(x.a)(Object(O.a)(n.prototype),"clone",this)).call.apply(e,[this].concat(i));return o.setPosition(new k.Point(this.getX()+15,this.getY()+15)),o}},{key:"initialize",value:function(){}},{key:"onSimulationStart",value:function(){}},{key:"onSimulationPause",value:function(){}},{key:"onSimulationStop",value:function(){}},{key:"step",value:function(){}},{key:"emit",value:function(e){!function(e,t){Q.postMessage({command:"emit",emitted:{from:e,value:t}})}(this.getID(),e)}},{key:"createAudio",value:function(){}}]),n}(w.NodeModel),ee=n(17),te=n(6),ne=l.a.createContext(),ie=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i,a=e.type,o=e.name,r=e.description,l=e.group,c=e.configurations,s=void 0===c?[]:c,u=e.model,d=e.widget,p=e.icon;return Object(h.a)(this,n),(i=t.call(this,a)).name=o,i.description=r,i.group=l,i.configurations=s,i.Model=u,i.Widget=d,i.Icon=p,i}return Object(g.a)(n,[{key:"generateReactWidget",value:function(e){var t=this.Widget,n=e.model;return l.a.createElement(ee.MenuProvider,{id:"component",storeRef:!1,data:{component:n}},l.a.createElement(ne.Provider,{value:n},l.a.createElement(t,{model:n})))}},{key:"generateModel",value:function(e){var t=this.Model,n=e.initialConfig;return new t(n.configurations,n.type)}}]),n}(te.AbstractReactFactory),ae=n(1),oe=n(2),re=l.a.createContext(),le=n(275),ce=["disabled"],se=oe.a.div.attrs((function(e){var t=e.disabled,n=Object(le.a)(e,ce);return Object(u.a)(Object(u.a)({},n),{},{onDragOver:function(e){return e.preventDefault()},onDrop:function(e){if(!t){var i=JSON.parse(e.dataTransfer.getData("component"));n.handleComponentDrop(e,i)}}})}))(i||(i=Object(ae.a)(["\n  width: 100vw;\n  height: 100vh;\n"]))),ue=Object(oe.a)(te.CanvasWidget)(a||(a=Object(ae.a)(["\n  height: 100%;\n  width: 100%;\n"]))),de=function(e){var t=e.engine;return l.a.createElement(ee.MenuProvider,{id:"diagram",storeRef:!1,data:{test:1}},l.a.createElement(se,{handleComponentDrop:function(){return t.handleComponentDrop.apply(t,arguments)},disabled:t.isLocked()},l.a.createElement(re.Provider,{value:t},l.a.createElement(ue,{engine:t.getEngine()}))))},pe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e)).refPaths=[],i}return Object(g.a)(n,[{key:"componentDidUpdate",value:function(){this.updateRenderedPaths()}},{key:"componentDidMount",value:function(){this.updateRenderedPaths()}},{key:"componentWillUnmount",value:function(){this.clearRenderedPaths()}},{key:"updateRenderedPaths",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"clearRenderedPaths",value:function(){this.props.link.setRenderedPaths([])}},{key:"generatePathPoints",value:function(){var e=this.props.link.getPoints();return e.map((function(t,n){return{from:e[n],to:e[n+1]}})).filter((function(e){return e.to}))}},{key:"generateLinePath",value:function(e){var t=e.from,n=e.to;return"M".concat(t.getX(),",").concat(t.getY()," L").concat(n.getX(),",").concat(n.getY())}},{key:"renderSegment",value:function(e,t){var n=this.props,i=n.link,a=n.factory,o=n.options,r=(void 0===o?{}:o).selected,c=l.a.createRef();return this.refPaths.push(c),l.a.cloneElement(a.generateLinkSegment(i,r,e),{key:t,ref:c})}},{key:"renderPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props.link,i=n.getColor();return l.a.createElement("circle",{r:t?6:n.getPointRadius(),fill:t?"var(--background)":i,stroke:t?i:"none",strokeWidth:3,cx:e.x,cy:e.y})}},{key:"renderBifurcationSourcePoint",value:function(){var e=this.props.link,t=e.getBifurcationSource();if(!t)return null;var n=e.getFirstPoint().getPosition(),i=t.getLastPoint().getPosition();return C(n,i)?null:this.renderPoint(n)}},{key:"renderBifurcationTargetPoint",value:function(){var e=this.props.link,t=e.getBifurcationTarget();if(!t)return null;var n=e.getLastPoint().getPosition(),i=t.getLastPoint().getPosition();return C(n,i)?null:this.renderPoint(n)}},{key:"renderLooseLinkPoint",value:function(){var e=this.props.link;if(e.getTargetPort())return null;if(e.getBifurcationTarget())return null;var t=e.getBifurcations(),n=e.getLastPoint().getPosition();return t.some((function(e){return C(e.getFirstPosition(),n)||C(e.getLastPosition(),n)}))?null:this.renderPoint(n,!0)}},{key:"render",value:function(){var e=this,t=this.props.link;return this.refPaths=[],l.a.createElement(l.a.Fragment,null,l.a.createElement("g",{"data-default-link-test":t.getOptions().testName},this.generatePathPoints().map((function(t,n){return e.renderSegment(e.generateLinePath(t),n)}))),this.renderBifurcationSourcePoint(),this.renderBifurcationTargetPoint(),this.renderLooseLinkPoint())}}]),n}(r.Component),fe=oe.a.path(o||(o=Object(ae.a)(["\n  pointer-events: all;\n  stroke-linecap: round;\n"]))),me=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.call(this,"link")}return Object(g.a)(n,[{key:"generateModel",value:function(){return new H}},{key:"generateReactWidget",value:function(e){return l.a.createElement(pe,{diagramEngine:this.engine,link:e.model,factory:this})}},{key:"generateLinkSegment",value:function(e,t,n){return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,{stroke:e.getColor(),strokeWidth:e.getLineWidth(),d:n}),l.a.createElement(fe,{stroke:"none",strokeWidth:20,d:n}))}}]),n}(j.DefaultLinkFactory),he=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.call(this,"Port")}return Object(g.a)(n,[{key:"generateModel",value:function(){return new V}}]),n}(te.AbstractModelFactory),ge=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{type:te.InputType.KEY_DOWN,fire:function(t){var n=t.event;if(e()&&!i.engine.getModel().isLocked()&&i.matchesInput(n)){n.preventDefault();var a=n.code;"KeyX"===a&&i.handleCut(),"KeyC"===a&&i.handleCopy(),"KeyV"===a&&i.handlePaste()}}})).matchesInput=function(e){var t=e.ctrlKey,n=e.code;return t&&("KeyX"===n||"KeyC"===n||"KeyV"===n)},i.getSelectedComponents=function(){return i.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof $})).filter((function(e){return!e.isLocked()}))},i.handleCut=function(){var e=i.getSelectedComponents(),t=e.map((function(e){return e.clone().serialize()}));i.engine.fireEvent({nodes:e,links:e.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t.getAllLinks()))}),[])},"entitiesRemoved"),e.forEach((function(e){return e.remove()})),i.engine.repaintCanvas(),localStorage.setItem("clipboard",JSON.stringify(t))},i.handleCopy=function(){var e=i.getSelectedComponents().map((function(e){return e.clone().serialize()}));localStorage.setItem("clipboard",JSON.stringify(e))},i.handlePaste=function(){var e=i.engine.getModel(),t=JSON.parse(localStorage.getItem("clipboard"));if(t){e.clearSelection();var n=t.map((function(t){var n=e.getActiveNodeLayer().getChildModelFactoryBank(i.engine).getFactory(t.type).generateModel({initialConfig:t});return n.deserialize({engine:i.engine,data:t,registerModel:function(){}}),n}));n.forEach((function(t){e.addNode(t),t.setSelected(!0)})),localStorage.setItem("clipboard",JSON.stringify(n.map((function(e){return e.clone().serialize()})))),i.engine.fireEvent({nodes:n},"componentsAdded"),i.engine.repaintCanvas()}},i}return n}(te.Action),be=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{type:te.InputType.KEY_DOWN,fire:function(t){var n=t.event;e()&&(i.engine.getModel().isLocked()||i.matchesInput(n)&&(n.preventDefault(),i.handleAction()))}})).matchesInput=function(e){return"Delete"===e.code},i.handleAction=function(){var e=i.engine.getModel().getSelectedEntities().filter((function(e){return!e.isLocked()}));i.fireEvent(e),e.forEach((function(e){return e.remove()})),i.engine.repaintCanvas()},i.fireEvent=function(e){var t=e.filter((function(e){return e instanceof $})),n=e.filter((function(e){return e instanceof H})),a=t.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t.getAllLinks()))}),[]);i.engine.fireEvent({nodes:t,links:[].concat(Object(E.a)(a),Object(E.a)(n))},"entitiesRemoved")},i}return n}(te.Action),ve=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{type:te.InputType.KEY_DOWN,fire:function(t){var n=t.event;e()&&(i.engine.getModel().isLocked()||i.matchesInput(n)&&(n.preventDefault(),i.handleAction()))}})).matchesInput=function(e){return e.ctrlKey&&"KeyD"===e.code},i.handleAction=function(){var e=i.engine.getModel(),t=e.getSelectedEntities().filter((function(e){return e instanceof $})).filter((function(e){return!e.isLocked()})).map((function(e){return e.clone()}));e.clearSelection(),t.forEach((function(t){e.addNode(t),t.setSelected(!0)})),i.engine.fireEvent({nodes:t},"componentsAdded"),i.engine.repaintCanvas()},i}return n}(te.Action),ye=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{type:te.InputType.KEY_DOWN,fire:function(t){var n=t.event;if(e()&&!i.engine.getModel().isLocked()&&i.matchesInput(n)){n.preventDefault();var a=n.ctrlKey,o=n.shiftKey,r=n.code;a&&!o&&"KeyZ"===r?i.handleUndo():i.handleRedo()}}})).matchesInput=function(e){var t=e.ctrlKey,n=e.shiftKey,i=e.code;return t&&("KeyZ"===i||"KeyY"===i)||t&&n&&"KeyZ"===i},i.handleUndo=function(){i.engine.commands.undo(),i.engine.repaintCanvas()},i.handleRedo=function(){i.engine.commands.redo(),i.engine.repaintCanvas()},i}return n}(te.Action),Ee=[15,25,50,75,100,150,200,300],xe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),e=t.call(this,{type:te.InputType.MOUSE_WHEEL,fire:function(t){var n=t.event;n.stopPropagation();var i=e.engine.getModel();i.getLayers().forEach((function(e){return e.allowRepaint(!1)}));var a,o=Math.sign(n.deltaY)>0?"in":"out",r=Ee.indexOf(Ee.includes(i.getZoomLevel())?i.getZoomLevel():100);a="in"===o?Math.min(r+1,Ee.length-1):Math.max(r-1,0);var l=i.getZoomLevel()/100;i.setZoomLevel(Ee[a]);var c=i.getZoomLevel()/100,s=e.engine.getCanvas().getBoundingClientRect(),u=s.width,d=s.height,p=u*c-u*l,f=d*c-d*l,m=n.clientX-s.left,h=n.clientY-s.top,g=(m-i.getOffsetX())/l/u,b=(h-i.getOffsetY())/l/d;i.setOffset(i.getOffsetX()-p*g,i.getOffsetY()-f*b),e.engine.repaintCanvas(),i.getLayers().forEach((function(e){return e.allowRepaint(!0)}))}})}return n}(te.Action),Oe=function(e){var t=e.engine,n=e.editComponentConfiguration,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[].concat(Object(E.a)(Object.values(t.getModel().getActiveNodeLayer().getModels())),Object(E.a)(n)),a=e.getSourcePort();if(a){var o=i.find((function(t){return t.getID()===e.getSourcePort().getParent().getID()}));a=o.getPort(a.getName()),e.setSourcePort(a),a.addLink(e)}var r=e.getTargetPort();if(r){var l=i.find((function(t){return t.getID()===e.getTargetPort().getParent().getID()}));r=l.getPort(r.getName()),e.setTargetPort(r),r.addLink(e)}return e.getBifurcationSource()&&e.getBifurcationSource().addBifurcation(e),e.getBifurcationTarget()&&e.getBifurcationTarget().addBifurcation(e),e};return{componentsAdded:function(e){var n=e.nodes;t.commands.add({execute:function(){n.forEach((function(e){return t.getModel().addNode(e)}))},undo:function(){n.forEach((function(e){return e.remove()}))}})},componentEdited:function(e){var a=e.node,o=e.configurations,r=e.links;t.commands.add({execute:function(){n(a,o.after)},undo:function(){n(a,o.before),r.before.forEach((function(e){return t.getModel().addLink(i(e))}))}})},linkAdded:function(e){var n=e.link;t.commands.add({execute:function(){t.getModel().addLink(i(n))},undo:function(){n.remove()}})},linkChanged:function(e){var n=e.before,i=e.after,a=function(e,n){var i=t.getModel().getLink(e.id);if(i.setPoints(e.points.map((function(e){var t=new w.PointModel({link:i});return t.setPosition(e),t}))),e.bifurcationTarget){var a=t.getModel().getLink(e.bifurcationTarget);i.setBifurcationTarget(a),a.addBifurcation(i)}else if(n.bifurcationTarget){var o=t.getModel().getLink(n.bifurcationTarget);i.setBifurcationTarget(null),o.removeBifurcation(i)}};t.commands.add({execute:function(){a(i,n)},undo:function(){a(n,i)}})},entitiesRemoved:function(e){var n=e.nodes,a=e.links;t.commands.add({execute:function(){n.forEach((function(e){return e.remove()})),a.forEach((function(e){return e.remove()}))},undo:function(){a.map((function(e){return i(e,n)})).sort((function(e,t){return e.getBifurcationSource()===t||e.getBifurcationTarget()===t?1:t.getBifurcationSource()===e||t.getBifurcationTarget()===e?-1:0})).forEach((function(e){return t.getModel().addLink(e)})),n.forEach((function(e){return t.getModel().addNode(e)}))}})},entitiesMoved:function(e){var n=e.nodes,i=e.links,a=function(e){n[e].forEach((function(e){var n=e.id,i=e.position;t.getModel().getNode(n).setPosition(i.x,i.y)})),i[e].forEach((function(e){var n=e.id,i=e.points,a=t.getModel().getLink(n);a.setPoints(i.map((function(e){var t=new w.PointModel({link:a});return t.setPosition(e),t})))}))};t.commands.add({execute:function(){a("after")},undo:function(){a("before")}})}}},ke=function(){function e(t,n){Object(h.a)(this,e),this.execute=t,this.undo=n}return Object(g.a)(e,[{key:"execute",value:function(e){this.execute(e)}},{key:"undo",value:function(e){this.undo(e)}}]),e}(),we=function(){function e(){Object(h.a)(this,e),this.clear()}return Object(g.a)(e,[{key:"clear",value:function(){this.stack=[],this.index=0}},{key:"add",value:function(e){var t=e.execute,n=e.undo,i=new ke(t,n);this.stack.length=this.index,this.stack.push(i),this.index+=1}},{key:"undo",value:function(){this.index>0&&(this.index-=1,this.stack[this.index].undo())}},{key:"redo",value:function(){this.index<this.stack.length&&(this.stack[this.index].execute(),this.index+=1)}}]),e}(),Pe=n(26),je=function(e,t,n,i){var a=function(e,t){var n=t.getZoomLevel()/100,i=t.getOffsetX()/n,a=t.getOffsetY()/n;return new k.Point(e.x-i,e.y-a)}(i,t),o=t.getZoomLevel()/100,r=n.x/o,l=n.y/o,c=a.x+(r-i.x)+e.virtualDisplacementX,s=a.y+(l-i.y)+e.virtualDisplacementY;return S(new k.Point(c,s),t.options.gridSize)};function Se(e,t){var n=t.getFirstPosition(),i=t.getLastPosition(),a=je(e,this.engine.getModel(),{x:this.initialXRelative,y:this.initialYRelative},n);if(!this.hasStartedMoving&&C(n,i)&&(this.hasStartedMoving=!0),this.hasStartedMoving)if(t.hasMiddlePoint()){var o=t.getMiddlePosition();C(o,i)?t.removePoint(t.getMiddlePoint()):C(n,o)?(t.removePoint(t.getMiddlePoint()),this.moveDirection="horizontal"===this.moveDirection?"vertical":"horizontal"):"horizontal"===this.moveDirection?i.x!==a.x&&t.getMiddlePoint().setPosition(a.x,n.y):"vertical"===this.moveDirection&&i.y!==a.y&&t.getMiddlePoint().setPosition(n.x,a.y)}else i.x!==a.x?(this.moveDirection||(this.moveDirection="horizontal"),"vertical"===this.moveDirection&&t.addPoint(t.generatePoint(i.x,a.y),1)):i.y!==a.y&&(this.moveDirection||(this.moveDirection="vertical"),"horizontal"===this.moveDirection&&t.addPoint(t.generatePoint(a.x,i.y),1));t.hasMiddlePoint()||n.x===a.x||n.y===a.y||(C(n,i)||"horizontal"===this.moveDirection?t.addPoint(t.generatePoint(a.x,n.y),1):t.addPoint(t.generatePoint(n.x,a.y),1)),t.getLastPoint().setPosition(a.x,a.y),this.engine.repaintCanvas()}var Ce,Te,Ae,Ie,Le,Ne,Be,Me=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{name:"bifurcate-link"})).fireEvent=function(){i.sourceEdited?i.engine.fireEvent({before:i.sourceBefore,after:i.getLinkPoints(i.source)},"linkChanged"):i.engine.fireEvent({link:i.bifurcation},"linkAdded")},i.registerAction(new te.Action({type:te.InputType.MOUSE_DOWN,fire:function(e){i.moveDirection=void 0,i.hasStartedMoving=!1,i.source=i.engine.getMouseElement(e.event),i.sourceBefore=i.getLinkPoints(i.source),i.sourceEdited=!1;var t=i.snapPointToSourceLink(i.engine.getRelativeMousePoint(e.event),i.source);i.source.isLocked()?i.eject():(i.bifurcation=i.engine.getLinkFactories().getFactory(i.source.getType()).generateModel(),i.bifurcation.setBits(i.source.getBits()),i.bifurcation?(i.bifurcation.setBifurcationSource(i.source),i.bifurcation.getFirstPoint().setPosition(t),i.bifurcation.getLastPoint().setPosition(t),i.bifurcation.setSelected(!0),i.engine.getModel().clearSelection(),i.source.setSelected(!1),i.source.addBifurcation(i.bifurcation),i.engine.getModel().addLink(i.bifurcation)):i.eject())}})),i.registerAction(new te.Action({type:te.InputType.MOUSE_UP,fire:function(t){if(i.isNearbySourcePosition())return i.cleanUp(),i.engine.getModel().clearSelection(),i.source.setSelected(!0),void i.engine.repaintCanvas();var n=i.engine.getMouseElement(t.event);if(n instanceof Pe.NodeModel)return i.cleanUp(),void i.engine.repaintCanvas();if(n instanceof Pe.PortModel&&n.isNewLinkAllowed())return i.source.getBits()!==n.getBits()?(i.cleanUp(),i.engine.repaintCanvas(),void e(z(i.source,n))):(i.bifurcation.setTargetPort(n),n.reportPosition(),i.adjustBifurcationOverlayingSource(i.bifurcation),i.engine.repaintCanvas(),void i.fireEvent());var a=M(i.bifurcation,i.engine);if(a){if(a.getBits()!==i.bifurcation.getBits())return i.cleanUp(),i.engine.repaintCanvas(),void e(z(i.bifurcation,a));i.bifurcation.setBifurcationTarget(a),a.addBifurcation(i.bifurcation),a.setSelected(!0)}i.mergeWithBifurcation(i.bifurcation.getBifurcationSource()),i.adjustBifurcationOverlayingSource(i.bifurcation),i.fireEvent()}})),i}return Object(g.a)(n,[{key:"getLinkPoints",value:function(e){return{id:e.getID(),points:e.getPoints().map((function(e){return e.getPosition()})),bifurcationTarget:e.getBifurcationTarget()?e.getBifurcationTarget().getID():null}}},{key:"cleanUp",value:function(){this.source.removeBifurcation(this.bifurcation),this.bifurcation.remove()}},{key:"snapPointToSourceLink",value:function(e,t){var n=this.engine.getModel().getOptions().gridSize,i=t.getPoints(),a=this.getClosestCornerToPosition(i,e);if(a.distance<n-1)return new k.Point(a.position.x,a.position.y);var o=this.getClosestPathToPosition(i,e),r=S(e,n);return new k.Point("x"===o.axis?o.position:r.x,"y"===o.axis?o.position:r.y)}},{key:"getClosestCornerToPosition",value:function(e,t){return e.map((function(e){return Object(u.a)({distance:Math.hypot(t.x-e.position.x,t.y-e.position.y)},e)})).reduce((function(e,t){return t.distance<e.distance?t:e}))}},{key:"getPathPoints",value:function(e){return e.map((function(t,n){return{from:e[n],to:e[n+1]}})).filter((function(e){return e.to}))}},{key:"getPathDirections",value:function(e){return this.getPathPoints(e).map((function(e){return T(e.from.position,e.to.position)?{axis:"x",position:e.from.position.x}:{axis:"y",position:e.from.position.y}}))}},{key:"getClosestPathToPosition",value:function(e,t){return this.getPathDirections(e).map((function(e){return Object(u.a)({distance:Math.abs(t[e.axis]-e.position)},e)})).reduce((function(e,t){return t.distance<e.distance?t:e}))}},{key:"isNearbySourcePosition",value:function(){return C(this.bifurcation.getFirstPosition(),this.bifurcation.getLastPosition())}},{key:"adjustBifurcationOverlayingSource",value:function(){var e=this.bifurcation.getBifurcationSource();if(C(this.bifurcation.getFirstPosition(),e.getLastPosition()))B(this.bifurcation.getSecondPosition(),e)&&this.bifurcation.removePoint(this.bifurcation.getFirstPoint());else{if(B(this.bifurcation.getFirstPosition(),e)&&B(this.bifurcation.getSecondPosition(),e)){if(!this.bifurcation.hasMiddlePoint())return this.bifurcation.remove(),void e.removeBifurcation(this.bifurcation);if(this.bifurcation.removePoint(this.bifurcation.getFirstPoint()),C(this.bifurcation.getFirstPosition(),e.getMiddlePosition()))return B(this.bifurcation.getLastPosition(),e)?(this.bifurcation.remove(),void e.removeBifurcation(this.bifurcation)):(this.bifurcation.getFirstPoint().setPosition(e.getLastPosition()),void this.mergeWithBifurcation(e))}e.hasMiddlePoint()&&I(this.bifurcation.getFirstPosition(),e.getMiddlePosition(),this.bifurcation.getSecondPosition())&&this.bifurcation.getFirstPoint().setPosition(e.getMiddlePosition())}}},{key:"mergeWithBifurcation",value:function(e){var t={first:e.getFirstPosition(),middle:e.getMiddlePosition(),last:e.getLastPosition(),secondLast:e.getSecondLastPosition()};e.getBifurcations().forEach((function(t){B(e.getLastPosition(),t)&&t.getFirstPoint().setPosition(e.getLastPosition())}));var n=e.getBifurcations().filter((function(n){return!!C(n.getFirstPosition(),t.last)&&(!e.hasMiddlePoint()&&!n.hasMiddlePoint()||(e.hasMiddlePoint()&&n.hasMiddlePoint()?!!C(t.middle,n.getMiddlePosition()):!!I(t.last,t.secondLast,n.getSecondPosition())))}))[0];if(n){var i=n.getSecondLastPosition(),a=n.getLastPosition();e.hasMiddlePoint()||e.addPoint(e.generatePoint(i.x,i.y),1),e.getLastPoint().setPosition(a.x,a.y),e.isStraight()&&e.hasMiddlePoint()&&e.removePoint(e.getMiddlePoint()),e.removeBifurcation(n);var o=n.getBifurcationTarget();o&&(e.setBifurcationTarget(o),o.addBifurcation(e)),this.sourceEdited=!0,n.remove(),C(e.getFirstPosition(),e.getLastPosition())?e.remove():e.setSelected(!0),this.adjustBifurcationPoints(e)}}},{key:"adjustBifurcationPoints",value:function(e){var t=this.engine.getModel().getOptions().gridSize;e.getBifurcations().filter((function(t){return!B(t.getFirstPosition(),e)})).forEach((function(n){var i=S(L(n.getFirstPosition(),e),t);n.getFirstPoint().setPosition(i.x,i.y),I(n.getFirstPosition(),n.getLastPosition())||(n.hasMiddlePoint()&&n.removePoint(n.getMiddlePoint()),T(e.getFirstPosition(),e.getSecondPosition())?n.addPoint(n.generatePoint(n.getLastPosition().x,n.getFirstPosition().y),1):n.addPoint(n.generatePoint(n.getFirstPosition().x,n.getLastPosition().y),1))}))}},{key:"fireMouseMoved",value:function(e){Se.call(this,e,this.bifurcation)}}]),n}(te.AbstractDisplacementState),ze=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.call(this,{name:"drag-canvas"})}return Object(g.a)(n,[{key:"activated",value:function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(x.a)(Object(O.a)(n.prototype),"activated",this).call(this,t),this.engine.getModel().clearSelection(),e.next=4,this.engine.repaintCanvas(!0);case 4:this.engine.getModel().getLayers().forEach((function(e){return e.allowRepaint(!1)})),this.initialCanvasX=this.engine.getModel().getOffsetX(),this.initialCanvasY=this.engine.getModel().getOffsetY();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deactivated",value:function(e){Object(x.a)(Object(O.a)(n.prototype),"deactivated",this).call(this,e),this.engine.getModel().getLayers().forEach((function(e){return e.allowRepaint(!0)}))}},{key:"fireMouseMoved",value:function(e){(1===e.event.nativeEvent.which||e.event.nativeEvent.targetTouches)&&(this.engine.getModel().setOffset(this.initialCanvasX+e.displacementX,this.initialCanvasY+e.displacementY),this.engine.repaintCanvas())}}]),n}(te.AbstractDisplacementState),De=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{name:"drag-new-link"})).fireEvent=function(){i.engine.fireEvent({link:i.link},"linkAdded")},i.registerAction(new te.Action({type:te.InputType.MOUSE_DOWN,fire:function(e){i.moveDirection=void 0,i.hasStartedMoving=!1,i.port=i.engine.getMouseElement(e.event),i.port instanceof V&&!i.port.isLocked()?(i.link=i.port.createLinkModel(),i.link?(i.link.setSelected(!0),i.link.setSourcePort(i.port),i.engine.getModel().clearSelection(),i.engine.getModel().addLink(i.link),i.port.reportPosition()):i.eject()):i.eject()}})),i.registerAction(new te.Action({type:te.InputType.MOUSE_UP,fire:function(t){var n=i.engine.getMouseElement(t.event);if((Object.getPrototypeOf(n)instanceof $||i.isNearbySourcePort(t.event))&&(i.link.remove(),i.engine.repaintCanvas()),n instanceof V&&i.port.canLinkToPort(n))return i.port.getBits()!==n.getBits()?(i.link.remove(),i.engine.repaintCanvas(),void e(z(i.port,n))):(i.link.setTargetPort(n),n.reportPosition(),i.engine.repaintCanvas(),void i.fireEvent());var a=M(i.link,i.engine);if(a){if(a.getBits()!==i.link.getBits())return i.link.remove(),i.engine.repaintCanvas(),void e(z(i.link,a));var o=i.engine.getFactoryForLink(a).generateModel();o.setPoints(i.link.getPoints().reverse()),o.setTargetPort(i.link.getSourcePort()),o.setBifurcationSource(a),o.setBits(a.getBits()),a.addBifurcation(o),a.setSelected(!0),i.link.remove(),i.engine.getModel().addLink(o),i.link=o}i.fireEvent()}})),i}return Object(g.a)(n,[{key:"isNearbySourcePort",value:function(e){var t,n,i,a=this.engine.getRelativeMousePoint(e),o=this.link.getSourcePort(),r=o.width,l=o.getPosition();return t=a,n=l,i=r,Math.abs(t.x-n.x)<=i&&Math.abs(t.y-n.y)<=i}},{key:"fireMouseMoved",value:function(e){Se.call(this,e,this.link)}}]),n}(te.AbstractDisplacementState),Re=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this,{name:"move-items"})).getNodesPositions=function(){return e.engine.getModel().getSelectedEntities().filter((function(e){return Object.getPrototypeOf(e)instanceof $})).map((function(e){return{id:e.getID(),position:e.getPosition()}}))},e.getLinksPoints=function(){return e.engine.getModel().getSelectedEntities().filter((function(e){return Object.getPrototypeOf(e)instanceof $})).map((function(e){return e.getAllLinks()})).flat().map((function(e){return{id:e.getID(),points:e.getPoints().map((function(e){return e.getPosition()}))}}))},e.adjustLinkPoints=function(t){var n=t.getFirstPosition(),i=t.getLastPosition();if(t.hasMiddlePoint()||n.x===i.x||n.y===i.y){if(t.hasMiddlePoint()){"horizontal"===e.linkDirections[t.getID()]?t.getMiddlePoint().setPosition(i.x,n.y):t.getMiddlePoint().setPosition(n.x,i.y);var a=t.getMiddlePosition();(C(n,a)||C(a,i))&&t.removePoint(t.getMiddlePoint())}}else t.addPoint(t.generatePoint(n.x,i.y),1);e.adjustLinkBifurcations(t)},e.registerAction(new te.Action({type:te.InputType.MOUSE_DOWN,fire:function(t){e.engine.getModel().isLocked()?e.eject():(e.lastDisplacement=new k.Point(0,0),e.element=e.engine.getActionEventBus().getModelForEvent(t),e.element?(e.element.isSelected()||e.engine.getModel().clearSelection(),e.linkDirections=e.getLinkDirections(e.element),e.element.setSelected(!0),e.engine.repaintCanvas(),e.nodesBefore=e.getNodesPositions(),e.linksBefore=e.getLinksPoints()):e.eject())}})),e.registerAction(new te.Action({type:te.InputType.MOUSE_UP,fire:function(){0===e.lastDisplacement.x&&0===e.lastDisplacement.y||e.fireEvent()}})),e}return Object(g.a)(n,[{key:"fireEvent",value:function(){this.engine.fireEvent({nodes:{before:this.nodesBefore,after:this.getNodesPositions()},links:{before:this.linksBefore,after:this.getLinksPoints()}},"entitiesMoved")}},{key:"activated",value:function(e){Object(x.a)(Object(O.a)(n.prototype),"activated",this).call(this,e),this.initialPositions={}}},{key:"getLinksFromNode",value:function(e){var t=this;return Object.getPrototypeOf(e)instanceof $?Object.values(e.getPorts()).map((function(e){return Object.entries(e.getLinks())})).filter((function(e){return e.length>0})).flat().map((function(e){var n=Object(d.a)(e,2),i=n[0],a=n[1];return[[i,a]].concat(Object(E.a)(t.getBifurcatedLinks(a)))})).flat():[]}},{key:"getBifurcatedLinks",value:function(e){var t=this;return e.getBifurcations().map((function(e){return[[e.getID(),e]].concat(Object(E.a)(t.getBifurcatedLinks(e)))})).flat()}},{key:"getLinkDirections",value:function(e){var t=this;return this.getLinksFromNode(e).reduce((function(e,n){var i=Object(d.a)(n,2),a=i[0],o=i[1];return Object(u.a)(Object(u.a)({},e),{},Object(D.a)({},a,t.getLinkDirection(o)))}),{})}},{key:"getLinkDirection",value:function(e){if(!e.hasMiddlePoint())return null;var t=e.getFirstPosition(),n=e.getMiddlePosition();return T(t,n)?"vertical":A(t,n)?"horizontal":null}},{key:"fireMouseMoved",value:function(e){var t=this;if(1===e.event.nativeEvent.which){var n=S(new k.Point(e.virtualDisplacementX,e.virtualDisplacementY),this.engine.getModel().getOptions().gridSize);C(n,this.lastDisplacement)||(this.lastDisplacement=n,this.engine.getModel().getSelectedEntities().filter((function(e){return Object.getPrototypeOf(e)instanceof $})).forEach((function(n){t.moveEntity(n,e),t.adjustNodeLinks(n)})),this.engine.repaintCanvas())}}},{key:"moveEntity",value:function(e,t){if(!e.isLocked()){this.initialPositions[e.getID()]||(this.initialPositions[e.getID()]={point:e.getPosition(),item:e});var n=this.initialPositions[e.getID()].point,i=this.engine.getModel();e.setPosition(i.getGridPosition(n.x+t.virtualDisplacementX),i.getGridPosition(n.y+t.virtualDisplacementY))}}},{key:"adjustNodeLinks",value:function(e){var t=this;Object.values(e.getPorts()).forEach((function(e){return Object.values(e.getLinks()).forEach(t.adjustLinkPoints)}))}},{key:"adjustLinkBifurcations",value:function(e){var t=this;e.getBifurcations().forEach((function(e){t.adjustFirstAndLastPoints(e),t.adjustLinkPoints(e)}))}},{key:"adjustFirstAndLastPoints",value:function(e){var t=this.engine.getModel().getOptions().gridSize,n=e.getFirstPoint(),i=S(L(n.getPosition(),e.getBifurcationSource()),t);if(n.setPosition(i.x,i.y),e.getBifurcationTarget()){var a=e.getLastPoint(),o=S(L(a.getPosition(),e.getBifurcationTarget()),t);a.setPosition(o.x,o.y)}}}]),n}(te.AbstractDisplacementState),Fe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.call(this,{name:"selection-box"})}return Object(g.a)(n,[{key:"activated",value:function(e){Object(x.a)(Object(O.a)(n.prototype),"activated",this).call(this,e),this.layer=new te.SelectionLayerModel,this.engine.getModel().addLayer(this.layer)}},{key:"deactivated",value:function(e){Object(x.a)(Object(O.a)(n.prototype),"deactivated",this).call(this,e),this.layer.remove(),this.engine.repaintCanvas()}},{key:"getBoxDimensions",value:function(e){var t=this.engine.getRelativePoint(e.event.clientX,e.event.clientY);return{left:t.x>this.initialXRelative?this.initialXRelative:t.x,top:t.y>this.initialYRelative?this.initialYRelative:t.y,width:Math.abs(t.x-this.initialXRelative),height:Math.abs(t.y-this.initialYRelative),right:t.x<this.initialXRelative?this.initialXRelative:t.x,bottom:t.y<this.initialYRelative?this.initialYRelative:t.y}}},{key:"fireMouseMoved",value:function(e){var t=this;this.layer.setBox(this.getBoxDimensions(e));var n=this.engine.getRelativeMousePoint({clientX:this.initialX,clientY:this.initialY});e.virtualDisplacementX<0&&(n.x-=Math.abs(e.virtualDisplacementX)),e.virtualDisplacementY<0&&(n.y-=Math.abs(e.virtualDisplacementY));var i=new k.Rectangle(n,Math.abs(e.virtualDisplacementX),Math.abs(e.virtualDisplacementY));this.engine.getModel().isLocked()||this.engine.getModel().getSelectionEntities().forEach((function(e){if(e.getBoundingBox){if(!t.allowSelection(e))return;var n=e.getBoundingBox();i.containsPoint(n.getTopLeft())&&i.containsPoint(n.getBottomRight())?e.setSelected(!0):e.setSelected(!1)}})),this.engine.repaintCanvas()}},{key:"allowSelection",value:function(e){return!(e instanceof Pe.LinkModel)&&!(e instanceof Pe.PointModel)}}]),n}(te.AbstractDisplacementState),We=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this,{name:"selecting"})).keys=["shift"],e.registerAction(new te.Action({type:te.InputType.MOUSE_DOWN,fire:function(t){var n=e.engine.getActionEventBus().getModelForEvent(t);n?(n.setSelected(!0),e.engine.repaintCanvas()):e.transitionWithEvent(new Fe,t)}})),e}return n}(te.State),He=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,{name:"diagram-states"})).childStates=[new We],i.dragCanvas=new ze,i.dragNewLink=new De(e),i.bifurcateLink=new Me(e),i.dragItems=new Re,i.registerAction(new te.Action({type:te.InputType.MOUSE_DOWN,fire:function(e){var t=i.engine.getActionEventBus().getModelForEvent(e);t?t instanceof V?i.transitionWithEvent(i.dragNewLink,e):t instanceof H?i.transitionWithEvent(i.bifurcateLink,e):i.transitionWithEvent(i.dragItems,e):i.transitionWithEvent(i.dragCanvas,e)}})),i.registerAction(new te.Action({type:te.InputType.TOUCH_START,fire:function(e){i.transitionWithEvent(i.dragCanvas,e)}})),i}return n}(te.State),_e=function e(t,n,i){var a=this;Object(h.a)(this,e),this.getEngine=function(){return a.engine},this.getModel=function(){return a.engine.getModel()},this.initializeEngine=function(){a.engine=P()({registerDefaultDeleteItemsAction:!1,registerDefaultZoomCanvasAction:!1}),a.engine.commands=new we,a.engine.registerListener(Oe(a)),a.engine.getStateMachine().pushState(new He(a.showSnackbar)),[ve,ge,be,ye,xe].forEach((function(e){return a.engine.getActionEventBus().registerAction(new e(a.areShortcutsAllowed))})),a.engine.getPortFactories().registerFactory(new he),a.engine.getLinkFactories().registerFactory(new me),a.registerComponents()},this.initializeModel=function(){a.model=new w.DiagramModel,a.model.setGridSize(15),a.model.setLocked(!1),a.model.registerListener({eventDidFire:function(e){var t=e.function;"offsetUpdated"===t&&a.adjustGridOffset(e),"zoomUpdated"===t&&a.adjustGridZoom(e)}}),a.realignGrid(),a.engine.setModel(a.model)},this.registerComponents=function(){a.components.forEach((function(e){a.engine.getNodeFactories().registerFactory(e)}))},this.serialize=function(){return a.model.serialize()},this.load=function(e){a.engine.commands.clear(),a.model.deserializeModel(e,a.engine),a.realignGrid(),a.engine.repaintCanvas()},this.setLocked=function(e){a.model.setLocked(e),a.locked=e},this.isLocked=function(){return a.locked},this.repaint=function(){return a.engine.repaintCanvas()},this.realignGrid=function(){a.adjustGridOffset({offsetX:a.model.getOffsetX(),offsetY:a.model.getOffsetY()}),a.adjustGridZoom({zoom:a.model.getZoomLevel()})},this.adjustGridOffset=function(e){var t=e.offsetX,n=e.offsetY;document.body.style.setProperty("--offset-x","".concat(Math.round(t),"px")),document.body.style.setProperty("--offset-y","".concat(Math.round(n),"px"))},this.adjustGridZoom=function(e){var t=e.zoom,n=a.model.getOptions().gridSize;document.body.style.setProperty("--grid-size","".concat(n*t/100,"px"))},this.handleComponentDrop=function(e,t){var n=a.components.find((function(e){return e.type===t.type})).Model,i=e?function(){var t=a.engine.getRelativeMousePoint(e),n=t.x,i=t.y;return new k.Point(15*Math.round(n/15),15*Math.round(i/15))}():function(){var e=a.model.getZoomLevel()/100,t=-a.model.getOffsetX()/e+window.innerWidth/(2*e),n=-a.model.getOffsetY()/e+window.innerHeight/(2*e);return new k.Point(15*Math.round(t/15),15*Math.round(n/15))}(),o=new n(t.configurations,t.type);o.setPosition(i),a.model.addNode(o),a.engine.fireEvent({nodes:[o]},"componentsAdded"),a.engine.repaintCanvas()},this.handleComponentEdit=function(e,t){var n=e.configurations,i=e.getAllLinks();a.editComponentConfiguration(e,t),a.engine.fireEvent({node:e,configurations:{before:n,after:e.configurations},links:{before:i,after:e.getAllLinks()}},"componentEdited"),a.engine.repaintCanvas()},this.editComponentConfiguration=function(e,t){var n=e.getPorts();e.configurations=t,e.ports={},e.initialize(t);var i=Object.values(e.getPorts()).some((function(e){return!n[e.getName()]})),a=Object.values(n).some((function(t){return!e.getPort(t.getName())}));i||a?Object.values(n).forEach((function(e){return Object.values(e.getLinks()).forEach((function(e){return e.remove()}))})):Object.values(n).forEach((function(t){var n=e.getPort(t.getName());if(t.getBits()===n.getBits()){var i=Object.values(t.getLinks())[0];i&&(n.addLink(i),t===i.getSourcePort()&&i.setSourcePort(n),t===i.getTargetPort()&&i.setTargetPort(n),t.remove())}else t.getMainLink()&&t.getMainLink().remove()}))},this.clearSelection=function(){return a.getEngine().getModel().clearSelection()},this.getSelectedNodes=function(){return a.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof $}))},this.fireAction=function(e){return a.engine.getActionEventBus().fireAction({event:Object(u.a)(Object(u.a)({},e),{},{key:"",preventDefault:function(){},stopPropagation:function(){}})})},this.duplicateSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyD"})},this.cutSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyX"})},this.copySelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyC"})},this.pasteSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyV"})},this.deleteSelected=function(){return a.fireAction({type:"keydown",code:"Delete"})},this.undo=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyZ"})},this.redo=function(){return a.fireAction({type:"keydown",ctrlKey:!0,shiftKey:!0,code:"KeyZ"})},this.zoomIn=function(e){var t=e.event;return a.fireAction({clientX:t.clientX,clientY:t.clientY,type:"wheel",deltaY:1})},this.zoomOut=function(e){var t=e.event;return a.fireAction({clientX:t.clientX,clientY:t.clientY,type:"wheel",deltaY:-1})},this.synchronizeLink=function(e,t){return a.getEngine().getModel().getLink(e).setValue(t)},this.synchronizeComponent=function(e,t){var n=a.getEngine().getModel().getNode(e);Object.entries(t.output).forEach((function(e){var t=Object(d.a)(e,2),i=t[0],a=t[1];return n.getPort(i).setValue(a)})),Object.entries(t.properties).forEach((function(e){var t=Object(d.a)(e,2),i=t[0],a=t[1];n[i]=a}))},this.clearAllValues=function(){a.clearLinkValues(),a.clearPortValues()},this.clearLinkValues=function(){return a.getEngine().getModel().getLinks().forEach((function(e){return e.setValue(null)}))},this.clearPortValues=function(){return a.getEngine().getModel().getNodes().forEach((function(e){return Object.values(e.getPorts()).forEach((function(e){return e.setValue(null)}))}))},this.components=t,this.areShortcutsAllowed=n,this.showSnackbar=i,this.locked=!1,this.initializeEngine(),this.initializeModel()},Ve=oe.a.div(Ce||(Ce=Object(ae.a)(["\n  width: ","px;\n  height: ","px;\n"])),(function(e){return e.width}),(function(e){return e.height})),Ue=oe.a.div(Te||(Te=Object(ae.a)(["\n  width: 10px;\n  height: 10px;\n  margin-",": ","px;\n  border: var(--port-width) solid\n    ",";\n  border-radius: 100%;\n  background: ",";\n\n  &:hover {\n    background: var(--port-hover);\n  }\n"])),(function(e){return e.marginSide}),(function(e){return e.length}),(function(e){return e.link?"var(--port-connected-border)":"var(--port-unconnected-border)"}),(function(e){return e.port.getColor()})),Ke=oe.a.div(Ae||(Ae=Object(ae.a)(["\n  width: 10px;\n  height: 10px;\n  border: var(--port-width) solid;\n  border-radius: 100%;\n  background: white;\n"]))),Xe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"report",value:function(){this.props.port&&Object(x.a)(Object(O.a)(n.prototype),"report",this).call(this)}},{key:"componentDidUpdate",value:function(){this.props.port&&Object(x.a)(Object(O.a)(n.prototype),"componentDidUpdate",this).call(this)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.port,i=e.model,a=e.className,o=void 0===a?"":a;if(!n)return null;var r=n.getOrientation(),c=n.getLineWidth(),s=n.getLength()+n.getOffset(),u=n.isComplemented()?10:0,d=[s,10,s,10],p=[10,s,10,s],f=[u,5,0,5],m=[s,5,s-u,5],h=[5,s-u,5,s-u];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ue,{className:"port ".concat(o),"data-name":t,"data-nodeid":i.getID(),port:n,link:n.getMainLink(),title:t,marginSide:["left","top","right","bottom"][r],length:s}),l.a.createElement(Ve,{className:"port ".concat(o),width:d[r],height:p[r]},l.a.createElement("svg",{height:p[r],width:d[r],style:{display:"block"}},l.a.createElement("g",null,l.a.createElement("line",{x1:f[r],y1:[5,0,5,0][r],x2:m[r],y2:h[r],stroke:n.getLineColor(),strokeWidth:c})))),n.isComplemented()?l.a.createElement(Ke,{className:"port ".concat(o)}):l.a.createElement(l.a.Fragment,null))}}]),n}(w.PortWidget),Ye=(Ie=Xe,function(e){var t=Object.assign({},e),n=Object(r.useContext)(re),i=Object(r.useContext)(ne);return l.a.createElement(Ie,Object.assign({},t,{port:i.getPort(t.name),engine:n.getEngine(),model:i}))}),Ze=function(e){if(2===e)return[1,5];if(3===e)return[1,3,5];if(4===e)return[1,2,4,5];var t=e%2===0,n=e-(t?0:1),i=0,a=5;e>5&&(i=Math.floor((5-n)/2),a=n+1);var o=Object(E.a)(Array(a).keys()).map((function(e){return e+i+1}));return t&&o.splice(e/2,1),o},Ge=oe.a.div(Le||(Le=Object(ae.a)(["\n  position: absolute;\n  left: ","px;\n  height: ","px;\n  width: 2px;\n  background: ",";\n\n  ","\n"])),(function(e){return e.offsetX}),(function(e){return e.size}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return"".concat(e.place,": 88px;")})),Qe=function(e){var t=e.selected,n=e.portPositions,i=e.offsetX,a=void 0===i?1:i,o=n[n.length-1];if(o<=5)return null;var r=15*(o-5);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ge,{selected:t,size:r,place:"top",offsetX:a}),l.a.createElement(Ge,{selected:t,size:r,place:"bottom",offsetX:a}))},Je=oe.a.div(Ne||(Ne=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),qe=Object(oe.a)(Ye)(Be||(Be=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return e.name,"".concat(e.side,": 88px")})),$e=function(e){var t=e.size,n=void 0===t?90:t,i=e.orientation;return l.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{style:{transform:"rotate(".concat(90*i,"deg)"),transformOrigin:"center"}},l.a.createElement("path",{transform:"scale(0.26458333)",d:"M 2 2 L 2 45 A 42.999999 42.999999 0 0 0 2 45.271484 L 2 88 L 45 88 A 42.999999 42.999999 0 0 0 88 45 A 42.999999 42.999999 0 0 0 45 2 L 44.728516 2 L 2 2 z "})))},et=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=t.orientation,o=["top","left","top","left"],r=["right","bottom","left","top"];return l.a.createElement(Je,{selected:t.isSelected()},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i}),n.map((function(e,t){return l.a.createElement(qe,{key:e.getName(),name:e.getName(),position:i[t],edge:o[a],side:r[a]})})),l.a.createElement(qe,{name:"out",side:["left","top","right","bottom"][a]}),l.a.createElement($e,{orientation:a}))},tt=function(){return l.a.createElement($e,{size:30})};var nt,it,at=new ie({type:"And",name:"And",description:'Logic "and" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.INPUT_PORTS_NUMBER);this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:10});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:10})}executeBit(e){return e.every(e=>1===e)?1:e.some(e=>0===e)?0:"e"}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit)}}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:et,icon:tt}),ot=oe.a.div(nt||(nt=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),rt=Object(oe.a)(Ye)(it||(it=Object(ae.a)(["\n  position: absolute;\n  ","\n"])),(function(e){return"in"===e.name||"out"===e.name?"".concat(e.side,": 29px;"):""})),lt=function(e){var t=e.size,n=void 0===t?30:t,i=e.orientation;return l.a.createElement("svg",{height:n,width:n,viewBox:"0 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{style:{transform:"rotate(".concat(90*i,"deg)"),transformOrigin:"center"}},l.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"})))},ct=function(e){var t=e.model,n=t.options.selected,i=t.orientation;return l.a.createElement(ot,{selected:n},l.a.createElement(rt,{name:"in",side:["right","bottom","left","top"][i]}),l.a.createElement(rt,{name:"out",side:["left","top","right","bottom"][i]}),l.a.createElement(lt,{orientation:i}))},st=function(){return l.a.createElement(lt,{size:30})};var ut,dt,pt,ft=new ie({type:"Buffer",name:"Buffer",description:"Simple buffer",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.DATA_BITS);this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("in",{bits:t,orientation:(this.orientation+2)%4,offset:1,length:10}),this.addOutputPort("out",{bits:t,orientation:this.orientation,offset:1,length:10})}step(e){return{out:e.in}}},widget:ct,icon:st}),mt=oe.a.div(ut||(ut=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n\n  transition: 100ms linear;\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),ht=oe.a.button(dt||(dt=Object(ae.a)(["\n  position: absolute;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  outline: none;\n\n  border: 2px solid rgba(0, 0, 0, 0.3);\n  background: linear-gradient(\n    225deg,\n    rgba(238, 0, 0, 1) 0%,\n    rgba(125, 20, 20, 1) 100%\n  );\n\n  :active {\n    border: 2px solid rgba(255, 255, 255, 0.5);\n    background: linear-gradient(\n      225deg,\n      rgba(125, 20, 20, 1) 0%,\n      rgba(238, 0, 0, 1) 100%\n    );\n  }\n"]))),gt=Object(oe.a)(Ye)(pt||(pt=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": 28px")})),bt=function(e){var t=e.model,n=t.options.selected,i=Object(r.useRef)(),a=function(e){i.current&&!i.current.contains(e.target)&&t.onRelease()};Object(r.useEffect)((function(){return document.addEventListener("mouseup",a),function(){return document.removeEventListener("mouseup",a)}}));return l.a.createElement(mt,{selected:n},l.a.createElement(gt,{name:"out",side:["left","top","right","bottom"][t.orientation]}),l.a.createElement(ht,{ref:i,onMouseDown:function(){return t.onClick()},onMouseUp:function(){return t.onRelease()}}))},vt=function(){return l.a.createElement(mt,null,l.a.createElement(ht,{as:"div"}))};var yt,Et,xt,Ot=new ie({type:"Button",name:"Button",description:"Simple button",group:"Input & output",configurations:[{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.canRotate=!0,this.orientation=e.ORIENTATION,this.addOutputPort("out",{orientation:this.orientation,offset:0,length:10})}onSimulationStart(){this.emit({out:0})}onClick(){this.emit({out:1})}onRelease(){this.emit({out:0})}},widget:bt,icon:vt}),kt=Object(oe.a)(Ye)(yt||(yt=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": 28px")})),wt=oe.a.div(Et||(Et=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  box-shadow: 0 0 ","px black;\n  border: 2px solid\n    ",";\n  border-radius: 15px;\n"])),(function(e){return"rgba(62, 62, 62, ".concat(e.selected?.5:1,")")}),(function(e){return e.isActive?15:0}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Pt=oe.a.div(xt||(xt=Object(ae.a)(["\n  width: 8px;\n  height: 8px;\n\n  background: black;\n  border-radius: 4px;\n"]))),jt=function(e){var t=e.selected,n=e.isActive,i=e.children;return l.a.createElement(wt,{selected:t,isActive:n,"data-testid":"body"},l.a.createElement(Pt,null),i)},St=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(jt,{selected:n,isActive:t.isActive()},l.a.createElement(kt,{name:"in",side:["right","bottom","left","top"][t.orientation]}))},Ct=function(){return l.a.createElement(jt,{color:"#00ff00"})};var Tt,At,It=new ie({type:"Buzzer",name:"Buzzer",description:"Outputs sound at a give frequency",group:"Input & output",configurations:[{name:"FREQUENCY_HZ",type:"number",default:300,label:"Sound frequency (in Hertz)",min:0,max:2e4,validate:function(e){return e<this.min?"Minimum frequency is ".concat(this.min," Hz"):e>this.max?"Maximum frequency is ".concat(this.max," Hz"):null}},{name:"WAVEFORM",type:"select",default:"SINE",label:"Waveform",options:[{label:"Sine",value:"SINE"},{label:"Square",value:"SQUARE"},{label:"Sawtooth",value:"SAWTOOTH"},{label:"Triangle",value:"TRIANGLE"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.frequencyHz=Number(e.FREQUENCY_HZ),this.waveform=e.WAVEFORM,this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("in",{orientation:(this.orientation+2)%4,offset:0,length:10})}onSimulationStart(){this.audio=this.createAudio(this.frequencyHz,this.waveform),1===this.getInput()&&this.audio.play()}onSimulationPause(){this.audio.pause()}step(e){e.in?this.audio.play():this.audio.pause()}getInput(){const e=this.getPort("in").getValue();return e?e[0]:0}isActive(){return!!this.getInput()}},widget:St,icon:Ct}),Lt=Object(oe.a)(Ye)(Tt||(Tt=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": 28px")})),Nt=oe.a.div(At||(At=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n\n  transition: 100ms linear;\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Bt=function(e){var t=e.isActive,n=e.color,i=e.periodMs,a=e.animateTransition;return l.a.createElement("svg",{width:30,height:30,viewBox:"0 0 7.9374997 7.9375003",strokeWidth:"1"},l.a.createElement("path",{"data-testid":"decoration",stroke:n,strokeWidth:.75,fill:"none",style:{transform:t?"scaleX(1)":"scaleX(-1)",transformOrigin:"center",transition:a?"calc(".concat(i,"ms / 2 * 0.4) ease-in-out"):"none"},d:"M 1.8683545,4.4337648 V 6.14192 H 4.0062447 V 1.79558 h 2.0629007 v 1.7578226"}))},Mt=function(e){var t=e.model,n=t.options.selected,i=t.periodMs,a=t.getPort("out");return l.a.createElement(Nt,{selected:n},l.a.createElement(Lt,{name:"out",side:["left","top","right","bottom"][t.orientation]}),l.a.createElement(Bt,{isActive:t.isActive(),color:a.getColor(),periodMs:i,animateTransition:i>=500}))},zt=function(){return l.a.createElement(Nt,null,l.a.createElement(Bt,{color:"var(--port-unconnected)"}))};var Dt,Rt,Ft=new ie({type:"Clock",name:"Clock",description:"Generates a clock signal",group:"Input & output",configurations:[{name:"FREQUENCY_HZ",type:"number",default:1,label:"Frequency (in Hz)",step:.25,min:.25,max:1e3,validate:function(e){return e<this.min?"Frequency should be greater than ".concat(this.min," Hz"):e>this.max?"Frequency should be lesser than ".concat(this.max," Hz"):e%this.step!==0?"Frequency should be divisible by ".concat(this.step," Hz"):null}},{name:"HIGH_DURATION",type:"number",default:1,label:"High duration (in cycles)",min:1,validate:function(e){return e<this.min?"High duration should be greater than ".concat(this.min):null}},{name:"LOW_DURATION",type:"number",default:1,label:"Low duration (in cycles)",min:1,validate:function(e){return e<this.min?"Low duration should be greater than ".concat(this.min):null}},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.canRotate=!0,this.orientation=e.ORIENTATION,this.addOutputPort("out",{orientation:this.orientation,offset:0,length:10}),this.configurations=e,this.output=0,this.emitInterval=null,this.periodMs=1e3/this.configurations.FREQUENCY_HZ,this.highCount=0,this.lowCount=0}onSimulationStart(){this.emit({out:this.output}),this.emitInterval=setInterval(()=>{const e=this.output;this.output=this.getNextOutput(),e!==this.output&&this.emit({out:this.output})},this.periodMs/2)}getNextOutput(){const{HIGH_DURATION:e,LOW_DURATION:t}=this.configurations;return 1===this.output?(this.highCount+=1,this.highCount===e?(this.highCount=0,0):1):(this.lowCount+=1,this.lowCount===t?(this.lowCount=0,1):0)}onSimulationPause(){clearInterval(this.emitInterval)}onSimulationStop(){clearInterval(this.emitInterval)}getOutput(){return this.getPort("out").getValue()||[0]}isActive(){return 1===this.getOutput()[0]}},widget:Mt,icon:zt}),Wt=oe.a.div(Dt||(Dt=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Ht=Object(oe.a)(Ye)(Rt||(Rt=Object(ae.a)(["\n  position: absolute;\n  ","\n"])),(function(e){return"control"===e.name||"in"===e.name||"out"===e.name?"".concat(e.side,": 30px;"):""})),_t=function(e){var t=e.size,n=void 0===t?30:t,i=e.orientation;e.x1,e.y1,e.x2,e.y2;return l.a.createElement("svg",{height:n,width:n,viewBox:"0 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{style:{transform:"rotate(".concat(90*i,"deg)"),transformOrigin:"center"}},l.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"}),l.a.createElement("line",{x1:"22.5",y1:"32.5",x2:"22.5",y2:"45"})))},Vt=function(e){var t=e.model,n=t.options.selected,i=t.orientation;return l.a.createElement(Wt,{selected:n},l.a.createElement(Ht,{name:"control",side:["top","right","bottom","left"][i]}),l.a.createElement(Ht,{name:"in",side:["right","bottom","left","top"][i]}),l.a.createElement(Ht,{name:"out",side:["left","top","right","bottom"][i]}),l.a.createElement(_t,{orientation:i,x1:[22.5,0][i%2],y1:[32.5,22.5][i%2],x2:[22.5,12.5][i%2],y2:[45,22.5][i%2]}))},Ut=function(){return l.a.createElement(_t,{size:30})};var Kt,Xt,Yt=new ie({type:"ControlledBuffer",name:"Controlled buffer",description:"Useful for I/O managing",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.DATA_BITS);this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("control",{orientation:(this.orientation+1)%4,offset:0,length:10}),this.addInputPort("in",{bits:t,orientation:(this.orientation+2)%4,offset:0,length:10}),this.addOutputPort("out",{bits:t,orientation:this.orientation,offset:0,length:10})}step(e){return 0===e.control?{out:"x"}:{out:e.in}}stepFloating(e){return"x"===e.control[0]?{out:"e"}:0===e.control[0]?{out:"x"}:{out:e.in}}stepError(e){return this.stepFloating(e)}},widget:Vt,icon:Ut}),Zt=oe.a.div(Kt||(Kt=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Gt=Object(oe.a)(Ye)(Xt||(Xt=Object(ae.a)(["\n  position: absolute;\n  ","\n"])),(function(e){return"control"===e.name?"".concat(e.side,": 30px; ").concat(e.edge,": 10px"):"in"===e.name?"".concat(e.side,": 45px;"):"out"===e.name?"".concat(e.side,": 39px;"):""})),Qt=function(e){var t=e.size,n=void 0===t?30:t,i=e.dWidth,a=void 0===i?15:i,o=e.dHeight,r=void 0===o?0:o,c=e.orientation,s=void 0===c?0:c,u=e.translation,d=void 0===u?0:u;return l.a.createElement("svg",{height:n+r,width:n+a,viewBox:"11 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"rotate(".concat(90*s," 28 17) translate(").concat(d,")")},l.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"}),l.a.createElement("circle",{r:"8",cy:"22",cx:"51"}),l.a.createElement("line",{x1:"22.5",y1:"32.5",x2:"22.5",y2:"45"})))},Jt=function(e){var t=e.model,n=t.options.selected,i=t.orientation;return l.a.createElement(Zt,{selected:n},l.a.createElement(Gt,{name:"control",side:["top","right","bottom","left"][i],edge:["left","top","right","bottom"][i]}),l.a.createElement(Gt,{name:"in",side:["right","bottom","left","top"][i]}),l.a.createElement(Gt,{name:"out",side:["left","top","right","bottom"][i]}),l.a.createElement(Qt,{dWidth:[15,0][i%2],dHeight:[0,15][i%2],orientation:i,translation:["0 0","0 -11","-12 -11","-12 0"][i]}))},qt=function(){return l.a.createElement(Qt,{size:30})};var $t,en,tn,nn=new ie({type:"ControlledInverter",name:"Controlled inverter",description:"Useful for I/O managing",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.DATA_BITS);this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("control",{orientation:(this.orientation+1)%4,offset:0,length:10}),this.addInputPort("in",{bits:t,orientation:(this.orientation+2)%4,offset:0,length:10}),this.addOutputPort("out",{bits:t,orientation:this.orientation,offset:2,length:14})}step(e){return 0===e.control?{out:"x"}:{out:~e.in}}stepFloating(e){return"x"===e.control[0]?{out:"e"}:0===e.control[0]?{out:"x"}:{out:e.in.map(e=>0===e?1:1===e?0:"x"===e?"e":e)}}stepError(e){return this.stepFloating(e)}},widget:Jt,icon:qt}),an=oe.a.div($t||($t=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  font-size: 12px;\n\n  transition: 100ms linear;\n\n  background: ",";\n\n  border: 2px solid\n    ",";\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),on=Object(oe.a)((function(e){var t=e.className,n=e.selected;return l.a.createElement("svg",{className:t,width:12,height:20,viewBox:"0 0 12 20",stroke:"var(--border-".concat(n?"":"un","selected)"),strokeWidth:2,strokeLinecap:"round"},l.a.createElement("line",{x1:0,y1:0,x2:6,y2:10}),l.a.createElement("line",{x1:6,y1:10,x2:0,y2:20}))}))(en||(en=Object(ae.a)(["\n  position: absolute;\n  left: -1px;\n"]))),rn=Object(oe.a)(Ye)(tn||(tn=Object(ae.a)(["\n  position: absolute;\n  ","\n"])),(function(e){return"in"===e.name?"left: -7px;":"out"===e.name?"right: -7px;":""})),ln=function(e){var t=e.model.options.selected;return l.a.createElement(an,{selected:t},l.a.createElement(on,{selected:t}),l.a.createElement(rn,{name:"in"}),l.a.createElement(rn,{name:"out"}),"++")},cn=function(){return l.a.createElement(an,null,"++")};var sn,un,dn=new ie({type:"Counter",name:"Counter",description:"Counts every input rising or falling edge",group:"Miscellaneous",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"COUNT_ON",type:"select",default:"rising",label:"Count on",options:[{label:"Rising edge",value:"rising"},{label:"Falling edge",value:"falling"}]},{name:"START_AT",type:"number",default:0,label:"Start value at",min:0,max:R[16],validate:function(e,t){var n=Number(t.DATA_BITS);return e>R[n]?"Maximum value for ".concat(n,"-bit is ").concat(R[n]):null}},{name:"WRAP_AT",type:"number",default:0,label:"Wrap value at (0 means no wrap)",min:0,max:R[16],validate:function(e,t){var n=Number(t.DATA_BITS),i=Number(t.START_AT);return e>R[n]?"Maximum value for ".concat(n,"-bit is ").concat(R[n]):0!==e&&e<=i?"Value must be greater than ".concat(i," (start value)"):null}},{name:"STEP_VALUE",type:"number",default:1,label:"Step value",min:1,max:R[16],validate:function(e,t){var n=Number(t.DATA_BITS);return e>R[n]?"Maximum value for ".concat(n,"-bit is ").concat(R[n]):null}}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.countOnRising="rising"===e.COUNT_ON,this.startAt=e.START_AT,this.wrapAt=e.WRAP_AT||2**this.dataBits,this.stepValue=e.STEP_VALUE,this.addInputPort("in"),this.addOutputPort("out",{bits:this.dataBits}),this.current=this.startAt}isRisingEdge(e){return this.countOnRising?e.in.risingEdge:e.in.fallingEdge}step(e,t){return this.isRisingEdge(t)?(this.current+=this.stepValue,this.current>=this.wrapAt&&(this.current=this.startAt),{out:this.current}):{out:this.current}}},widget:ln,icon:cn}),pn=Object(oe.a)(Ye)(sn||(sn=Object(ae.a)(["\n  position: absolute;\n  ",";\n  ",";\n"])),(function(e){return"in"===e.name?"left: -5px;":"selection"===e.name?"left: 10px;":"right: -5px;"}),(function(e){return"selection"===e.name?"bottom: -5px;":"top: ".concat((e.position||0)-5,"px;")})),fn=oe.a.div(un||(un=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"])),(function(e){return 15*(e.outputNumber+2)})),mn=function(e){var t=e.selected,n=e.outputNumber,i=e.icon,a=15*(n+2);return l.a.createElement("svg",{viewBox:"0 0 30 ".concat(a),height:i?30:a,width:i?15:30,fill:t?"var(--body-selected)":"var(--body-unselected)",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"round",strokeWidth:"2"},l.a.createElement("path",{d:"M0,15 L0,".concat(a-15," L30,").concat(a," L30,0 Z")}),l.a.createElement("path",{d:"M15,".concat(a-7.5," L15,").concat(a)}))},hn=function(e){var t=e.model,n=t.options.selected,i=Object.values(t.getOutputPorts()),a=t.outputNumber;return l.a.createElement(fn,{outputNumber:a},l.a.createElement(pn,{name:"in",position:15*(a+2)/2}),l.a.createElement(pn,{name:"selection"}),i.map((function(e,t){return l.a.createElement(pn,{key:e.getName(),name:e.getName(),position:15*(t+1)})})),l.a.createElement(mn,{selected:n,outputNumber:a}))},gn=function(){return l.a.createElement(mn,{dataBits:1,outputNumber:2,icon:!0})};var bn,vn,yn=new ie({type:"Demux",name:"Demux",description:"Demultiplexer",group:"Plexers",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bits",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"OUTPUT_NUMBER",type:"select",default:"2",label:"Number of outputs",options:[{label:"2",value:"2"},{label:"4",value:"4"},{label:"16",value:"16"}]}],model:class extends ${initialize(e){const t=Number(e.DATA_BITS);this.outputNumber=Number(e.OUTPUT_NUMBER),this.addInputPort("in",{bits:t}),this.addInputPort("selection",{bits:Math.log2(this.outputNumber)});for(let n=0;n<this.outputNumber;n+=1)this.addOutputPort("out"+n,{bits:t})}step(e){return{...Object.fromEntries([...new Array(this.outputNumber)].map((e,t)=>["out"+t,0])),["out"+e.selection]:e.in}}},widget:hn,icon:gn}),En=Object(oe.a)(Ye)(bn||(bn=Object(ae.a)(["\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  transform: translateX(-50%);\n"]))),xn=oe.a.div(vn||(vn=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n"]))),On=function(e){var t=e.selected,n=e.dataBits,i=void 0===n?1:n;return l.a.createElement("svg",{viewBox:"0 0 30 30",width:"30",height:"30",fill:"none",stroke:t?"var(--value-5)":"var(--value-0)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.a.createElement("polyline",{points:"15 0 15 15",strokeWidth:"var(--link-".concat(i,"-bit-width)"),strokeLinecap:"butt"}),l.a.createElement("polyline",{points:"7 15 23 15"}),l.a.createElement("polyline",{points:"7 15 2 25"}),l.a.createElement("polyline",{points:"15 15 9 25"}),l.a.createElement("polyline",{points:"23 15 17 25"}))},kn=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(xn,null,l.a.createElement(On,{selected:n,dataBits:t.dataBits}),l.a.createElement(En,{name:"out"}))},wn=function(){return l.a.createElement(On,null)};var Pn,jn,Sn,Cn,Tn=new ie({type:"Ground",name:"Ground",description:"Ground (GND) component",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.addOutputPort("out",{bits:this.dataBits})}onSimulationStart(){this.emit({out:0})}},widget:kn,icon:wn}),An={1:{width:30,height:30},2:{width:60,height:30},4:{width:120,height:30},8:{width:120,height:60},16:{width:240,height:60}},In={0:"var(--value-off)",1:"var(--value-on)",x:"var(--value-floating)"},Ln={0:"var(--value-on)",1:"var(--value-off)",x:"black"},Nn=Object(oe.a)(Ye)(Pn||(Pn=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": ").concat(e.position-2,"px")})),Bn=oe.a.div(jn||(jn=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  \n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"])),(function(e){return An[e.dataBits].width}),(function(e){return An[e.dataBits].height}),(function(e){return e.selected?"var(--input-body-selected)":"var(--input-body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Mn=oe.a.div(Sn||(Sn=Object(ae.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  align-items: center;\n\n  max-width: 215px;\n"]))),zn=oe.a.button(Cn||(Cn=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 100%;\n\n  color: ",";\n  font-family: monospace;\n\n  transition: 100ms linear;\n"])),(function(e){return In[e.value]}),(function(e){return Ln[e.value]}),(function(e){return 1===e.value?"black":"white"})),Dn=function(e){var t=e.model,n=t.options.selected,i=t.configurations.DATA_BITS,a=Number(i),o=t.orientation,r=An[a],c=[r.width,r.height,r.width,r.height];return l.a.createElement(Bn,{selected:n,dataBits:a},l.a.createElement(Mn,null,Object(E.a)(new Array(a)).map((function(e,n){var i=t.getBitAt(n);return l.a.createElement(zn,{key:n,onClick:function(){return t.onClick(n)},value:i},i)}))),l.a.createElement(Nn,{name:"out",side:["left","top","right","bottom"][o],position:c[o]}))},Rn=function(){return l.a.createElement(Bn,{dataBits:1},l.a.createElement(zn,{as:"div",value:0}))};var Fn,Wn,Hn=new ie({type:"Input",name:"Input pin",description:"Simple input pin",group:"Input & output",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"THREE_STATE",type:"select",default:"false",label:"Three state",options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.threeState="true"===e.THREE_STATE,this.canRotate=!0,this.orientation=e.ORIENTATION,this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:0,length:10})}onSimulationStart(){this.emit({out:0})}nextValue(e){return"x"===e?0:0===e?1:this.threeState?"x":0}onClick(e){this.emit({out:this.getOutput().map((t,n)=>n===e?this.nextValue(t):t)})}getOutput(){return this.getPort("out").getValue()||Array(this.dataBits).fill(0)}getBitAt(e){return this.getOutput()[e]}},widget:Dn,icon:Rn}),_n=Object(oe.a)(Ye)(Fn||(Fn=Object(ae.a)(["\n  position: absolute;\n\n  ","\n"])),(function(e){return"out"===e.name?"right: -5px; top: -5px":"left: -5px; bottom: ".concat(e.position-5,"px;")})),Vn=oe.a.div(Wn||(Wn=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"])),(function(e){return 15*e.dataBits})),Un=function(e){var t=e.selected,n=e.dataBits,i=15*n;return l.a.createElement("svg",{viewBox:"0 0 30 ".concat(i),height:i,width:"30",fill:"none",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"butt",strokeWidth:"2"},l.a.createElement("path",{strokeWidth:"4",d:"M30,0 L15,15 L15,".concat(i)}),Object(E.a)(new Array(n)).map((function(e,t){return t})).map((function(e){var t=i-15*e;return l.a.createElement("path",{key:e,d:"M15,".concat(t," L0,").concat(t)})})))},Kn=function(e){var t=e.model,n=t.options.selected,i=t.configurations.DATA_BITS,a=Number(i),o=Object.values(t.getInputPorts());return l.a.createElement(Vn,{dataBits:a},o.map((function(e,t){return l.a.createElement(_n,{key:e.getName(),name:e.getName(),position:15*t})})),l.a.createElement(_n,{name:"out"}),l.a.createElement(Un,{selected:n,dataBits:a}))},Xn=function(){return l.a.createElement(Un,{dataBits:2})};var Yn,Zn,Gn=new ie({type:"Joiner",name:"Joiner",description:"Joins N 1 bit wires into one N bit wire",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"2",label:"Output data bits",options:[{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:class extends ${initialize(e){this.bits=Number(e.DATA_BITS);for(let t=0;t<this.bits;t+=1)this.addInputPort("in"+t);this.addOutputPort("out",{bits:this.bits})}step(e){return{out:Object.values(e).map(e=>e.asArray(1)[0]).map((e,t,n)=>n[n.length-t-1])}}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:Kn,icon:Xn}),Qn=Object(oe.a)(Ye)(Yn||(Yn=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": 28px")})),Jn=oe.a.div(Zn||(Zn=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  box-shadow: 0 0 ","px\n    ",";\n  border: 2px solid\n    ",";\n  border-radius: 15px;\n"])),(function(e){return"".concat(e.color).concat(e.selected?"80":"ff")}),(function(e){return e.isActive?15:0}),(function(e){return e.color}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),qn=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(Jn,{selected:n,color:t.getColor(),isActive:t.isActive(),"data-testid":"shape"},l.a.createElement(Qn,{name:"in",side:["right","bottom","left","top"][t.orientation]}))},$n=function(){return l.a.createElement(Jn,{color:"#00ff00"})};var ei,ti,ni=new ie({type:"Led",name:"LED",description:"Simple LED component",group:"Input & output",configurations:[{name:"ACTIVE_WHEN",type:"select",default:"HIGH",label:"Active when",options:[{label:"High",value:"HIGH"},{label:"Low",value:"LOW"}]},{name:"ON_COLOR",type:"select",default:"#00ff00",label:"On color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]},{name:"OFF_COLOR",type:"select",default:"#000000",label:"Off color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.activeWhen=e.ACTIVE_WHEN,this.colors={on:e.ON_COLOR,off:e.OFF_COLOR},this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("in",{orientation:(this.orientation+2)%4,offset:0,length:10})}getInput(){const e=this.getPort("in").getValue();return e?e[0]:0}isActive(){const e=this.getInput();return"HIGH"===this.activeWhen?0!==e:0===e}getColor(){return this.isActive()?this.colors.on:this.colors.off}},widget:qn,icon:$n}),ii=Object(oe.a)(Ye)(ei||(ei=Object(ae.a)(["\n  position: absolute;\n  ",";\n  ",";\n"])),(function(e){return"out"===e.name?"right: -5px;":"selection"===e.name?"left: 10px;":"left: -5px;"}),(function(e){return"selection"===e.name?"bottom: -5px;":"top: ".concat((e.position||0)-5,"px;")})),ai=oe.a.div(ti||(ti=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"])),(function(e){return 15*(e.inputNumber+2)})),oi=function(e){var t=e.selected,n=e.inputNumber,i=e.icon,a=15*(n+2);return l.a.createElement("svg",{viewBox:"0 0 30 ".concat(a),height:i?30:a,width:i?15:30,fill:t?"var(--body-selected)":"var(--body-unselected)",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"round",strokeWidth:"2"},l.a.createElement("path",{d:"M0,0 L0,".concat(a," L30,").concat(a-15," L30,15 Z")}),l.a.createElement("path",{d:"M15,".concat(a-7.5," L15,").concat(a)}))},ri=function(e){var t=e.model,n=t.options.selected,i=Object.values(t.getInputPorts()),a=i.length;return l.a.createElement(ai,{inputNumber:a},i.map((function(e,t){return l.a.createElement(ii,{key:e.getName(),name:e.getName(),position:15*(t+1)})})),l.a.createElement(ii,{name:"out",position:15*(a+1)/2}),l.a.createElement(oi,{selected:n,inputNumber:a}))},li=function(){return l.a.createElement(oi,{dataBits:1,inputNumber:2,icon:!0})};var ci,si,ui=new ie({type:"Mux",name:"Mux",description:"Multiplexer",group:"Plexers",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bits",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"INPUT_NUMBER",type:"select",default:"2",label:"Number of inputs",options:[{label:"2",value:"2"},{label:"4",value:"4"},{label:"16",value:"16"}]}],model:class extends ${initialize(e){const t=Number(e.DATA_BITS),n=Number(e.INPUT_NUMBER);for(let i=0;i<n;i+=1)this.addInputPort("in"+i,{bits:t});this.addInputPort("selection",{bits:Math.log2(n)}),this.addOutputPort("out",{bits:t})}step(e){return{out:e["in"+e.selection]}}},widget:ri,icon:li}),di=oe.a.div(ci||(ci=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),pi=Object(oe.a)(Ye)(si||(si=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"".concat(e.side,": 100px"):"".concat(e.side,": 103px")})),fi=function(e){var t=e.size,n=void 0===t?90:t,i=e.dWidth,a=void 0===i?15:i,o=e.dHeight,r=void 0===o?0:o,c=e.vbWidth,s=void 0===c?27.781249:c,u=e.vbHeight,d=void 0===u?23.812501:u,p=e.orientation,f=void 0===p?0:p,m=e.translation,h=void 0===m?0:m;return l.a.createElement("svg",{height:n+r,width:n+a,viewBox:"0 0 ".concat(s," ").concat(d),fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"scale(0.26458333) rotate(".concat(90*f," 45 45) translate(").concat(h,")")},l.a.createElement("path",{d:"m 2,2 v 43 a 42.999999,42.999999 0 0 0 0,0.271484 V 88 H 45 A 42.999999,42.999999 0 0 0 88,45 42.999999,42.999999 0 0 0 45,2 h -0.271484 z"}),l.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"})))},mi=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=t.orientation,o=["top","left","top","left"],r=["right","bottom","left","top"],c=[15,0],s=[0,15];return l.a.createElement(di,{selected:t.isSelected(),width:90+c[a%2],height:90+s[a%2]},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i}),n.map((function(e,t){return l.a.createElement(pi,{key:e.getName(),name:e.getName(),position:i[t],edge:o[a],side:r[a]})})),l.a.createElement(pi,{name:"out",side:["left","top","right","bottom"][a]}),l.a.createElement(fi,{dWidth:c[a%2],dHeight:s[a%2],vbWidth:[27.781249,23.812501][a%2],vbHeight:[23.812501,27.781249][a%2],orientation:a,translation:[0,0,-15,-15][a]}))},hi=function(){return l.a.createElement(fi,{size:30})};var gi,bi,vi,yi=new ie({type:"Nand",name:"Nand",description:'Logic "not and" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.INPUT_PORTS_NUMBER);this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:10});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:13})}executeBit(e){return e.some(e=>0===e)?1:e.every(e=>1===e)?0:"e"}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit)}}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:mi,icon:hi}),Ei=oe.a.div(gi||(gi=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),xi=oe.a.div(bi||(bi=Object(ae.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"])),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),Oi=Object(oe.a)(Ye)(vi||(vi=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"".concat(e.side,": 100px"):"".concat(e.side,": 103px")})),ki=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,a=void 0===i?[]:i,o=e.dWidth,r=void 0===o?15:o,c=e.dHeight,s=void 0===c?0:c,u=e.vbWidth,d=void 0===u?27.781249:u,p=e.vbHeight,f=void 0===p?23.812501:p,m=e.orientation,h=void 0===m?0:m,g=e.translation,b=void 0===g?0:g,v=e.portWidth,y=void 0===v?.5:v,E=e.portColor;return l.a.createElement("svg",{height:n+s,width:n+r,viewBox:"0 0 ".concat(d," ").concat(f),fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"scale(0.26458333) rotate(".concat(90*h," 45 45) translate(").concat(b,")")},l.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z"}),l.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"})),l.a.createElement("g",{transform:"scale(0.26458333) rotate(".concat(90*h," 45 45) translate(").concat(b,")"),strokeWidth:y,stroke:E},a.includes(1)&&l.a.createElement("path",{d:"M 18.4669,15 H 1.44549"}),a.includes(2)&&l.a.createElement("path",{d:"M 20.1902,30 H 1.445"}),a.includes(3)&&l.a.createElement("path",{d:"M 21.1563,45 H 1.445"}),a.includes(4)&&l.a.createElement("path",{d:"M 19.8489,60 H 1.445"}),a.includes(5)&&l.a.createElement("path",{d:"M 16.5984,75 H 1.445"})))},wi=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=n[0].getLineWidth(),o=n[0].getLineColor(),c=t.orientation,s=["top","left","top","left"],u=["right","bottom","left","top"],d=[15,0],p=[0,15];return l.a.createElement(Ei,{selected:t.options.selected,width:90+d[c%2],height:90+p[c%2]},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i,offsetX:12}),n.map((function(e,n){return l.a.createElement(r.Fragment,{key:e.getName()},l.a.createElement(Oi,{name:e.getName(),position:i[n],edge:s[c],side:u[c]}),(i[n]<1||i[n]>5)&&l.a.createElement(xi,{selected:t.isSelected(),position:i[n],edge:s[c],side:u[c]}))})),l.a.createElement(Oi,{name:"out",side:["left","top","right","bottom"][c]}),l.a.createElement(ki,{portPositions:i,dWidth:d[c%2],dHeight:p[c%2],vbWidth:[27.781249,23.812501][c%2],vbHeight:[23.812501,27.781249][c%2],orientation:c,translation:[0,0,-15,-15][c],portWidth:a,portColor:o}))},Pi=function(){return l.a.createElement(ki,{size:30})};var ji,Si,Ci=new ie({type:"Nor",name:"Nor",description:'Logic "not or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.INPUT_PORTS_NUMBER);this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:-5});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:13})}executeBit(e){return e.every(e=>0===e)?1:e.some(e=>1===e)?0:"e"}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit)}}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:wi,icon:Pi}),Ti=oe.a.div(ji||(ji=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Ai=Object(oe.a)(Ye)(Si||(Si=Object(ae.a)(["\n  position: absolute;\n  ","\n"])),(function(e){return"in"===e.name?"".concat(e.side,": 45px;"):"out"===e.name?"".concat(e.side,": 39px;"):""})),Ii=function(e){var t=e.size,n=void 0===t?30:t,i=e.dWidth,a=void 0===i?15:i,o=e.dHeight,r=void 0===o?0:o,c=e.orientation,s=void 0===c?0:c,u=e.translation,d=void 0===u?0:u;return l.a.createElement("svg",{height:n+r,width:n+a,viewBox:"11 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"rotate(".concat(90*s," 28 17) translate(").concat(d,")")},l.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"}),l.a.createElement("circle",{r:"8",cy:"22",cx:"51"})))},Li=function(e){var t=e.model,n=t.options.selected,i=t.orientation,a=[15,0],o=[0,15];return l.a.createElement(Ti,{selected:n,width:30+a[i%2],height:30+o[i%2]},l.a.createElement(Ai,{name:"in",side:["right","bottom","left","top"][i]}),l.a.createElement(Ai,{name:"out",side:["left","top","right","bottom"][i]}),l.a.createElement(Ii,{dWidth:a[i%2],dHeight:o[i%2],orientation:i,translation:["0 0","0 -11","-12 -11","-12 0"][i]}))},Ni=function(){return l.a.createElement(Ii,{size:30})};var Bi,Mi,zi,Di=new ie({type:"Not",name:"Not",description:"Negation component",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("in",{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:0,length:10}),this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:14})}step(e){return{out:e.in.asArray(this.dataBits).map(e=>1===e?0:1)}}},widget:Li,icon:Ni}),Ri=oe.a.div(Bi||(Bi=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n    transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Fi=oe.a.div(Mi||(Mi=Object(ae.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"])),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),Wi=Object(oe.a)(Ye)(zi||(zi=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return e.name,"".concat(e.side,": 88px")})),Hi=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,a=void 0===i?[]:i,o=e.orientation,r=void 0===o?0:o,c=e.portWidth,s=void 0===c?.5:c,u=e.portColor;return l.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",null,l.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z",transform:"scale(0.26458333) rotate(".concat(90*r," 45 45)")})),l.a.createElement("g",{transform:"scale(0.26458333) rotate(".concat(90*r," 45 45)"),strokeWidth:s,stroke:u},a.includes(1)&&l.a.createElement("path",{d:"M 18.4669,15 H 1.44549"}),a.includes(2)&&l.a.createElement("path",{d:"M 20.1902,30 H 1.445"}),a.includes(3)&&l.a.createElement("path",{d:"M 21.1563,45 H 1.445"}),a.includes(4)&&l.a.createElement("path",{d:"M 19.8489,60 H 1.445"}),a.includes(5)&&l.a.createElement("path",{d:"M 16.5984,75 H 1.445"})))},_i=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=n[0].getLineWidth(),o=n[0].getLineColor(),c=t.orientation,s=["top","left","top","left"],u=["right","bottom","left","top"];return l.a.createElement(Ri,{selected:t.options.selected},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i,offsetX:12}),n.map((function(e,n){return l.a.createElement(r.Fragment,{key:e.getName()},l.a.createElement(Wi,{name:e.getName(),position:i[n],edge:s[c],side:u[c]}),(i[n]<1||i[n]>5)&&l.a.createElement(Fi,{selected:t.isSelected(),position:i[n]}))})),l.a.createElement(Wi,{name:"out",side:["left","top","right","bottom"][c]}),l.a.createElement(Hi,{portPositions:i,orientation:c,portWidth:a,portColor:o}))},Vi=function(){return l.a.createElement(Hi,{size:30})};var Ui,Ki,Xi,Yi,Zi,Gi,Qi=new ie({type:"Or",name:"Or",description:'Logic "or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){const t=Number(e.INPUT_PORTS_NUMBER);this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:-5});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:10})}executeBit(e){return e.every(e=>0===e)?0:e.some(e=>1===e)?1:"e"}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit)}}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:_i,icon:Vi}),Ji={1:{width:30,height:30},2:{width:60,height:30},4:{width:120,height:30},8:{width:120,height:60},16:{width:240,height:60}},qi={0:"var(--value-off)",1:"var(--value-on)",x:"var(--value-floating)",e:"var(--value-error)"},$i={0:"var(--value-on)",1:"var(--value-off)",x:"black",e:"black"},ea=Object(oe.a)(Ye)(Ui||(Ui=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": ").concat(e.position-2,"px")})),ta=oe.a.div(Ki||(Ki=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"])),(function(e){return"BITS"===e.format?Ji[e.dataBits].width:Ji[4].width}),(function(e){return"BITS"===e.format?Ji[e.dataBits].height:Ji[4].height}),(function(e){return e.selected?"var(--output-body-selected)":"var(--output-body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),na=oe.a.span(Xi||(Xi=Object(ae.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  align-items: center;\n  font-family: monospace;\n\n  max-width: 215px;\n"]))),ia=oe.a.div(Yi||(Yi=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 100%;\n\n  color: ",";\n  font-family: monospace;\n\n  transition: 100ms linear;\n"])),(function(e){return qi[e.value]}),(function(e){return $i[e.value]}),(function(e){return 1===e.value?"black":"white"})),aa=oe.a.span(Zi||(Zi=Object(ae.a)(["\n  color: var(--value-error);\n  font-weight: bold;\n  font-family: monospace;\n"]))),oa=oe.a.span(Gi||(Gi=Object(ae.a)(["\n  color: var(--value-floating);\n  font-weight: bold;\n  font-family: monospace;\n"]))),ra=function(e){var t=e.model,n=t.options.selected,i=t.configurations,a=i.OUTPUT_FORMAT,o=i.DATA_BITS,r=Number(o),c=t.orientation,s="BITS"===a?Ji[r].width:Ji[4].width,u="BITS"===a?Ji[r].height:Ji[4].height,d=[s,u,s,u];return l.a.createElement(ta,{selected:n,format:a,dataBits:r},l.a.createElement(na,{"data-testid":"pin-container"},"BITS"===a?function(e){var t=e.configurations.DATA_BITS,n=Number(t);return Object(E.a)(new Array(n)).map((function(t,n){var i=e.getBitAt(n);return l.a.createElement(ia,{key:n,value:i},i)}))}(t):function(e,t){var n=e.asNumber();return"e"===n?l.a.createElement(aa,null,"(error)"):"x"===n?l.a.createElement(oa,null,"(floating)"):"DECIMAL"===t?n:"HEXADECIMAL"===t?"0x".concat(n.toString(16).padStart(4,"0")):""}(t.getInput(),a)),l.a.createElement(ea,{name:"in",side:["right","bottom","left","top"][c],position:d[c]}))},la=function(){return l.a.createElement(ta,{dataBits:1,format:"BITS"},l.a.createElement(ia,{as:"div",value:0}))};var ca,sa,ua=new ie({type:"Output",name:"Output pin",description:"Simple output pin",group:"Input & output",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"OUTPUT_FORMAT",type:"select",default:"BITS",label:"Output format",options:[{label:"Bit by bit",value:"BITS"},{label:"Decimal number",value:"DECIMAL"},{label:"Hexadecimal number",value:"HEXADECIMAL"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION,this.addInputPort("in",{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:0,length:10})}getInput(){return this.getPort("in").getValue()||new Array(this.dataBits).fill(0)}getBitAt(e){return this.getInput()[e]}},widget:ra,icon:la}),da=Object(oe.a)(Ye)(ca||(ca=Object(ae.a)(["\n  position: absolute;\n  left: 50%;\n  bottom: -5px;\n  transform: translateX(-50%);\n"]))),pa=oe.a.div(sa||(sa=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n"]))),fa=function(e){var t=e.selected,n=e.dataBits,i=void 0===n?1:n;return l.a.createElement("svg",{viewBox:"0 0 30 30",width:"30",height:"30",fill:"none",stroke:t?"var(--value-5)":"var(--value-10)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.a.createElement("polyline",{points:"15 15 15 30",strokeWidth:"var(--link-".concat(i,"-bit-width)"),strokeLinecap:"butt"}),l.a.createElement("polyline",{points:"7 15 15 0 23 15 7 15",fill:"var(--value-2)",fillOpacity:t?"var(--unselected-opacity)":"var(--selected-opacity)"}))},ma=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(pa,null,l.a.createElement(fa,{selected:n,dataBits:t.dataBits}),l.a.createElement(da,{name:"out"}))},ha=function(){return l.a.createElement(fa,null)};var ga,ba,va,ya,Ea,xa,Oa,ka,wa,Pa,ja=new ie({type:"Power",name:"Power",description:"Power (VCC) component",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:class extends ${initialize(e){this.dataBits=Number(e.DATA_BITS),this.addOutputPort("out",{bits:this.dataBits})}onSimulationStart(){this.emit({out:65535})}},widget:ma,icon:ha}),Sa=oe.a.div(ga||(ga=Object(ae.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n  font-size: 10px;\n\n  background: var(--body-unselected);\n  border: 1px solid var(--border-unselected);\n"]))),Ca=function(){return l.a.createElement(Sa,null,"RAM")};var Ta,Aa,Ia,La,Na,Ba,Ma,za,Da,Ra=oe.a.div(ba||(ba=Object(ae.a)(["\n  position: relative;\n\n  width: 180px;\n  height: 150px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background: ",";\n  border: 1px solid\n    ",";\n\n  transition: 100ms linear;\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Fa=oe.a.div(va||(va=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n\n  overflow: hidden;\n  background: white;\n  border: 2px solid #c9c9c9;\n\n  width: 80%;\n  height: 112px;\n  font-size: 10px;\n"]))),Wa=oe.a.div(ya||(ya=Object(ae.a)(["\n  display: flex;\n  border-bottom: 1px solid #c9c9c9;\n  padding: 0 4px;\n"]))),Ha=oe.a.div(Ea||(Ea=Object(ae.a)(["\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 8px;\n  border-color: ",";\n  margin: auto 4px auto -4px;\n"])),(function(e){var t=e.isSelected;return"transparent transparent transparent ".concat(t?"#f44336":"transparent")})),_a=oe.a.div(xa||(xa=Object(ae.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n"]))),Va=oe.a.span(Oa||(Oa=Object(ae.a)(["\n  margin-right: 4px;\n  padding: 1px 4px;\n  height: fit-content;\n\n  font-family: monospace;\n  font-size: 8px;\n  color: white;\n\n  background: #2642a0;\n  border-radius: 2px;\n"]))),Ua=oe.a.span(ka||(ka=Object(ae.a)(["\n  padding: 4px;\n"]))),Ka=Object(oe.a)((function(e){var t=e.className,n=e.selected;return l.a.createElement("svg",{className:t,width:20,height:12,viewBox:"0 0 20 12",stroke:"var(--border-".concat(n?"":"un","selected)"),strokeWidth:2,strokeLinecap:"round"},l.a.createElement("line",{x1:0,y1:12,x2:10,y2:0}),l.a.createElement("line",{x1:10,y1:0,x2:20,y2:12}))}))(wa||(wa=Object(ae.a)(["\n  position: absolute;\n  bottom: -1px;\n  left: calc(50% - 10px);\n\n  transition: 100ms linear;\n"]))),Xa=Object(oe.a)(Ye)(Pa||(Pa=Object(ae.a)(["\n  position: absolute;\n\n  ","\n"])),(function(e){return"clock"===e.name?"bottom: -5px":"load"===e.name?"bottom: -5px; right: calc(50% - 20px)":"clear"===e.name?"bottom: -5px; right: calc(50% - 35px)":"select"===e.name?"bottom: -5px; right: calc(50% - 50px)":"address"===e.name?"left: -5px":"data"===e.name?"right: -5px":""})),Ya=function(e){var t=e.model,n=t.isSelected(),i=t.getMemory(),a=t.getAddress(),o=function(e,t){return t<=1?[0,5]:t>=e.length-2?[e.length-5,e.length]:[t-2,t+3]}(i,a);return l.a.createElement(Ra,{selected:n},l.a.createElement(Ka,{selected:n}),l.a.createElement(Xa,{name:"clock"}),l.a.createElement(Xa,{name:"load"}),l.a.createElement(Xa,{name:"address"}),l.a.createElement(Xa,{name:"data"}),l.a.createElement(Xa,{name:"clear"}),l.a.createElement(Xa,{name:"select"}),l.a.createElement(Fa,null,i.slice.apply(i,Object(E.a)(o)).map((function(e,t){var n=t+o[0],i="0x".concat(n.toString(16).padStart(2,"0"));return l.a.createElement(Wa,{key:i},l.a.createElement(Ha,{isSelected:n===a}),l.a.createElement(_a,null,l.a.createElement(Va,null,i),l.a.createElement(Ua,null,e)))}))))},Za=new ie({type:"Ram",name:"RAM",description:"Random access memory",group:"Memory",configurations:[{name:"DATA_WIDTH",type:"select",default:"1",label:"Data width",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ADDRESS_WIDTH",type:"select",default:"1",label:"Address width",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"}]},{name:"CONTENT",type:"binary",label:"Initial content"}],model:class extends ${initialize(e){this.dataWidth=Number(e.DATA_WIDTH),this.addressWidth=Number(e.ADDRESS_WIDTH),this.memory=(e.CONTENT||"").parseBinary(this.dataWidth,2**this.addressWidth),this.addInputPort("clock",{floating:0}),this.addInputPort("load",{floating:1}),this.addInputPort("address",{bits:this.addressWidth,floating:0}),this.addInputPort("clear",{floating:0}),this.addInputPort("select",{floating:1}),this.addOutputPort("data",{bits:this.dataWidth})}clearMemory(){this.memory=Array(2**this.addressWidth).fill(0)}getMemory(){return this.memory}getAddress(){return this.select?(this.currentAddress||0).asNumber():0}step(e,t){return this.currentAddress=e.address,this.select=e.select,e.clear&&this.clearMemory(),e.select?e.load?{data:this.memory[e.address]}:(t.clock.risingEdge&&!e.clear&&(this.memory[e.address]=this.getPort("data").getWireValue().asNumber()),{data:"x"}):{data:"x"}}},widget:Ya,icon:Ca}),Ga=oe.a.div(Ta||(Ta=Object(ae.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n  font-size: 10px;\n\n  background: var(--body-unselected);\n  border: 1px solid var(--border-unselected);\n"]))),Qa=function(){return l.a.createElement(Ga,null,"ROM")};var Ja,qa,$a=oe.a.div(Aa||(Aa=Object(ae.a)(["\n  position: relative;\n\n  width: 180px;\n  height: 150px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background: ",";\n  border: 1px solid\n    ",";\n\n  transition: 100ms linear;\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),eo=oe.a.div(Ia||(Ia=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n\n  overflow: hidden;\n  background: white;\n  border: 2px solid #c9c9c9;\n\n  width: 80%;\n  height: 112px;\n  font-size: 10px;\n"]))),to=oe.a.div(La||(La=Object(ae.a)(["\n  display: flex;\n  border-bottom: 1px solid #c9c9c9;\n  padding: 0 4px;\n"]))),no=oe.a.div(Na||(Na=Object(ae.a)(["\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 8px;\n  border-color: ",";\n  margin: auto 4px auto -4px;\n"])),(function(e){var t=e.isSelected;return"transparent transparent transparent ".concat(t?"#f44336":"transparent")})),io=oe.a.div(Ba||(Ba=Object(ae.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n"]))),ao=oe.a.span(Ma||(Ma=Object(ae.a)(["\n  margin-right: 4px;\n  padding: 1px 4px;\n  height: fit-content;\n\n  font-family: monospace;\n  font-size: 8px;\n  color: white;\n\n  background: #2642a0;\n  border-radius: 2px;\n"]))),oo=oe.a.span(za||(za=Object(ae.a)(["\n  padding: 4px;\n"]))),ro=Object(oe.a)(Ye)(Da||(Da=Object(ae.a)(["\n  position: absolute;\n\n  ","\n"])),(function(e){return"select"===e.name?"bottom: -5px; right: calc(50% - 50px)":"address"===e.name?"left: -5px":"data"===e.name?"right: -5px":""})),lo=function(e){var t=e.model,n=t.getMemory(),i=t.getAddress(),a=function(e,t){return t<=1?[0,5]:t>=e.length-2?[e.length-5,e.length]:[t-2,t+3]}(n,i);return l.a.createElement($a,{selected:t.isSelected()},l.a.createElement(ro,{name:"address"}),l.a.createElement(ro,{name:"data"}),l.a.createElement(ro,{name:"select"}),l.a.createElement(eo,null,n.slice.apply(n,Object(E.a)(a)).map((function(e,t){var n=t+a[0],o="0x".concat(n.toString(16).padStart(2,"0"));return l.a.createElement(to,{key:o},l.a.createElement(no,{isSelected:n===i}),l.a.createElement(io,null,l.a.createElement(ao,null,o),l.a.createElement(oo,null,e)))}))))},co=new ie({type:"Rom",name:"ROM",description:"Read only memory",group:"Memory",configurations:[{name:"DATA_WIDTH",type:"select",default:"1",label:"Data width",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"ADDRESS_WIDTH",type:"select",default:"1",label:"Address width",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"}]},{name:"CONTENT",type:"binary",label:"Initial content"}],model:class extends ${initialize(e){this.dataWidth=Number(e.DATA_WIDTH),this.addressWidth=Number(e.ADDRESS_WIDTH),this.memory=(e.CONTENT||"").parseBinary(this.dataWidth,2**this.addressWidth),this.addInputPort("address",{bits:this.addressWidth,floating:0}),this.addInputPort("select",{floating:1}),this.addOutputPort("data",{bits:this.dataWidth})}getMemory(){return this.memory}getAddress(){return this.select?(this.currentAddress||0).asNumber():0}step(e){return this.currentAddress=e.address,this.select=e.select,e.select?{data:this.memory[e.address]}:{data:"x"}}},widget:lo,icon:Qa}),so=Object(oe.a)(Ye)(Ja||(Ja=Object(ae.a)(["\n  position: absolute;\n  ",";\n  bottom: ","px;\n"])),(function(e){return"in"===e.name?"left: -5px":"right: -5px"}),(function(e){return(e.position||0)-5})),uo=oe.a.div(qa||(qa=Object(ae.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"])),(function(e){return 15*e.dataBits})),po=function(e){var t=e.selected,n=e.dataBits,i=15*n;return l.a.createElement("svg",{viewBox:"0 0 30 ".concat(i),height:i,width:"30",fill:"none",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"butt",strokeWidth:"2"},l.a.createElement("path",{strokeWidth:"4",d:"M0,".concat(i," L15,").concat(i-15," L15,0")}),Object(E.a)(new Array(n)).map((function(e,t){return t+1})).map((function(e){var t=i-15*e;return l.a.createElement("path",{key:e,d:"M15,".concat(t," L30,").concat(t)})})))},fo=function(e){var t=e.model,n=t.options.selected,i=t.configurations.DATA_BITS,a=Number(i),o=Object.values(t.getOutputPorts());return l.a.createElement(uo,{dataBits:a},l.a.createElement(so,{name:"in"}),o.map((function(e,t){return l.a.createElement(so,{key:e.getName(),name:e.getName(),position:15*(t+1)})})),l.a.createElement(po,{selected:n,dataBits:a}))},mo=function(){return l.a.createElement(po,{dataBits:2})};var ho,go,bo=new ie({type:"Splitter",name:"Splitter",description:"Split wire with N bits into N 1 bit wires",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"2",label:"Input data bits",options:[{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:class extends ${initialize(e){this.bits=Number(e.DATA_BITS),this.addInputPort("in",{bits:this.bits});for(let t=0;t<this.bits;t+=1)this.addOutputPort("out"+t)}step(e){return Object.fromEntries(e.in.asArray(this.bits).map((e,t,{length:n})=>["out"+(n-t-1),e]))}stepFloating(e){return this.step(e)}stepError(e){return this.step(e)}},widget:fo,icon:mo}),vo=["a","b","c","d","e","f","g","dp"],yo=Object(oe.a)(Ye)(ho||(ho=Object(ae.a)(["\n  position: absolute;\n  left: ","px;\n  ","\n"])),(function(e){return e.position.horizontal}),(function(e){return"".concat(e.side,": ").concat((e.icon?36:90)-2,"px;")})),Eo=oe.a.div(go||(go=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  box-shadow: 0 0 ","px\n    ",";\n  border: 2px solid\n    ",";\n  border-radius: 5px;\n"])),(function(e){return e.icon?23:75}),(function(e){return e.icon?36:90}),(function(e){return"#ffffff".concat(e.selected?"80":"ff")}),(function(e){return e.isActive?15:0}),(function(e){return e.color}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),xo=function(e){var t=e.segments,n=e.selected,i=e.icon;return l.a.createElement("svg",{width:i?18:50,height:i?36:90,viewBox:i?"-7 0 60 90":"0 0 50 90",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:n?"80":"ff",fillOpacity:n?"80":"ff"}},l.a.createElement("polyline",{points:"5 18 11 20 32 20 35 14 9 14",fill:t.a,"data-testid":"a"}),l.a.createElement("polyline",{points:"37 14 41 20 39 42 37 44 33 39 34 20",fill:t.b,"data-testid":"b"}),l.a.createElement("polyline",{points:"37 46 38 47 36 71 31 76 29 69 31 51",fill:t.c,"data-testid":"c"}),l.a.createElement("polyline",{points:"0 72 7 69 27 69 29 76 4 76",fill:t.d,"data-testid":"d"}),l.a.createElement("polyline",{points:"4 46 8 51 7 67 0 70 2 47",fill:t.e,"data-testid":"e"}),l.a.createElement("polyline",{points:"5 20 11 22 10 39 4 44 3 42",fill:t.f,"data-testid":"f"}),l.a.createElement("polyline",{points:"6 45 9 48 31 48 35 45 32 41 11 41",fill:t.g,"data-testid":"g"}),l.a.createElement("circle",{r:"5",cx:"45",cy:"71",fill:t.dp,"data-testid":"dp"}))},Oo=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(Eo,{selected:n},l.a.createElement(xo,{selected:n,segments:vo.reduce((function(e,n){return Object(u.a)(Object(u.a)({},e),{},Object(D.a)({},n,t.getColor(n)))}),{})}),vo.map((function(e){return l.a.createElement(yo,{key:e,name:e,position:t.getPositionForSegment(e),side:t.getSideForSegment(e)})})))},ko=function(){return l.a.createElement(Eo,{icon:!0},l.a.createElement(xo,{icon:!0,segments:{a:"#ff0000",b:"#ff0000",c:"#ff0000",d:"#ff0000",e:"#ff0000",f:"#ff0000",g:"#ff0000",dp:"#ff0000"}}))};var wo,Po,jo,So,Co=new ie({type:"Ssd",name:"SSD",description:"Seven segments display",group:"Input & output",configurations:[{name:"ACTIVE_WHEN",type:"select",default:"HIGH",label:"Active when",options:[{label:"High",value:"HIGH"},{label:"Low",value:"LOW"}]},{name:"ON_COLOR",type:"select",default:"#ff0000",label:"On color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]},{name:"OFF_COLOR",type:"select",default:"#00000040",label:"Off color",options:[{label:"Red",value:"#ff000040"},{label:"Green",value:"#00ff0040"},{label:"Blue",value:"#0000ff40"},{label:"White",value:"#ffffff40"},{label:"Black",value:"#00000040"}]}],model:class extends ${initialize(e){this.activeWhen=e.ACTIVE_WHEN,this.colors={on:e.ON_COLOR,off:e.OFF_COLOR},this.canRotate=!1,this.addInputPort("a",{floating:0,error:0,orientation:3,offset:0,length:10}),this.addInputPort("b",{floating:0,error:0,orientation:3,offset:0,length:10}),this.addInputPort("c",{floating:0,error:0,orientation:1,offset:0,length:10}),this.addInputPort("d",{floating:0,error:0,orientation:1,offset:0,length:10}),this.addInputPort("e",{floating:0,error:0,orientation:1,offset:0,length:10}),this.addInputPort("f",{floating:0,error:0,orientation:3,offset:0,length:10}),this.addInputPort("g",{floating:0,error:0,orientation:3,offset:0,length:10}),this.addInputPort("dp",{floating:0,error:0,orientation:1,offset:0,length:10})}getInput(e){return this.getPort(e).getValue()||[0]}isActive(e){const t=this.getInput(e)[0];return"HIGH"===this.activeWhen?0!==t:0===t}getPositionForSegment(e){const t={a:{vertical:1,horizontal:3},b:{vertical:1,horizontal:4},c:{vertical:2,horizontal:3},d:{vertical:2,horizontal:2},e:{vertical:2,horizontal:1},f:{vertical:1,horizontal:2},g:{vertical:1,horizontal:1},dp:{vertical:2,horizontal:4}}[e];return{horizontal:8+15*(t.horizontal-1),vertical:1===t.vertical?-2:88}}getColor(e){return this.isActive(e)?this.colors.on:this.colors.off}getSideForSegment(e){return{a:{side:"bottom"},b:{side:"bottom"},c:{side:"top"},d:{side:"top"},e:{side:"top"},f:{side:"bottom"},g:{side:"bottom"},dp:{side:"top"}}[e].side}},widget:Oo,icon:ko}),To=Object(oe.a)(Ye)(wo||(wo=Object(ae.a)(["\n  position: absolute;\n  ",";\n"])),(function(e){return"".concat(e.side,": ").concat(e.position-2,"px")})),Ao=oe.a.div(Po||(Po=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 60px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Io=oe.a.button(jo||(jo=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 55px;\n  height: 24px;\n  margin: 2px;\n\n  background: #848484;\n  border: 2px solid #313131;\n  border-radius: 15px;\n\n  color: ",";\n  font-family: monospace;\n"])),(function(e){return 1===e.value?"black":"white"})),Lo=oe.a.div(So||(So=Object(ae.a)(["\n  transform: ",";\n\n  width: 15px;\n  height: 15px;\n\n  border-radius: 100%;\n  transition: 100ms linear;\n  background: black;\n"])),(function(e){return e.isActive?"translateX(14px)":"translateX(-14px)"})),No=function(e){var t=e.model,n=t.options.selected,i=t.orientation;return l.a.createElement(Ao,{selected:n},l.a.createElement(Io,{onClick:function(){return t.onClick()}},l.a.createElement(Lo,{isActive:t.isActive()})),l.a.createElement(To,{name:"out",side:["left","top","right","bottom"][i],position:[60,30,60,30][i]}))},Bo=function(){return l.a.createElement(Ao,null,l.a.createElement(Io,{as:"div"},l.a.createElement(Lo,{value:0})))};var Mo,zo,Do,Ro=new ie({type:"Switch",name:"Switch",description:"On/off switch",group:"Input & output",configurations:[{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.canRotate=!0,this.orientation=e.ORIENTATION,this.addOutputPort("out",{orientation:this.orientation,offset:2,length:8})}onSimulationStart(){this.emit({out:0})}onClick(e){const t=1<<e;this.emit({out:this.getOutput()^t})}getOutput(){return this.getPort("out").getValue()||[0]}isActive(){return 1===this.getOutput()[0]}},widget:No,icon:Bo}),Fo=oe.a.div(Mo||(Mo=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Wo=oe.a.div(zo||(zo=Object(ae.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"])),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),Ho=Object(oe.a)(Ye)(Do||(Do=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"".concat(e.side,": 100px"):"".concat(e.side,": 103px")})),_o=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,a=void 0===i?[]:i,o=e.dWidth,r=void 0===o?15:o,c=e.dHeight,s=void 0===c?0:c,u=e.vbWidth,d=void 0===u?27.781249:u,p=e.vbHeight,f=void 0===p?23.812501:p,m=e.orientation,h=void 0===m?0:m,g=e.translation,b=void 0===g?0:g,v=e.portWidth,y=void 0===v?.5:v,E=e.portColor;return l.a.createElement("svg",{height:n+s,width:n+r,viewBox:"0 0 ".concat(d," ").concat(f),fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"rotate(".concat(90*h," 12 12) translate(").concat(b,")")},l.a.createElement("path",{fill:"none",style:{transform:"scale(0.284583, 0.284583) translate(-1px, -3px)"},d:"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616"}),l.a.createElement("g",{transform:"scale(0.26458333)"},l.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z",transform:"translate(7)"}),l.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"}))),l.a.createElement("g",{transform:" rotate(".concat(90*h," 12 12) translate(").concat(b,")"),strokeWidth:y,stroke:E},l.a.createElement("g",{transform:"scale(0.26458333)"},a.includes(1)&&l.a.createElement("path",{d:"M 18.4669,15.5 H 1.44549"}),a.includes(2)&&l.a.createElement("path",{d:"M 20.1902,30.5 H 1.445"}),a.includes(3)&&l.a.createElement("path",{d:"M 21.1563,45.5 H 1.445"}),a.includes(4)&&l.a.createElement("path",{d:"M 19.8489,60.5 H 1.445"}),a.includes(5)&&l.a.createElement("path",{d:"M 16.5984,75.5 H 1.445"}))))},Vo=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=n[0].getLineWidth(),o=n[0].getLineColor(),c=t.orientation,s=["top","left","top","left"],u=["right","bottom","left","top"],d=[15,0],p=[0,15];return l.a.createElement(Fo,{selected:t.options.selected,width:90+d[c%2],height:90+p[c%2]},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i,offsetX:12}),n.map((function(e,n){return l.a.createElement(r.Fragment,{key:e.getName()},l.a.createElement(Ho,{name:e.getName(),position:i[n],edge:s[c],side:u[c]}),(i[n]<1||i[n]>5)&&l.a.createElement(Wo,{selected:t.isSelected(),position:i[n],edge:s[c],side:u[c]}))})),l.a.createElement(Ho,{name:"out",side:["left","top","right","bottom"][c]}),l.a.createElement(_o,{portPositions:i,dWidth:d[c%2],dHeight:p[c%2],vbWidth:[27.781249,23.812501][c%2],vbHeight:[23.812501,27.781249][c%2],orientation:c,translation:[0,0,-4,-4][c],portWidth:a,portColor:o}))},Uo=function(){return l.a.createElement(_o,{size:30})};var Ko,Xo,Yo,Zo=new ie({type:"Xnor",name:"Xnor",description:'Logic "not exclusive or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"MULTIPLE_INPUT_BEHAVIOR",type:"select",default:"ONE",label:"Multiple input behavior",options:[{label:"Detect when only one input is on",value:"ONE"},{label:"Detect when an even number of inputs are on",value:"EVEN"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.behavior=e.MULTIPLE_INPUT_BEHAVIOR,this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;const t=Number(e.INPUT_PORTS_NUMBER);for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:-5});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:13})}executeBit(e){return e.some(e=>"x"===e||"e"===e)?"e":"ONE"===this.behavior?this.executeOne(e):"EVEN"===this.behavior?this.executeEven(e):{}}executeOne(e){return 1===e.filter(e=>1===e).length?0:1}executeEven(e){return e.filter(e=>1===e).length%2?0:1}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit.bind(this))}}stepFloating(e){return this.step(e)}},widget:Vo,icon:Uo}),Go=oe.a.div(Ko||(Ko=Object(ae.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  svg {\n  transition: 100ms linear;\n    fill: ",";\n    stroke: ",";\n  }\n"])),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Qo=oe.a.div(Xo||(Xo=Object(ae.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"])),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),Jo=Object(oe.a)(Ye)(Yo||(Yo=Object(ae.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"])),(function(e){return"out"===e.name?"":"".concat(e.edge,": ").concat(15*e.position-5,"px;")}),(function(e){return e.name,"".concat(e.side,": 88px")})),qo=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,a=void 0===i?[]:i,o=e.orientation,r=void 0===o?0:o,c=e.portWidth,s=void 0===c?.5:c,u=e.portColor;return l.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},l.a.createElement("g",{transform:"rotate(".concat(90*r," 12 12)")},l.a.createElement("path",{fill:"none",style:{transform:"scale(0.284583, 0.284583) translate(-1px, -3px)"},d:"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616"}),l.a.createElement("g",{transform:"translate(1.8657598)"},l.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z",transform:"scale(0.26458333)"}))),l.a.createElement("g",{transform:"scale(0.26458333) rotate(".concat(90*r," 45 45)"),strokeWidth:s,stroke:u},a.includes(1)&&l.a.createElement("path",{d:"M 18.4669,15.5 H 1.44549"}),a.includes(2)&&l.a.createElement("path",{d:"M 20.1902,30.5 H 1.445"}),a.includes(3)&&l.a.createElement("path",{d:"M 21.1563,45.5 H 1.445"}),a.includes(4)&&l.a.createElement("path",{d:"M 19.8489,60.5 H 1.445"}),a.includes(5)&&l.a.createElement("path",{d:"M 16.5984,75.5 H 1.445"})))},$o=function(e){var t=e.model,n=Object.values(t.getInputPorts()),i=Ze(n.length),a=n[0].getLineWidth(),o=n[0].getLineColor(),c=t.orientation,s=["top","left","top","left"],u=["right","bottom","left","top"];return l.a.createElement(Go,{selected:t.options.selected},l.a.createElement(Qe,{selected:t.isSelected(),portPositions:i,offsetX:12}),n.map((function(e,n){return l.a.createElement(r.Fragment,{key:e.getName()},l.a.createElement(Jo,{name:e.getName(),position:i[n],edge:s[c],side:u[c]}),(i[n]<1||i[n]>5)&&l.a.createElement(Qo,{selected:t.isSelected(),position:i[n]}))})),l.a.createElement(Jo,{name:"out",side:["left","top","right","bottom"][c]}),l.a.createElement(qo,{portPositions:i,orientation:c,portWidth:a,portColor:o}))},er=function(){return l.a.createElement(qo,{size:30})};var tr,nr,ir,ar,or,rr=new ie({type:"Xor",name:"Xor",description:'Logic "exclusive or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:5,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"MULTIPLE_INPUT_BEHAVIOR",type:"select",default:"ONE",label:"Multiple input behavior",options:[{label:"Detect when only one input is on",value:"ONE"},{label:"Detect when an odd number of inputs are on",value:"ODD"}]},{name:"ORIENTATION",type:"hidden",default:0,label:"Orientation of component"}],model:class extends ${initialize(e){this.behavior=e.MULTIPLE_INPUT_BEHAVIOR,this.dataBits=Number(e.DATA_BITS),this.canRotate=!0,this.orientation=e.ORIENTATION;const t=Number(e.INPUT_PORTS_NUMBER);for(let n=0;n<t;n+=1)this.addInputPort("in"+n,{bits:this.dataBits,orientation:(this.orientation+2)%4,offset:2,length:-5});this.addOutputPort("out",{bits:this.dataBits,orientation:this.orientation,offset:2,length:10})}executeBit(e){return e.some(e=>"x"===e||"e"===e)?"e":"ONE"===this.behavior?this.executeOne(e):"ODD"===this.behavior?this.executeOdd(e):{}}executeOne(e){return 1===e.filter(e=>1===e).length?1:0}executeOdd(e){return e.filter(e=>1===e).length%2?1:0}step(e){return{out:Object.values(e).map(e=>e.asArray(this.dataBits)).transpose().map(this.executeBit.bind(this))}}stepFloating(e){return this.step(e)}},widget:$o,icon:er}),lr=["J","Clock","K","Clear","Q","Qbar"],cr=Object(oe.a)((function(e){var t=e.className,n=e.selected,i=e.icon;return l.a.createElement("svg",{className:t,width:i?6:12,height:i?12:20,stroke:"var(--border-".concat(n?"":"un","selected)"),strokeWidth:2,strokeLinecap:"round"},l.a.createElement("line",{x1:0,y1:0,x2:i?6:12,y2:i?6:10}),l.a.createElement("line",{x1:i?6:12,y1:i?6:10,x2:0,y2:i?12:20}))}))(tr||(tr=Object(ae.a)(["\n  position: absolute;\n  left: -1px;\n  top: ","px;\n\n  transition: 100ms linear;\n"])),(function(e){return e.icon?10:33})),sr=Object(oe.a)(Ye)(nr||(nr=Object(ae.a)(["\n  position: absolute;\n  top: ","px;\n  ","\n"])),(function(e){return e.position}),(function(e){return"".concat(e.side,": ").concat((e.icon?28:90)-2,"px;")})),ur=oe.a.div(ir||(ir=Object(ae.a)(["\n  position: absolute;\n  top: ","px;\n  ","\n  font-size: 0.75em;\n  transform: translateY(-50%);\n  text-decoration: ",";\n"])),(function(e){return e.position+5}),(function(e){return"".concat(e.side,": ").concat(e.offset+5,"px;")}),(function(e){return e.complemented?"overline":"none"})),dr=oe.a.div(ar||(ar=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  box-shadow: 0 0 ","px\n    ",";\n  border: 2px solid\n    ",";\n  border-radius: 5px;\n\n  transition: 100ms linear;\n"])),(function(e){return e.icon?28:90}),(function(e){return e.icon?36:120}),(function(e){return"#ffffff".concat(e.selected?"80":"ff")}),(function(e){return e.isActive?15:0}),(function(e){return e.color}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),pr=function(e){var t=e.selected,n=e.icon;return l.a.createElement("svg",{width:n?28:90,height:n?36:120,fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:t?"80":"ff",fillOpacity:t?"80":"ff"}})},fr=function(e){var t=e.model,n=t.options.selected;return l.a.createElement(dr,{selected:n},l.a.createElement(pr,null),l.a.createElement(cr,{selected:n}),lr.map((function(e){return l.a.createElement(sr,{key:e,name:e,position:t.getPositionForPort(e),side:t.getSideForPort(e)})})),lr.map((function(e){return l.a.createElement(ur,{key:"".concat(e,"Label"),position:t.getPositionForPort(e),side:t.getSideForPortLabel(e),label:t.getLabelForPort(e),offset:t.getPortLabelOffset(e),complemented:t.isPortComplemented(e)},t.getLabelForPort(e))})))},mr=oe.a.div(or||(or=Object(ae.a)(["\n  position: absolute;\n  top: ","px;\n  ","\n  font-size: 0.75em;\n  transform: translateY(-50%);\n  text-decoration: ",";\n"])),(function(e){return e.position}),(function(e){return"".concat(e.side,": 1px;")}),(function(e){return e.complemented?"overline":"none"})),hr=function(){return l.a.createElement(dr,{icon:!0},l.a.createElement(pr,{icon:!0}),l.a.createElement(cr,{icon:!0}),l.a.createElement(mr,{position:"6",side:"left",complemented:!1},"J"),l.a.createElement(mr,{position:"26",side:"left",complemented:!1},"K"),l.a.createElement(mr,{position:"6",side:"right",complemented:!1},"Q"),l.a.createElement(mr,{position:"26",side:"right",complemented:!0},"Q"))};var gr,br,vr,yr,Er,xr,Or,kr,wr,Pr,jr,Sr,Cr,Tr,Ar,Ir,Lr,Nr,Br,Mr,zr,Dr,Rr,Fr,Wr,Hr,_r,Vr,Ur,Kr,Xr,Yr,Zr,Gr,Qr,Jr,qr,$r,el,tl,nl,il,al,ol,rl,ll,cl,sl,ul,dl,pl,fl,ml,hl,gl,bl,vl,yl=new ie({type:"JKFlipFlop",name:"JK Flip-Flop",description:"JK Flip-Flop",group:"Flip-flops",configurations:[{name:"TRIGGER_ON",type:"select",default:"rising",label:"Trigger on",options:[{label:"Rising edge",value:"rising"},{label:"Falling edge",value:"falling"}]}],model:class extends ${initialize(e){Number(e.DATA_BITS);this.initialized=!1,this.triggerOnRising="rising"===e.TRIGGER_ON,this.addInputPort("J",{bits:1,floating:0,orientation:2,offset:0,length:25}),this.addInputPort("Clock",{bits:1,floating:0,orientation:2,offset:0,length:25,complemented:"falling"==e.TRIGGER_ON}),this.addInputPort("K",{bits:1,floating:0,orientation:2,offset:0,length:25}),this.addInputPort("Clear",{bits:1,floating:1,orientation:2,offset:0,length:25,complemented:!0}),this.addOutputPort("Q",{bits:1,orientation:0,offset:0,length:25}),this.addOutputPort("Qbar",{bits:1,orientation:0,offset:0,length:25,complemented:!0})}getPortInfo(e){return{J:{side:"right",position:1,label:"J",labelSide:"left",labelOffset:0,complemented:!1},Clock:{side:"right",position:2,label:"CLK",labelSide:"left",labelOffset:10,complemented:!this.triggerOnRising},K:{side:"right",position:3,label:"K",labelSide:"left",labelOffset:0,complemented:!1},Clear:{side:"right",position:4,label:"CLR",labelSide:"left",labelOffset:0,complemented:!0},Q:{side:"left",position:1,label:"Q",labelSide:"right",labelOffset:0,complemented:!1},Qbar:{side:"left",position:3,label:"Q",labelSide:"right",labelOffset:0,complemented:!0}}[e]}getPositionForPort(e){return 8+30*(this.getPortInfo(e).position-1)}getSideForPort(e){return this.getPortInfo(e).side}getLabelForPort(e){return this.getPortInfo(e).label}getSideForPortLabel(e){return this.getPortInfo(e).labelSide}getPortLabelOffset(e){return this.getPortInfo(e).labelOffset}isPortComplemented(e){return this.getPortInfo(e).complemented}isRisingEdge(e){return this.triggerOnRising?e.Clock.risingEdge:e.Clock.fallingEdge}step(e,t){if(!this.initialized){const e={Q:0,Qbar:1};this.ports.output=this.ports.output.map(t=>({...t,value:[e[t.name]]})),this.emit({Q:0,Qbar:1}),this.initialized=!0}const n=this.getPort("Q").getValue(),i=this.getPort("Qbar").getValue();if(this.isRisingEdge(t)){if(!e.Clear)return{Q:0,Qbar:1};const t=~e.K&n|e.J&~n;return{Q:t,Qbar:~t}}return{Q:n,Qbar:i}}stepError(e,t){if(!this.initialized){const e={Q:0,Qbar:1};this.ports.output=this.ports.output.map(t=>({...t,value:[e[t.name]]})),this.emit({Q:0,Qbar:1}),this.initialized=!0}return this.isRisingEdge(t)?{Q:"e",Qbar:"e"}:{Q:this.getPort("Q").getValue(),Qbar:this.getPort("Qbar").getValue()}}},widget:fr,icon:hr}),El=[Hn,ua,Ot,Ro,Ft,ni,Co,It,at,yi,Qi,Ci,rr,Zo,ft,Di,Yt,nn,bo,Gn,ja,Tn,ui,yn,Za,co,dn,yl],xl=El,Ol=El.reduce((function(e,t){var n=e.find((function(e){return e.name===t.group}));return n?n.components.push(t):e.push({name:t.group,components:[t]}),e}),[]),kl=n(264),wl=n.n(kl),Pl=oe.a.div(gr||(gr=Object(ae.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n\n  z-index: 2;\n"]))),jl=oe.a.button.attrs((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{type:"button"})}))(br||(br=Object(ae.a)(["\n  border: none;\n  border-radius: 100%;\n\n  background: orange;\n  box-shadow: inset 0 0 10px #ff8d00;\n\n  width: 60px;\n  height: 60px;\n  margin: 16px;\n\n  font-size: 2em;\n  line-height: 1em;\n  color: white;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n    box-shadow: inset 0 0 10px black;\n  }\n"]))),Sl=function(e){var t=e.handleClick,n=e.disabled;return l.a.createElement(Pl,{id:"component-select-button"},l.a.createElement(jl,{onClick:t,disabled:n,"data-for":"tooltip","data-tip":"Add component...","data-place":"left"},"+"))},Cl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"100 100 300 300"},l.a.createElement("polygon",{points:"352,128.4 319.7,96 160,256 160,256 160,256 319.7,416 352,383.6 224.7,256 "}))},Tl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 48 48"},l.a.createElement("polygon",{points:"5,30.9 8.1,34 24,18.1 39.9,34 43,30.9 24,12"}))},Al=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.a.createElement("polyline",{points:"17 11 12 6 7 11"}),l.a.createElement("polyline",{points:"17 18 12 13 7 18"}))},Il=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 60.963 60.842"},l.a.createElement("path",{d:"M59.595,52.861L37.094,30.359L59.473,7.98c1.825-1.826,1.825-4.786,0-6.611  c-1.826-1.825-4.785-1.825-6.611,0L30.483,23.748L8.105,1.369c-1.826-1.825-4.785-1.825-6.611,0c-1.826,1.826-1.826,4.786,0,6.611  l22.378,22.379L1.369,52.861c-1.826,1.826-1.826,4.785,0,6.611c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  l22.502-22.502l22.501,22.502c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  C61.42,57.647,61.42,54.687,59.595,52.861z"}))},Ll=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.a.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}))},Nl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("circle",{cx:"6",cy:"6",r:"3"}),l.a.createElement("circle",{cx:"6",cy:"18",r:"3"}),l.a.createElement("line",{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}),l.a.createElement("line",{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}),l.a.createElement("line",{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}))},Bl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("polyline",{points:"3 6 5 6 21 6"}),l.a.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))},Ml=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:18*n/24,viewBox:"0 0 24 18",fill:"none",stroke:"none",strokeWidth:"2"},l.a.createElement("g",{transform:"translate(-678.000000, -2727.000000)"},l.a.createElement("g",{transform:"translate(100.000000, 2626.000000)"},l.a.createElement("g",{transform:"translate(578.000000, 98.000000)"},l.a.createElement("g",{transform:"translate(0.000000, 0.000000)"},l.a.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),l.a.createElement("path",{d:"M15,8 C14.45,8 14,8.45 14,9 L14,11 L12,11 C11.45,11 11,11.45 11,12 C11,12.55 11.45,13 12,13 L14,13 L14,15 C14,15.55 14.45,16 15,16 C15.55,16 16,15.55 16,15 L16,13 L18,13 C18.55,13 19,12.55 19,12 C19,11.45 18.55,11 18,11 L16,11 L16,9 C16,8.45 15.55,8 15,8 Z M2,12 C2,9.42 3.4,7.17 5.48,5.96 C5.8,5.77 6.01,5.45 6.01,5.08 C6.01,4.31 5.17,3.83 4.5,4.22 C1.82,5.78 0,8.68 0,12 C0,15.32 1.82,18.22 4.5,19.78 C5.17,20.17 6.01,19.69 6.01,18.92 C6.01,18.55 5.8,18.23 5.48,18.04 C3.4,16.83 2,14.58 2,12 Z M15,3 C10.04,3 6,7.04 6,12 C6,16.96 10.04,21 15,21 C19.96,21 24,16.96 24,12 C24,7.04 19.96,3 15,3 Z M15,19 C11.14,19 8,15.86 8,12 C8,8.14 11.14,5 15,5 C18.86,5 22,8.14 22,12 C22,15.86 18.86,19 15,19 Z",fill:a}))))))},zl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.a.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),l.a.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))},Dl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512.001 512.001"},l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("path",{d:"M481,371c11.046,0,20-8.954,20-20v-92c0-33.084-26.916-60-60-60h-39v-79c0-44.112-35.888-80-80-80h-47.533 c-7.739-23.749-29.864-40-55.16-40h-25.614c-25.296,0-47.421,16.251-55.16,40H91c-44.112,0-80,35.888-80,80v312 c0,44.112,35.888,80,80,80h88c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H91c-22.056,0-40-17.944-40-40V120 c0-22.056,17.944-40,40-40h2v59c0,11.046,8.954,20,20,20h189c11.046,0,20-8.954,20-20V80c22.056,0,40,17.944,40,40v79h-65.007 C263.914,199,237,225.913,237,258.993v193.015c0,33.08,26.916,59.993,60.01,59.993L441,511.926c33.084,0,60-26.913,60-59.992 c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20c0,11.024-8.972,19.992-20.01,19.992L297,472c-11.028,0-20-8.969-20-19.993 V258.993c0-11.024,8.969-19.993,19.993-19.993H441c11.028,0,20,8.972,20,20v92C461,362.046,469.955,371,481,371z M282,119H133V80 h21c9.177,0,17.177-6.246,19.403-15.149l2.798-11.194C178.211,45.616,185.404,40,193.693,40h25.614 c8.289,0,15.481,5.616,17.492,13.657l2.798,11.194C241.823,73.754,249.823,80,259,80h23V119z"}),l.a.createElement("path",{d:"M401,279h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20 C421,287.954,412.047,279,401,279z"}),l.a.createElement("path",{d:"M401,349h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20 C421,357.954,412.047,349,401,349z"})))))},Rl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"#ffb100":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512 512"},l.a.createElement("path",{d:"M395,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,395,512Z"}),l.a.createElement("path",{d:"M117,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,117,512Z"}))},Fl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"#008000":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512 512"},l.a.createElement("path",{d:"M60.54,512c-17.06,0-30.43-13.86-30.43-31.56V31.55C30.12,13.86,43.48,0,60.55,0A32.94,32.94,0,0,1,77,4.52L465.7,229c10.13,5.85,16.18,16,16.18,27s-6,21.2-16.18,27L77,507.48A32.92,32.92,0,0,1,60.55,512Z"}))},Wl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 512 512",fill:a},l.a.createElement("path",{d:"m431 481c0 11.046-8.954 20-20 20h-66c-11.046 0-20-8.954-20-20s8.954-20 20-20h66c11.046 0 20 8.954 20 20zm63.358-352.994-112.284-111.215c-7.848-7.773-20.511-7.713-28.284.135s-7.712 20.511.135 28.284l106.808 105.79h-285.733c-96.495 0-175 78.505-175 175s78.505 175 175 175h69c11.046 0 20-8.954 20-20s-8.954-20-20-20h-69c-74.439 0-135-60.561-135-135s60.561-135 135-135h284.836l-105.037 105.917c-7.778 7.843-7.725 20.506.118 28.284 3.9 3.868 8.992 5.799 14.083 5.799 5.146 0 10.292-1.975 14.202-5.917l111.225-112.157c11.332-11.332 17.573-26.4 17.573-42.426s-6.241-31.094-17.642-42.494z"}))},Hl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("circle",{cx:"12",cy:"12",r:"3"}),l.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))},_l=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"#c53838":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512 512"},l.a.createElement("path",{d:"M 65.249771,0 A 65.248738,65.376306 0 0 0 0.413662,58.057582 h -0.18732 v 1.884685 A 65.248738,65.376306 0 0 0 0,65.377342 65.248738,65.376306 0 0 0 0.226342,70.796781 V 441.18757 A 65.248738,65.376306 0 0 0 0,446.62268 a 65.248738,65.376306 0 0 0 0.226342,5.41161 v 2.88566 H 0.530738 A 65.248738,65.376306 0 0 0 65.249771,512 a 65.248738,65.376306 0 0 0 2.44297,-0.0468 H 444.31507 a 65.248738,65.376306 0 0 0 2.43514,0.0468 65.248738,65.376306 0 0 0 2.44297,-0.0468 h 0.56977 v -0.024 a 65.248738,65.376306 0 0 0 61.70628,-57.00966 h 0.0312 v -0.22662 a 65.248738,65.376306 0 0 0 0.49952,-8.07049 65.248738,65.376306 0 0 0 -0.49952,-8.01579 V 67.011775 a 65.248738,65.376306 0 0 0 0.0234,-1.634433 65.248738,65.376306 0 0 0 -0.0234,-1.681351 v -5.638409 h -0.38247 A 65.248738,65.376306 0 0 0 456.2645,0.77420532 V 0 H 446.40678 446.2741 65.374651 Z"}))},Vl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 512 512",fill:a},l.a.createElement("path",{d:"m 81,481 c 0,11.046 8.954,20 20,20 h 66 c 11.046,0 20,-8.954 20,-20 0,-11.046 -8.954,-20 -20,-20 h -66 c -11.046,0 -20,8.954 -20,20 z M 17.642,128.006 129.926,16.791 c 7.848,-7.773 20.511,-7.713 28.284,0.135 7.773,7.848 7.712,20.511 -0.135,28.284 L 51.267,151 H 337 c 96.495,0 175,78.505 175,175 0,96.495 -78.505,175 -175,175 h -69 c -11.046,0 -20,-8.954 -20,-20 0,-11.046 8.954,-20 20,-20 h 69 c 74.439,0 135,-60.561 135,-135 0,-74.439 -60.561,-135 -135,-135 H 52.164 l 105.037,105.917 c 7.778,7.843 7.725,20.506 -0.118,28.284 -3.9,3.868 -8.992,5.799 -14.083,5.799 -5.146,0 -10.292,-1.975 -14.202,-5.917 L 17.573,212.926 C 6.241,201.594 0,186.526 0,170.5 0,154.474 6.241,139.406 17.642,128.006 Z"}))},Ul=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),l.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),l.a.createElement("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),l.a.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))},Kl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2"},l.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),l.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),l.a.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))},Xl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512 512"},l.a.createElement("path",{d:"M 437.02,75.112 C 388.667,26.76 324.38,0.133 256,0.133 214.782,0.133 173.811,10.166 137.515,29.149 116.586,40.094 97.191,54.029 80,70.302 V 0.133 H 40 v 140 h 140 v -40 h -73.338 c 39.887,-38.075 93.411,-60 149.338,-60 119.102,0 216,96.896 216,215.999 -10e-4,6.632 -0.304,13.317 -0.901,19.87 l 39.836,3.628 c 0.706,-7.753 1.064,-15.658 1.065,-23.495 l -20,-0.002 h 20 C 512,187.752 485.371,123.466 437.02,75.112 Z",id:"path2"}),l.a.createElement("polygon",{points:"512,256.132 512,256.133 ",id:"polygon4"}),l.a.createElement("path",{d:"m 87.724,391.566 -31.145,25.101 c 9.048,11.226 19.114,21.762 29.92,31.315 l 26.494,-29.967 c -9.126,-8.069 -17.628,-16.966 -25.269,-26.449 z",id:"path12"}),l.a.createElement("path",{d:"m 52.219,327.943 -37.727,13.296 c 4.794,13.601 10.796,26.896 17.842,39.517 L 67.26,361.259 C 61.319,350.617 56.259,339.407 52.219,327.943 Z",id:"path18"}),l.a.createElement("path",{d:"M 40,256.133 H 0 c 0,14.47 1.22,28.986 3.624,43.145 L 43.06,292.58 C 41.029,280.627 40,268.365 40,256.133 Z",id:"path24"}),l.a.createElement("path",{d:"m 142.33,439.841 -21.082,33.993 c 12.271,7.611 25.265,14.215 38.618,19.629 l 15.029,-37.069 C 163.637,451.831 152.68,446.26 142.33,439.841 Z",id:"path30"}),l.a.createElement("path",{d:"m 464.717,311.981 c -3.137,11.748 -7.307,23.311 -12.395,34.365 l 36.335,16.727 c 6.037,-13.115 10.985,-26.835 14.706,-40.777 z",id:"path36"}),l.a.createElement("path",{d:"m 383.554,430.468 c -9.833,7.208 -20.335,13.616 -31.213,19.047 l 17.867,35.788 c 12.896,-6.438 25.342,-14.033 36.994,-22.574 z",id:"path42"}),l.a.createElement("path",{d:"m 434.282,378.123 c -6.883,10.035 -14.672,19.56 -23.152,28.311 l 28.725,27.837 c 10.041,-10.361 19.265,-21.642 27.415,-33.527 z",id:"path48"}),l.a.createElement("path",{d:"m 318.37,462.995 c -11.632,3.503 -23.662,6.03 -35.756,7.515 l 4.873,39.702 c 14.343,-1.761 28.612,-4.76 42.412,-8.914 z",id:"path54"}),l.a.createElement("path",{d:"m 209.794,467.185 -8.514,39.083 c 14.054,3.062 28.505,4.946 42.953,5.6 l 1.809,-39.959 c -12.198,-0.552 -24.394,-2.143 -36.248,-4.724 z",id:"path60"}))},Yl=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,a=void 0===i?"gray":i;return l.a.createElement("svg",{width:n,height:n,fill:a,viewBox:"0 0 512 512"},l.a.createElement("path",{d:"M 74.98,75.112 C 123.333,26.76 187.62,0.133 256,0.133 c 41.218,0 82.189,10.033 118.485,29.016 20.929,10.945 40.324,24.88 57.515,41.153 V 0.133 h 40 v 140 H 332 v -40 h 73.338 c -39.887,-38.075 -93.411,-60 -149.338,-60 -119.102,0 -216,96.896 -216,215.999 10e-4,6.632 0.304,13.317 0.901,19.87 L 1.065,279.63 C 0.359,271.877 10e-4,263.972 0,256.135 l 20,-0.002 H 0 C 0,187.752 26.629,123.466 74.98,75.112 Z",id:"path2"}),l.a.createElement("polygon",{points:"512,256.133 512,256.132 ",id:"polygon4",transform:"matrix(-1,0,0,1,512,0)"}),l.a.createElement("path",{d:"m 424.276,391.566 31.145,25.101 c -9.048,11.226 -19.114,21.762 -29.92,31.315 l -26.494,-29.967 c 9.126,-8.069 17.628,-16.966 25.269,-26.449 z",id:"path12"}),l.a.createElement("path",{d:"m 459.781,327.943 37.727,13.296 c -4.794,13.601 -10.796,26.896 -17.842,39.517 L 444.74,361.259 c 5.941,-10.642 11.001,-21.852 15.041,-33.316 z",id:"path18"}),l.a.createElement("path",{d:"m 472,256.133 h 40 c 0,14.47 -1.22,28.986 -3.624,43.145 L 468.94,292.58 c 2.031,-11.953 3.06,-24.215 3.06,-36.447 z",id:"path24"}),l.a.createElement("path",{d:"m 369.67,439.841 21.082,33.993 c -12.271,7.611 -25.265,14.215 -38.618,19.629 l -15.029,-37.069 c 11.258,-4.563 22.215,-10.134 32.565,-16.553 z",id:"path30"}),l.a.createElement("path",{d:"m 47.283,311.981 c 3.137,11.748 7.307,23.311 12.395,34.365 L 23.343,363.073 C 17.306,349.958 12.358,336.238 8.637,322.296 Z",id:"path36"}),l.a.createElement("path",{d:"m 128.446,430.468 c 9.833,7.208 20.335,13.616 31.213,19.047 l -17.867,35.788 C 128.896,478.865 116.45,471.27 104.798,462.729 Z",id:"path42"}),l.a.createElement("path",{d:"m 77.718,378.123 c 6.883,10.035 14.672,19.56 23.152,28.311 L 72.145,434.271 C 62.104,423.91 52.88,412.629 44.73,400.744 Z",id:"path48"}),l.a.createElement("path",{d:"m 193.63,462.995 c 11.632,3.503 23.662,6.03 35.756,7.515 l -4.873,39.702 c -14.343,-1.761 -28.612,-4.76 -42.412,-8.914 z",id:"path54"}),l.a.createElement("path",{d:"m 302.206,467.185 8.514,39.083 c -14.054,3.062 -28.505,4.946 -42.953,5.6 l -1.809,-39.959 c 12.198,-0.552 24.394,-2.143 36.248,-4.724 z",id:"path60"}))},Zl=oe.a.div(vr||(vr=Object(ae.a)(["\n  position: absolute;\n  bottom: 16px;\n  left: 50%;\n  transform: translate(-50%, 0);\n\n  background: rgb(224, 224, 224);\n  background: linear-gradient(\n    0deg,\n    rgba(224, 224, 224, 1) 0%,\n    rgba(255, 255, 255, 1) 100%\n  );\n\n  border: 1px solid gray;\n  border-radius: 16px;\n\n  z-index: 2;\n\n  & > button {\n    border-right: 1px solid gray;\n    &:last-child {\n      border-right: none;\n    }\n  }\n"]))),Gl=oe.a.button.attrs((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{type:"button"})}))(yr||(yr=Object(ae.a)(["\n  background: none;\n  border: none;\n\n  font-size: 1.2em;\n\n  min-width: 75px;\n  min-height: 60px;\n\n  &:disabled {\n    & > svg {\n      fill: #bfbfbf;\n    }\n  }\n"]))),Ql=function(e){var t=e.state,n=e.handleClickStart,i=e.handleClickPause,a=e.handleClickStop;return l.a.createElement(Zl,{id:"simulation-control-buttons"},l.a.createElement(Gl,{onClick:n,disabled:"started"===t,"data-for":"tooltip","data-tip":"Start simulation"},l.a.createElement(Fl,null)),l.a.createElement(Gl,{onClick:i,disabled:"paused"===t||"stopped"===t,"data-for":"tooltip","data-tip":"Pause simulation"},l.a.createElement(Rl,null)),l.a.createElement(Gl,{onClick:a,disabled:"stopped"===t,"data-for":"tooltip","data-tip":"Stop simulation"},l.a.createElement(_l,null)))},Jl=oe.a.div(Er||(Er=Object(ae.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  z-index: 3;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 100vw;\n  height: 100vh;\n\n  background: rgba(0, 0, 0, 0.75);\n"]))),ql=oe.a.div(xr||(xr=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n\n  width: 60vw;\n  height: 80vh;\n\n  max-width: 600px;\n  max-height: 800px;\n\n  background: white;\n\n  border: 1px solid black;\n  border-radius: 25px;\n\n  padding: 16px;\n\n  z-index: 4;\n"]))),$l=function(e){var t=e.children;return l.a.createElement(Jl,null,l.a.createElement(ql,null,t))},ec=n(119),tc=oe.a.div(Or||(Or=Object(ae.a)(["\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-content: space-between;\n\n  height: 50px;\n"]))),nc=oe.a.h1(kr||(kr=Object(ae.a)(["\n  flex-grow: 1;\n  font-size: 1.5em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n"]))),ic=oe.a.h2(wr||(wr=Object(ae.a)(["\n  flex-grow: 1;\n  font-size: 1.2em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n"]))),ac=oe.a.div(Pr||(Pr=Object(ae.a)(["\n  margin-top: 32px;\n  flex: 1;\n"]))),oc=oe.a.button(jr||(jr=Object(ae.a)(["\n  position: absolute;\n\n  flex-shrink: 0;\n\n  border: 1px solid gray;\n  border-radius: 25px;\n  width: 50px;\n  height: 50px;\n\n  ","\n\n  background: none;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.05);\n    cursor: pointer;\n  }\n"])),(function(e){return e.left?"left: 0;":"right: 0;"})),rc=void 0,lc=oe.a.div(Sr||(Sr=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 16px;\n\n  label {\n    font-size: 0.8em;\n    font-weight: bold;\n    text-transform: uppercase;\n    color: ",";\n\n    background: #eee;\n    border: 1px solid ",";\n    border-radius: 8px;\n\n    position: relative;\n    top: 0.8em;\n\n    width: max-content;\n    margin-left: 15px;\n    padding: 0 8px;\n  }\n\n  select,\n  input {\n    background: white;\n    border: 1px solid ",";\n    border-radius: 25px;\n\n    font-size: 1.2em;\n\n    padding: 10px 0 5px 16px;\n  }\n\n  input[type='file'] {\n    font-size: 1em;\n    margin-top: 2px;\n  }\n"])),(function(e){return e.error?"#710606":"inherit"}),(function(e){return e.error?"#c80a0a":"gray"}),(function(e){return e.error?"#c80a0a":"gray"})),cc=function(e){var t=e.form,n=e.field,i=e.name,a=e.label,o=e.componentType,r=e.type,c=e.innerRef,s=e.options,u=void 0===s?[]:s,d=e.step,p=e.min,f=e.max;switch(r){case"select":return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:i},a),l.a.createElement("select",Object.assign({id:i,ref:c},n),u.map((function(e){return l.a.createElement("option",{value:e.value,key:e.value},e.label)}))));case"number":return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:i},a),l.a.createElement("input",Object.assign({id:i,ref:c},n,{step:d,min:p,max:f,type:"number"})));case"text":return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:i},a),l.a.createElement("input",Object.assign({id:i,ref:c},n,{type:"text"})));case"binary":return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:i},a),l.a.createElement("input",{id:i,accept:".lgbin",type:"file",onChange:function(e){var i=e.target.files;if(1===i.length){var a=function(){return rc.showSnackbar("Error loading binary file:\n".concat(i[0].name))},o=new FileReader;o.onerror=a,o.onload=function(e){try{var i=e.target.result;t.setFieldValue(n.name,i)}catch(o){a()}},o.readAsText(i.item(0))}}}));case"hidden":return l.a.createElement(l.a.Fragment,null);default:throw new Error("[logossim] Invalid configuration type for ".concat(o,": ").concat(r))}},sc=oe.a.div(Cr||(Cr=Object(ae.a)(["\n  font-size: 0.8em;\n  color: #c80a0a;\n\n  background: white;\n\n  position: relative;\n  bottom: 0.7em;\n\n  width: max-content;\n  padding: 0 8px;\n  margin: -15px auto auto auto;\n  transform: translateY(15px);\n"]))),uc=function(e){var t=e.field.name,n=e.form.errors[t];return l.a.createElement(lc,{error:n},l.a.createElement(cc,e),n&&l.a.createElement(sc,null,n))},dc={getEngine:function(){return{registerListener:function(){},getCanvas:function(){},getPortCoords:function(){return{getWidth:function(){},getHeight:function(){},getTopLeft:function(){}}},getModel:function(){return{isLocked:function(){return!1}}}}}},pc=function(e,t){return t?"":e?"Check form errors":"Drag me!"},fc=oe.a.div(Tr||(Tr=Object(ae.a)(["\n  border: 1px dashed var(--value-error);\n  border-radius: 5px;\n  width: 30px;\n  height: 30px;\n"]))),mc=function(e){var t=e.component,n=t.type,i=t.Widget,a=t.Model,o=e.configurations,r=e.handleClose,c=e.error,s=e.disabled,u=new a(o,n);return l.a.createElement("div",{draggable:!c&&!s,onDragStart:function(e){e.dataTransfer.setDragImage(e.currentTarget.children[0],0,0),e.dataTransfer.setData("component",JSON.stringify({type:n,configurations:o})),requestAnimationFrame((function(){y.a.hide(),r()}))},"data-for":"tooltip","data-tip":pc(c,s),"data-place":"bottom"},c?l.a.createElement(fc,null):l.a.createElement(re.Provider,{value:dc},l.a.createElement(ne.Provider,{value:u},l.a.createElement(i,{model:u}))))},hc=oe.a.div(Ar||(Ar=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 200px;\n  margin-bottom: 32px;\n\n  box-shadow: ",";\n\n  background-image: ",";\n  background-size: 45px 45px;\n  border-radius: 25px;\n\n  overflow: hidden;\n"])),(function(e){return"inset 0 0 20px rgba(".concat(e.error?255:0,", 0, 0, 0.3)")}),(function(e){return"linear-gradient(\n      to right,\n      rgba(".concat(e.error?255:0,", 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 30px,\n      transparent 31px\n    ),\n    linear-gradient(\n      to bottom,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 30px,\n      transparent 31px\n    )")})),gc=oe.a.div(Ir||(Ir=Object(ae.a)(["\n  max-height: calc(min(800px, 80vh) - 400px);\n  overflow-y: auto;\n"]))),bc=Object(oe.a)(ec.b)(Lr||(Lr=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),vc=oe.a.div(Nr||(Nr=Object(ae.a)(["\n  display: flex;\n  margin-top: auto;\n"]))),yc=oe.a.span(Br||(Br=Object(ae.a)(["\n  font-size: 0.8em;\n  font-style: italic;\n  align-self: center;\n  text-align: right;\n  margin-right: 10px;\n"]))),Ec=oe.a.button.attrs((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{type:"submit"})}))(Mr||(Mr=Object(ae.a)(["\n  border: none;\n  border-radius: 5px;\n  background: #07d26b;\n\n  color: white;\n  font-size: 1.2em;\n\n  width: 100%;\n  padding: 5px 20px;\n  margin: 5px;\n\n  :disabled {\n    background: #d22307;\n    cursor: not-allowed;\n  }\n"]))),xc=function(e){return Object.fromEntries(e.configurations.map((function(e){return[e.name,e.default]})))},Oc=function(e){var t=e.editMode,n=e.component,i=e.handleClose,a=e.handleBack,o=e.handleSubmit,c=Object(r.useRef)(),s=Object(r.useRef)();return Object(r.useEffect)((function(){c.current?c.current.focus():s.current.focus()})),Object(r.useEffect)(y.a.rebuild),l.a.createElement(l.a.Fragment,null,l.a.createElement(tc,null,!t&&l.a.createElement(oc,{left:!0,onClick:a,"data-for":"tooltip","data-tip":"Go back...","data-place":"right"},l.a.createElement(Cl,null)),l.a.createElement(nc,null,t?"Edit":"Configure"," component"),l.a.createElement(oc,{right:!0,onClick:i,"data-for":"tooltip","data-tip":"Close","data-place":"left"},l.a.createElement(Il,null))),l.a.createElement(ac,null,l.a.createElement(ec.c,{initialValues:xc(n),onSubmit:function(e){o(null,{type:n.type,configurations:e}),i()}},(function(e){var a=e.values,o=e.isValid;return l.a.createElement(bc,null,l.a.createElement(hc,{error:!o},l.a.createElement(mc,{component:n,configurations:a,handleClose:i,error:!o,disabled:t})),l.a.createElement(gc,{autoComplete:"off"},n.configurations.map((function(e,t){return l.a.createElement(ec.a,Object.assign({key:e.name,component:uc,innerRef:0===t?c:null},e,{validate:e.validate?function(t){return e.validate(t,a)}:null}))}))),l.a.createElement(vc,null,!t&&l.a.createElement(yc,null,"(hint: you can also drag the component)"),l.a.createElement(Ec,{disabled:!o,ref:s},function(e,t){return e?t?"Save component":"Add to circuit":"Check form errors"}(o,t))))}))))},kc=function(e){var t=e.isOpen,n=e.components,i=e.component,a=e.handleClose,o=e.handleComponentEdit,c=Object(r.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,a)}),[a]);if(Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){return window.removeEventListener("keydown",c)}}),[c]),!t)return null;var s=n.find((function(e){return e.type===i.options.type})),d=Object(u.a)(Object(u.a)({},s),{},{configurations:s.configurations.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{default:i.configurations[e.name]})}))});return l.a.createElement($l,null,l.a.createElement(Oc,{editMode:!0,handleClose:a,handleSubmit:function(e,t){var n=t.configurations;return o(i,n)},component:d}))},wc=oe.a.div(zr||(zr=Object(ae.a)(["\n  margin-bottom: 32px;\n"]))),Pc=oe.a.div(Dr||(Dr=Object(ae.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),jc=oe.a.div(Rr||(Rr=Object(ae.a)(["\n  font-weight: bold;\n  font-size: 1.3em;\n"]))),Sc=oe.a.hr(Fr||(Fr=Object(ae.a)(["\n  flex-grow: 1;\n  align-self: center;\n\n  margin: 16px;\n  border-top: 1px solid black;\n"]))),Cc=oe.a.button(Wr||(Wr=Object(ae.a)(["\n  background: none;\n  border: none;\n  width: 50px;\n\n  transform: ",";\n"])),(function(e){return e.isOpen?"rotate(180deg)":"none"})),Tc=oe.a.div(Hr||(Hr=Object(ae.a)(["\n  display: ",";\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 8px;\n"])),(function(e){return e.isOpen?"grid":"none"})),Ac=oe.a.button(_r||(_r=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n\n  padding: 8px;\n\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.1);\n    border-style: dashed;\n  }\n"]))),Ic=oe.a.h2(Vr||(Vr=Object(ae.a)(["\n  font-weight: normal;\n  font-size: 1.2em;\n"]))),Lc=oe.a.div(Ur||(Ur=Object(ae.a)(["\n  margin-right: 16px;\n"]))),Nc=function(e){var t=e.name,n=e.components,i=e.handleComponentSelect,a=Object(r.useState)(!0),o=Object(d.a)(a,2),c=o[0],s=o[1];return l.a.createElement(wc,null,l.a.createElement(Pc,{onClick:function(){return s(!c)}},l.a.createElement(jc,null,t),l.a.createElement(Sc,null),l.a.createElement(Cc,{left:!0,isOpen:c,onClick:function(){return s(!c)}},l.a.createElement(Tl,null))),l.a.createElement(Tc,{isOpen:c},n.map((function(e){return l.a.createElement(Ac,{onClick:function(){return i(e)},key:e.name,"data-for":"tooltip","data-tip":e.description},l.a.createElement(Lc,null,l.a.createElement(e.Icon,null)),l.a.createElement(Ic,null,e.name))}))))},Bc=oe.a.input(Kr||(Kr=Object(ae.a)(["\n  flex-grow: 1;\n\n  padding: 10px;\n  margin-right: 60px;\n  font-size: 1.5em;\n\n  border-radius: 25px;\n  border: 1px solid gray;\n\n  ::placeholder {\n    font-weight: 300;\n    color: #cfcfcf;\n  }\n"]))),Mc=oe.a.div(Xr||(Xr=Object(ae.a)(["\n  padding-right: 16px;\n  max-height: calc(min(800px, 80vh) - 130px);\n  overflow-y: auto;\n"]))),zc=function(e){var t=e.groups,n=e.handleComponentSelect,i=e.handleClose;Object(r.useEffect)(y.a.rebuild);var a=Object(r.useState)(t),o=Object(d.a)(a,2),c=o[0],s=o[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),m=f[0],h=f[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(tc,null,l.a.createElement(Bc,{autoFocus:!0,placeholder:"Search components...",value:m,onChange:function(e){return function(e){if(h(e),e){var n=new RegExp("".concat(e,".*"),"i"),i=t.map((function(e){return e.components.some((function(e){return e.name.match(n)}))?Object(u.a)(Object(u.a)({},e),{},{components:e.components.filter((function(e){return e.name.match(n)}))}):null})).filter((function(e){return null!=e}));s(i)}else s(t)}(e.target.value)},onKeyDown:function(e){return function(e){"Escape"===e&&(h(""),s(t)),"Enter"===e&&m&&c.length>0&&c[0].components.length>0&&n(c[0].components[0])}(e.key)}}),l.a.createElement(oc,{right:!0,onClick:i,"data-for":"tooltip","data-tip":"Close","data-place":"left"},l.a.createElement(Il,null))),l.a.createElement(ac,null,l.a.createElement(Mc,null,c.map((function(e){var t=e.name,i=e.components;return l.a.createElement(Nc,{name:t,components:i,handleComponentSelect:n,key:t})})))))},Dc=function(e){var t=e.isOpen,n=e.groups,i=e.handleClose,a=e.handleComponentDrop,o=Object(r.useState)(null),c=Object(d.a)(o,2),s=c[0],u=c[1],p=Object(r.useCallback)((function(e){return function(e,t){var n=e.code,i=t.handleClose,a=t.setSelectedComponent;"Escape"===n&&(i(),a(null))}(e,{handleClose:i,setSelectedComponent:u})}),[i]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",p),function(){return window.removeEventListener("keydown",p)}}),[p]),t?l.a.createElement($l,null,s?l.a.createElement(Oc,{handleClose:function(){i(),u(null)},handleSubmit:a,handleBack:function(){return u(null)},component:s}):l.a.createElement(zc,{handleClose:i,handleComponentSelect:u,groups:n})):null},Rc=oe.a.span(Yr||(Yr=Object(ae.a)(["\n  display: inline-flex;\n  align-items: center;\n\n  height: ","px;\n  padding: 0 ","px;\n  margin: 2px ","px;\n\n  font-size: ","px;\n  font-family: monospace;\n  color: #000000c4;\n\n  background: #ececec;\n  border-radius: 4px;\n  border: 1px solid #ffffff17;\n  box-shadow: inset 0 0 ","px #0000000a;\n"])),(function(e){return e.size}),(function(e){return e.size/4}),(function(e){return e.size/8}),(function(e){return e.size/2}),(function(e){return e.size/4})),Fc=function(e){var t=e.children,n=e.size,i=void 0===n?16:n;return l.a.createElement(Rc,{size:i},t)},Wc=oe.a.div(Zr||(Zr=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n\n  width: 16px;\n  height: 16px;\n  margin-right: 16px;\n"]))),Hc=oe.a.div(Gr||(Gr=Object(ae.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  margin-left: 8px;\n"]))),_c=function(e){var t=e.duplicateSelected,n=e.cutSelected,i=e.copySelected,a=e.pasteSelected,o=e.deleteSelected,r=e.undo,c=e.redo,s=e.zoomIn,u=e.zoomOut,d=e.rotateLeft,p=e.rotateRight,f=e.configureComponent;return l.a.createElement(ee.Menu,{id:"component"},l.a.createElement(ee.Item,{onClick:t},l.a.createElement(Wc,null,l.a.createElement(Ml,null)),"Duplicate",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"D"))),l.a.createElement(ee.Item,{onClick:n},l.a.createElement(Wc,null,l.a.createElement(Nl,null)),"Cut",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"X"))),l.a.createElement(ee.Item,{onClick:i},l.a.createElement(Wc,null,l.a.createElement(Ll,null)),"Copy",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"C"))),l.a.createElement(ee.Item,{onClick:a},l.a.createElement(Wc,null,l.a.createElement(Dl,null)),"Paste",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"V"))),l.a.createElement(ee.Item,{onClick:o},l.a.createElement(Wc,null,l.a.createElement(Bl,null)),"Delete",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"Delete"))),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:s},l.a.createElement(Wc,null,l.a.createElement(Ul,null)),"Zoom in"),l.a.createElement(ee.Item,{onClick:u},l.a.createElement(Wc,null,l.a.createElement(Kl,null)),"Zoom out"),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:function(e){var t=e.props;return d(t.component)},disabled:function(e){return!e.props.component.canRotate}},l.a.createElement(Wc,null,l.a.createElement(Xl,null)),"Rotate left"),l.a.createElement(ee.Item,{onClick:function(e){var t=e.props;return p(t.component)},disabled:function(e){return!e.props.component.canRotate}},l.a.createElement(Wc,null,l.a.createElement(Yl,null)),"Rotate right"),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:r},l.a.createElement(Wc,null,l.a.createElement(Vl,null)),"Undo",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"Z"))),l.a.createElement(ee.Item,{onClick:c},l.a.createElement(Wc,null,l.a.createElement(Wl,null)),"Redo",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"SHIFT"),l.a.createElement(Fc,null,"Z"))),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:function(e){var t=e.props;return f(t.component)}},l.a.createElement(Wc,null,l.a.createElement(Hl,null)),"Edit configurations...",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"E"))))},Vc=function(e){var t=e.pasteSelected,n=e.undo,i=e.redo,a=e.zoomIn,o=e.zoomOut;return l.a.createElement(ee.Menu,{id:"diagram"},l.a.createElement(ee.Item,{onClick:t},l.a.createElement(Wc,null,l.a.createElement(Dl,null)),"Paste",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"V"))),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:a},l.a.createElement(Wc,null,l.a.createElement(Ul,null)),"Zoom in"),l.a.createElement(ee.Item,{onClick:o},l.a.createElement(Wc,null,l.a.createElement(Kl,null)),"Zoom out"),l.a.createElement(ee.Separator,null),l.a.createElement(ee.Item,{onClick:n},l.a.createElement(Wc,null,l.a.createElement(Vl,null)),"Undo",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"Z"))),l.a.createElement(ee.Item,{onClick:i},l.a.createElement(Wc,null,l.a.createElement(Wl,null)),"Redo",l.a.createElement(Hc,null,l.a.createElement(Fc,null,"CTRL"),l.a.createElement(Fc,null,"SHIFT"),l.a.createElement(Fc,null,"Z"))))},Uc=(n(521),function(e){var t=e.duplicateSelected,n=e.cutSelected,i=e.copySelected,a=e.pasteSelected,o=e.deleteSelected,r=e.undo,c=e.redo,s=e.zoomIn,u=e.zoomOut,d=e.rotateLeft,p=e.rotateRight,f=e.configureComponent;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Vc,{pasteSelected:a,undo:r,redo:c,zoomIn:s,zoomOut:u}),l.a.createElement(_c,{duplicateSelected:t,cutSelected:n,copySelected:i,pasteSelected:a,deleteSelected:o,undo:r,redo:c,zoomIn:s,zoomOut:u,rotateLeft:d,rotateRight:p,configureComponent:f}))}),Kc=n(117),Xc=n.n(Kc),Yc=n(267),Zc=oe.a.span(Qr||(Qr=Object(ae.a)(["\n  font-weight: bold;\n  font-size: 1.1em;\n  margin-top: -32px;\n"]))),Gc=oe.a.hr(Jr||(Jr=Object(ae.a)(["\n  width: 80%;\n  margin: 24px;\n  border-color: white;\n"]))),Qc=function(e){var t=e.isOpen,n=e.handleClose,i=Object(r.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,n)}),[n]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",i),function(){return window.removeEventListener("keydown",i)}}),[i]),t?l.a.createElement($l,null,l.a.createElement(tc,null,l.a.createElement(nc,null,"About"),l.a.createElement(oc,{right:!0,onClick:n,"data-for":"tooltip","data-tip":"Close","data-place":"left"},l.a.createElement(Il,null))),l.a.createElement(ac,{style:{paddingTop:0,marginTop:16,overflowY:"auto",height:"calc(100% - 70px)",display:"flex",flexDirection:"column",alignItems:"center"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},l.a.createElement("img",{src:"".concat(".","/social.png"),alt:"logossim's logo",style:{width:"75%"}}),l.a.createElement(Zc,null,"Version ",Yc.a)),l.a.createElement(Gc,null),l.a.createElement("div",{style:{margin:"0 32px"}},l.a.createElement("p",{style:{textAlign:"center"}},"If you want to know more about the project,"," ",l.a.createElement("a",{href:"https://github.com/renato-bohler/logossim",target:"_blank",rel:"noopener noreferrer"},"check us out on GitHub!")),l.a.createElement(Xc.a,{type:"stargazers",namespace:"renato-bohler",repo:"logossim"}),l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("strong",null,"You can help us")," make logossim better! If you know a little bit of web development, you can quite easily develop new components to the application.")),l.a.createElement(Gc,null),l.a.createElement("div",{style:{margin:"0 32px"}},l.a.createElement("p",{style:{textAlign:"center"}},"This is a project built by"," ",l.a.createElement("a",{href:"https://renato-bohler.github.io/",target:"_blank",rel:"noopener noreferrer"},"Renato B\xf6hler")," ","as an undegraduate thesis on Computer Engineering at"," ",l.a.createElement("a",{href:"http://www.utfpr.edu.br/",target:"_blank",rel:"noopener noreferrer"},"UTFPR"),".")))):null},Jc=oe.a.div(qr||(qr=Object(ae.a)(["\n  display: flex;\n"]))),qc=oe.a.table($r||($r=Object(ae.a)(["\n  flex: 1;\n  margin: 8px 0;\n"]))),$c=oe.a.td(el||(el=Object(ae.a)(["\n  padding: 8px;\n\n  border: 1px solid #5d2eb526;\n  border-radius: 8px;\n"]))),es=function(e){var t=e.isOpen,n=e.handleClose,i=Object(r.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,n)}),[n]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",i),function(){return window.removeEventListener("keydown",i)}}),[i]),t?l.a.createElement($l,null,l.a.createElement(tc,null,l.a.createElement(nc,null,"Keyboard shortcuts"),l.a.createElement(oc,{right:!0,onClick:n,"data-for":"tooltip","data-tip":"Close","data-place":"left"},l.a.createElement(Il,null))),l.a.createElement(ac,{style:{paddingTop:16,marginTop:16,overflowY:"auto",height:"calc(100% - 70px)"}},l.a.createElement("span",null,l.a.createElement("strong",null,"Note:")," some of the actions may have two shortcuts."),l.a.createElement(ic,{style:{marginTop:32}},"Circuit management"),l.a.createElement(Jc,null,l.a.createElement(qc,null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement($c,null,"Save"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"S")),l.a.createElement($c,null)),l.a.createElement("tr",null,l.a.createElement($c,null,"Load"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"L")),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"SHIFT"),l.a.createElement(Fc,{size:32},"S"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Undo"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"Z")),l.a.createElement($c,null)),l.a.createElement("tr",null,l.a.createElement($c,null,"Redo"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"SHIFT"),l.a.createElement(Fc,{size:32},"Z")),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"Y")))))),l.a.createElement(ic,{style:{marginTop:32}},"Component management"),l.a.createElement(Jc,null,l.a.createElement(qc,null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement($c,null,"Edit configurations"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"E"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Duplicate"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"D"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Delete"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"Delete"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Copy"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"C"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Paste"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"V"))),l.a.createElement("tr",null,l.a.createElement($c,null,"Cut"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"X")))))),l.a.createElement(ic,{style:{marginTop:32}},"Simulation control"),l.a.createElement(Jc,null,l.a.createElement(qc,null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement($c,null,"Play"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"SPACE")),l.a.createElement($c,null)),l.a.createElement("tr",null,l.a.createElement($c,null,"Pause"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"SPACE")),l.a.createElement($c,null)),l.a.createElement("tr",null,l.a.createElement($c,null,"Stop"),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"CTRL"),l.a.createElement(Fc,{size:32},"SPACE")),l.a.createElement($c,null,l.a.createElement(Fc,{size:32},"ESC")))))))):null},ts=oe.a.div(tl||(tl=Object(ae.a)(["\n  position: absolute;\n  z-index: 10;\n\n  font-size: 2em;\n  font-weight: bold;\n  font-family: monospace;\n\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  background: #ffffff80;\n  border: 1px solid #6441a5;\n  border-radius: 16px;\n\n  padding: 16px;\n"]))),ns=function(){return l.a.createElement(ts,null,"Loading example...")},is={error:"#f44336",warning:"#ff9800",info:"#2196f3",success:"#4caf50"},as=oe.a.div(nl||(nl=Object(ae.a)(["\n  position: absolute;\n  top: ",";\n  left: 50%;\n  transition: top ","ms;\n  transform: translateX(-50%);\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  border-radius: 10px;\n  min-width: 300px;\n  min-height: 50px;\n\n  cursor: pointer;\n\n  background: ",";\n  color: white;\n  font-size: 14px;\n  font-weight: bold;\n  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),\n    0px 6px 10px 0px rgba(0, 0, 0, 0.14),\n    0px 1px 18px 0px rgba(0, 0, 0, 0.12);\n  z-index: 2;\n"])),(function(e){return e.open?"5px":"-200px"}),500,(function(e){return is[e.type]})),os=oe.a.span(il||(il=Object(ae.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  width: 100%;\n  align-items: flex-start;\n  margin-top: 5px;\n  padding: 8px 16px;\n"]))),rs=Object(oe.b)(al||(al=Object(ae.a)(["\n  0% {\n    width: 100%;\n  }\n  100% {\n    width: 0;\n  }\n"]))),ls=oe.a.div(ol||(ol=Object(ae.a)(["\n  background: #ffffff80;\n  height: 5px;\n  border-radius: 5px;\n  align-self: flex-start;\n  width: 100%;\n\n  animation-name: ",";\n  animation-play-state: ",";\n  animation-duration: ","ms;\n  animation-delay: ","ms;\n  animation-timing-function: linear;\n"])),rs,(function(e){return e.paused?"paused":"running"}),(function(e){return e.timeout-250}),250),cs=function(e){var t=e.open,n=e.handleClose,i=e.message,a=e.type,o=e.timeout;return l.a.createElement(as,{type:a,timeout:o,open:t,onClick:n},l.a.createElement(os,null,i.split("\n").map((function(e,t){return l.a.createElement("div",{key:t},e)}))),t&&l.a.createElement(ls,{timeout:o}))},ss=oe.a.div(rl||(rl=Object(ae.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n\n  z-index: 2;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  background: white;\n  border-bottom: 1px solid #e5e5e5;\n  box-shadow: 0px -10px 20px 0px black;\n  padding: 12px;\n\n  transform: ",";\n  transition: 0.5s ease-in-out;\n"])),(function(e){return e.isHidden?"translateY(-100%)":"none"})),us=oe.a.div(ll||(ll=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  padding: 4px;\n  border: 1px solid\n    ",";\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid #e5e5e5;\n  }\n"])),(function(e){return e.isFocused?"#e5e5e5":"transparent"})),ds=oe.a.input(cl||(cl=Object(ae.a)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  font-size: 20px;\n"]))),ps=oe.a.button(sl||(sl=Object(ae.a)(["\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n"]))),fs=oe.a.div(ul||(ul=Object(ae.a)(["\n  display: flex;\n"]))),ms=oe.a.button.attrs((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{type:"button"})}))(dl||(dl=Object(ae.a)(["\n  border: none;\n  border-radius: 5px;\n  background: ",";\n\n  color: white;\n  font-size: 1.2em;\n\n  min-width: 110px;\n  padding: 5px 20px;\n  margin: 5px;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n  }\n"])),(function(e){switch(e.color){case"green":return"#07d26b";case"orange":return"orange";default:return"gray"}})),hs=oe.a.input(pl||(pl=Object(ae.a)(["\n  display: none;\n"]))),gs=oe.a.button.attrs((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{type:"button"})}))(fl||(fl=Object(ae.a)(["\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 50%;\n  border: 1px solid #6441a5;\n\n  width: 34px;\n  height: 34px;\n\n  margin: 5px;\n\n  color: #6441a5;\n  font-weight: bold;\n  font-size: 1.3em;\n\n  &:focus,\n  &:hover {\n    background: #6441a5;\n    border: 1px solid rgba(255, 255, 255, 0.6);\n    color: rgba(255, 255, 255, 0.6);\n  }\n"]))),bs=oe.a.div(ml||(ml=Object(ae.a)(["\n  position: absolute;\n  top: 80px;\n  transform: translateX(calc(17px + -50%));\n\n  display: flex;\n  flex-direction: column;\n\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px solid #6441a5;\n  border-radius: 10px;\n  padding: 3px;\n\n  z-index: 3;\n"]))),vs=oe.a.button(hl||(hl=Object(ae.a)(["\n  font-size: 14px;\n  color: #222;\n  padding: 16px;\n  border: 0;\n  background: transparent;\n  border-bottom: ",";\n\n  &:focus,\n  &:hover {\n    color: #6441a5;\n  }\n"])),(function(e){return e.last?"none":"1px solid #6441a5"})),ys=oe.a.button(gl||(gl=Object(ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 80px;\n  right: 20px;\n  background: white;\n  border: 1px solid #e5e5e5;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  box-shadow: 0px 0px 12px 0px #6b6b6b;\n\n  svg {\n    transform: ",";\n    transition: 0.5s ease-in-out;\n  }\n"])),(function(e){return e.isHidden?"rotate(180deg)":"none"})),Es=function(e){var t=e.circuitName,n=e.isCircuitNameFocused,i=e.handleChangeCircuitName,a=e.handleFocusCircuitName,o=e.handleBlurCircuitName,c=e.handleClickSave,s=e.handleFileLoad,u=e.handleClickKeyboardShortcuts,p=e.handleClickRedoTour,f=e.handleClickAbout,m=e.disabled,h=Object(r.useRef)(),g=Object(r.useRef)(),b=Object(r.useRef)(),v=Object(r.useRef)(),y=Object(r.useState)(!1),E=Object(d.a)(y,2),x=E[0],O=E[1],k=Object(r.useState)(!1),w=Object(d.a)(k,2),P=w[0],j=w[1],S=function(){return O(!x)},C=function(e){g.current&&!g.current.contains(e.target)&&h.current&&!h.current.contains(e.target)&&S()};return Object(r.useEffect)((function(){return document.addEventListener("mousedown",C),function(){return document.removeEventListener("mousedown",C)}})),l.a.createElement(ss,{isHidden:P},l.a.createElement(us,{isFocused:n,"data-for":"tooltip","data-tip":"Rename your circuit...","data-place":"right"},l.a.createElement(ds,{ref:b,value:t,onChange:i,onFocus:a,onBlur:o,onKeyDown:function(e){if(b.current){var t=e.key;"Enter"!==t&&"Escape"!==t||b.current.blur()}},maxLength:50}),l.a.createElement(ps,{onClick:function(){b.current&&b.current.focus()}},l.a.createElement(zl,null))),l.a.createElement(fs,null,l.a.createElement(gs,{id:"help-button",ref:h,onClick:S,"data-for":"tooltip","data-tip":"Get help...","data-place":"left"},l.a.createElement("span",null,"?")),x&&l.a.createElement(bs,{ref:g},l.a.createElement(vs,{onClick:function(){u(),S()}},"Keyboard shortcuts"),l.a.createElement(vs,{onClick:function(){j(!1),p(),S()}},"Redo the tour"),l.a.createElement(vs,{onClick:function(){f(),S()},last:!0},"About")),l.a.createElement("div",{id:"save-load-buttons"},l.a.createElement(ms,{color:"green",onClick:c,disabled:m,"data-for":"tooltip","data-tip":"Save circuit to file","data-place":"left"},"Save"),l.a.createElement(ms,{color:"orange",disabled:m,onClick:function(){v.current&&v.current.click()},"data-for":"tooltip","data-tip":"Load circuit from file...","data-place":"left"},"Load"),l.a.createElement(hs,{id:"file-input",ref:v,type:"file",accept:".lgsim",onChange:s}))),l.a.createElement(ys,{isHidden:P,onClick:function(){return j((function(e){return!e}))},"data-for":"tooltip","data-tip":P?"Show titlebar":"Hide titlebar","data-place":"left"},l.a.createElement(Al,null)))},xs=n(59),Os=n(271),ks=n.n(Os),ws=n(272),Ps=n.n(ws),js=n(273),Ss=n.n(js),Cs=n(274),Ts=n.n(Cs),As=180,Is=135,Ls={id:"tour-circuit",name:"Logossim's tour circuit",createdAt:"2020-05-21T20:18:00.000Z",updatedAt:"2020-09-08T11:47:00.000Z",circuit:{id:"tour-circuit",locked:!1,offsetX:0,offsetY:0,zoom:100,gridSize:15,layers:[{id:"4d94cbed-1005-4dc6-b0e3-44d71dc14380",type:"diagram-links",isSvg:!0,transformed:!0,models:{"clock-out-link":{id:"clock-out-link",type:"link",selected:!1,source:"clock",sourcePort:"clock-port",target:"and",targetPort:"and-port-in0",points:[{id:"bb7c0935-a272-45ea-b47a-f9b79fa7fac3",type:"point",x:30,y:15},{id:"2f339615-1c6c-450c-9862-06742ed3893f",type:"point",x:60,y:15}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"and-out-link":{id:"and-out-link",type:"link",selected:!1,source:"and",sourcePort:"and-port-out",target:null,targetPort:null,points:[{id:"e4916002-7182-4866-9df7-46473e7de8bc",type:"point",x:150,y:45},{id:"d677077d-9750-4831-be02-566294c988b1",type:"point",x:180,y:45}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"button-out-link":{id:"button-out-link",type:"link",selected:!1,source:"button",sourcePort:"c241c69b-8e1a-45be-9982-4c96a537584f",target:"and",targetPort:"and-port-in1",points:[{id:"fbd656c6-6a36-4903-94b8-c715db34052d",type:"point",x:30,y:75},{id:"f70cce22-3d5d-4257-9916-b602da9a901b",type:"point",x:60,y:75}],labels:[],bifurcations:["not-in-link"],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"not-out-link":{id:"not-out-link",type:"link",selected:!1,source:"not",sourcePort:"not-port-out",target:null,targetPort:null,points:[{id:"ba84ed0f-78ed-43c2-93d8-cf907b91b5fd",type:"point",x:120,y:120},{id:"78a6e161-97c3-4a31-a46c-244469ac75ff",type:"point",x:180,y:120}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"not-in-link":{id:"not-in-link",type:"link",selected:!1,source:null,sourcePort:null,target:"not",targetPort:"589ba5d7-8c75-4c82-9068-a67c9b023f77",points:[{id:"fada8e3b-4b46-4a24-a7ec-e3ca3bab77ab",type:"point",x:45,y:75},{id:"f31e71e6-5d72-4f17-9af1-c23bfd257980",type:"point",x:45,y:120},{id:"2e747ee3-1c90-4e95-a40b-f221eb0710b3",type:"point",x:75,y:120}],labels:[],bifurcations:[],bifurcationSource:"button-out-link",bifurcationTarget:null,value:null,bits:1}}},{id:"9d30c1dd-e474-45b1-ad88-6b7739678ef3",type:"diagram-nodes",isSvg:!1,transformed:!0,models:{clock:{id:"clock",type:"Clock",selected:!1,x:0,y:0,ports:[{id:"clock-port",type:"Port",selected:!1,x:25,y:10,name:"out",parentNode:"clock",links:["clock-out-link"],input:!1,value:null,bits:1}],configurations:{FREQUENCY_HZ:.5,HIGH_DURATION:1,LOW_DURATION:1}},and:{id:"and",type:"And",selected:!1,x:60,y:0,ports:[{id:"and-port-in0",type:"Port",selected:!1,x:55,y:10,name:"in0",parentNode:"and",links:["clock-out-link"],input:!0,value:null,bits:1},{id:"and-port-in1",type:"Port",selected:!1,x:55,y:70,name:"in1",parentNode:"and",links:["button-out-link"],input:!0,value:null,bits:1},{id:"and-port-out",type:"Port",selected:!1,x:145,y:40,name:"out",parentNode:"and",links:["and-out-link"],input:!1,value:null,bits:1}],configurations:{DATA_BITS:"1",INPUT_PORTS_NUMBER:2}},button:{id:"button",type:"Button",selected:!1,x:0,y:60,ports:[{id:"c241c69b-8e1a-45be-9982-4c96a537584f",type:"Port",selected:!1,x:25,y:70,name:"out",parentNode:"button",links:["button-out-link"],input:!1,value:null,bits:1}],configurations:{}},not:{id:"not",type:"Not",selected:!1,x:75,y:105,ports:[{id:"589ba5d7-8c75-4c82-9068-a67c9b023f77",type:"Port",selected:!1,x:70,y:115,name:"in",parentNode:"not",links:["not-in-link"],input:!0,value:null,bits:1},{id:"not-port-out",type:"Port",selected:!1,x:115,y:115,name:"out",parentNode:"not",links:["not-out-link"],input:!1,value:null,bits:1}],configurations:{DATA_BITS:"1"}}}}]}},Ns=Object(oe.b)(bl||(bl=Object(ae.a)(["\n  0% {\n    transform: scale(1);\n  }\n\n  55% {\n    background-color: rgba(42, 8, 69, 0.5);\n    transform: scale(1.2);\n  }\n"]))),Bs=oe.a.span(vl||(vl=Object(ae.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  animation: "," 1s ease-in-out infinite;\n  background-color: ",";\n  border: 1px solid rgba(42, 8, 69, 0.7);\n  border-radius: 50%;\n\n  height: ","px;\n  width: ","px;\n"])),Ns,(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size})),Ms=l.a.forwardRef((function(e,t){return l.a.createElement(Bs,Object.assign({size:30,color:"rgba(100, 65, 165, 0.3)",ref:t},e),l.a.createElement(Bs,{size:20,color:"rgba(100, 65, 165, 0.5)"}))})),zs={alignSelf:"center",borderRadius:25,boxShadow:"rgba(171, 171, 171, 0.38) 0px 13px 20px 0px",marginBottom:16},Ds=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e)).recenterTourCircuit=function(){var e=i.state.currentStep;i.props.run&&(e<3||(0,i.props.recenterCircuit)())},i.callback=function(e){var t=e.type,n=e.action,a=e.index,o=i.props,r=o.setTourRunning,l=o.loadCircuit,c=o.clearCircuit;t===xs.b.STEP_AFTER&&(2===a&&n===xs.a.NEXT&&l(),3===a&&n===xs.a.PREV&&c(),i.setState({currentStep:a+(n===xs.a.NEXT?1:-1)})),t!==xs.b.TOUR_END&&n!==xs.a.CLOSE||(c(),localStorage.setItem("tour-done",!0),r(!1),i.setState({currentStep:0}))},i.state={currentStep:0,steps:[{title:"Welcome!",content:l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("img",{src:"".concat(".","/social.png"),alt:"logossim's logo",style:{width:300,height:158,alignSelf:"center"}}),l.a.createElement("p",null,"This is ",l.a.createElement("strong",null,"logossim"),": an open source digital logic simulator, built for the web and to be extensible."),l.a.createElement("p",null,"Would you like to take a quick tour?")),target:"body",placement:"center",showProgress:!1,disableOverlayClose:!1,locale:{skip:"No, thanks",next:"Yes, please!"}},{target:"#tour-circuit-area-wrapper",title:"This is the circuit workstation",content:l.a.createElement("p",null,"Here's where you are going to draw your circuits")},{target:"#component-select-button",title:"Adding components",content:l.a.createElement("span",null,l.a.createElement("p",null,"And you'll start by adding some components."),l.a.createElement("p",null,"You can do it by clicking on this button, then you'll see all available components, so you can create awesome circuits..."),l.a.createElement("p",null,l.a.createElement("strong",null,"Hint:")," use the",l.a.createElement(Fc,{size:24},"CTRL"),l.a.createElement(Fc,{size:24},"A")," shortcut.")),placement:"top"},{target:"#tour-circuit-wrapper",title:"Adding components",content:l.a.createElement("p",null,"... like this one, for example!"),spotlightPadding:30},{target:"#tour-circuit-wrapper",title:"Managing components",content:l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("p",null,"Notice that you can right click anywhere on the canvas to access some handy commands, like duplicate, undo & redo and component configuration editing."),l.a.createElement("img",{src:Ps.a,alt:"Context menu example video",style:Object(u.a)(Object(u.a)({},zs),{},{width:268,height:132})})),spotlightPadding:30},{target:'[data-linkid="clock-out-link"]',title:"Wiring components",content:l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("p",null,"To wire components together, you can drag a component's port onto another port."),l.a.createElement("img",{src:Ts.a,alt:"Wiring components example video",style:Object(u.a)(Object(u.a)({},zs),{},{width:268,height:178})}),l.a.createElement("p",null,l.a.createElement("strong",null,"Oh! Important note:")," you can select a wire by clicking it, and delete it using the Delete key.")),placement:"top",spotlightPadding:45},{target:'[data-linkid="not-in-link"]',title:"Wiring components",content:l.a.createElement("span",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("p",null,"You can also drag a new wire from an existing wire."),l.a.createElement("img",{src:ks.a,alt:"Bifurcating wires example video",style:Object(u.a)(Object(u.a)({},zs),{},{width:268,height:160})}),l.a.createElement("p",null,l.a.createElement("strong",null,"Another important note:")," you can leave the wire with a loose end and connect it afterwards.")),placement:"top",spotlightPadding:45},{target:"#simulation-control-buttons",title:"Simulation control",content:l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("p",null,"After wiring it all together, you just need to run the simulation to test your ideas!"),l.a.createElement("img",{src:Ss.a,alt:"Simulation execution example video",style:Object(u.a)(Object(u.a)({},zs),{},{width:254,height:194})}),l.a.createElement("p",null,"Useful shortcuts:"),l.a.createElement("ul",{style:{margin:0}},l.a.createElement("li",null,l.a.createElement("strong",null,"Play/pause:"),l.a.createElement(Fc,{size:24},"SPACE")),l.a.createElement("li",null,l.a.createElement("strong",null,"Stop:"),l.a.createElement(Fc,{size:24},"CTRL"),l.a.createElement(Fc,{size:24},"SPACE")))),placement:"top"},{target:"#help-button",title:"Still need help?",content:l.a.createElement("span",null,l.a.createElement("p",null,"In case you need any assistance in the future, come back to this help button. Here you'll find:"),l.a.createElement("ol",{style:{lineHeight:"200%"}},l.a.createElement("li",null,"All keyboard shortcuts"),l.a.createElement("li",null,"More about the project"),l.a.createElement("li",null,"And this tour, if you feel like doing it another time")))},{target:"#save-load-buttons",title:"By the way...",content:l.a.createElement("span",null,l.a.createElement("p",null,"After you've done your amazing circuit, don't forget that you can save it and reload it later!"),l.a.createElement("p",null,"Useful shortcuts:"),l.a.createElement("ul",{style:{margin:0}},l.a.createElement("li",null,l.a.createElement("strong",null,"Save:"),l.a.createElement(Fc,{size:24},"CTRL"),l.a.createElement(Fc,{size:24},"S")),l.a.createElement("li",null,l.a.createElement("strong",null,"Load:"),l.a.createElement(Fc,{size:24},"CTRL"),l.a.createElement(Fc,{size:24},"L"))))},{target:"body",title:"And that's all folks!",content:l.a.createElement("div",null,l.a.createElement("p",null,"If you want to know more about the project,"," ",l.a.createElement("a",{href:"https://github.com/renato-bohler/logossim",target:"_blank",rel:"noopener noreferrer"},"check us out on GitHub!")),l.a.createElement(Xc.a,{type:"stargazers",namespace:"renato-bohler",repo:"logossim"}),l.a.createElement("p",null,l.a.createElement("strong",null,"You can help us")," make logossim better! If you know a little bit of web development, you can quite easily develop new components to the application.")),placement:"center",showProgress:!1,showSkipButton:!1,disableOverlayClose:!1}]},i}return Object(g.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.recenterTourCircuit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.recenterTourCircuit)}},{key:"render",value:function(){var e=this.state,t=e.steps,n=e.currentStep,i=this.props.run;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xs.c,{run:i,steps:t,stepIndex:n,continuous:!0,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,disableOverlayClose:!0,styles:{tooltip:{borderRadius:10},tooltipContent:{fontSize:14,textAlign:"left"},buttonBack:{color:"black",fontSize:12},buttonNext:{background:"#6441a5",fontSize:12,borderRadius:5},buttonSkip:{color:"#6441a5",fontSize:12,border:"1px solid #6441a5",borderRadius:5}},locale:{back:"Back",close:"Close",last:"Got it!",next:"Next",open:"Open",skip:"Skip"},beaconComponent:Ms,callback:this.callback}),l.a.createElement("div",{style:{display:i?"block":"none",position:"absolute",width:.75*window.innerWidth,height:.5*window.innerHeight,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},id:"tour-circuit-area-wrapper"}),l.a.createElement("div",{style:{display:i?"block":"none",position:"absolute",width:As,height:Is,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},id:"tour-circuit-wrapper"}))}}]),n}(r.Component),Rs=(n(526),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e)).areShortcutsAllowed=function(){var e=i.state,t=e.isComponentSelectOpen,n=e.isComponentEditOpen,a=e.isHelpKeyboardOpen,o=e.isHelpAboutOpen,r=e.isCircuitNameFocused,l=e.isTourRunning;return!(t||n||a||o||r||l)},i.shortcutHandler=function(e){var t=e.ctrlKey,n=e.shiftKey,a=e.code;if(i.areShortcutsAllowed()){if(t&&"KeyA"===a){if(e.preventDefault(),!i.simulation.isStopped())return;i.showAddComponent()}if(t&&"KeyE"===a){if(e.preventDefault(),!i.simulation.isStopped())return;var o=i.diagram.getSelectedNodes();if(1!==o.length)return;var r=o[0];i.showEditComponent(r)}t||"Space"!==a||(e.preventDefault(),i.simulation.isRunning()?i.handleClickPause():i.handleClickStart()),(t&&"Space"===a||"Escape"===a)&&(e.preventDefault(),i.simulation.isStopped()||i.handleClickStop()),t&&!n&&"KeyS"===a&&(e.preventDefault(),i.handleClickSave()),(t&&"KeyL"===a||t&&n&&"KeyS"===a)&&(e.preventDefault(),i.handleClickLoad())}},i.isCircuitEmpty=function(e){return!e||0===Object.keys(e.layers[1].models).length},i.loadFile=function(e){i.setState({circuitName:e.name,circuitCreatedAt:e.createdAt}),i.diagram.load(e.circuit)},i.loadExample=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState({isLoadingExample:!0}),e.next=3,window.fetch("./examples/".concat(t,".lgsim"));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,i.loadFile(a),i.setState({isLoadingExample:!1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.loadHandler=function(){var e=JSON.parse(localStorage.getItem("circuit-autosave"));i.isCircuitEmpty(null===e||void 0===e?void 0:e.circuit)?i.setState({isTourAvailable:!0}):window.confirm("Reload last unsaved circuit?")?i.loadFile(e):(i.setState({isTourAvailable:!0}),localStorage.removeItem("circuit-autosave"))},i.shouldWarnUnload=function(e,t){return!i.isCircuitEmpty(e)&&JSON.stringify(t.layers)!==JSON.stringify(e.layers)},i.unloadHandler=function(e){var t=JSON.parse(localStorage.getItem("last-saved-circuit")),n=i.generateFile();i.shouldWarnUnload(n.circuit,t.circuit)&&(i.simulation.isStopped()&&localStorage.setItem("circuit-autosave",JSON.stringify(n)),e.returnValue="You have unsaved changes. Sure you want to leave?")},i.generateFile=function(){var e=i.state,t=e.circuitName,n=e.circuitCreatedAt,a=i.diagram.serialize();return{id:a.id,name:t,createdAt:n||new Date,updatedAt:new Date,circuit:a}},i.autoSave=function(){var e=i.generateFile();"tour-circuit"!==e.circuit.id&&(i.isCircuitEmpty(e.circuit)||i.simulation.isStopped()&&localStorage.setItem("circuit-autosave",JSON.stringify(e)))},i.synchronizeSimulation=function(){var e=i.simulation.getDiff();Object.entries(e.components).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return i.diagram.synchronizeComponent(n,a)})),Object.entries(e.links).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return i.diagram.synchronizeLink(n,a)})),i.simulation.clearDiff(),i.diagram.repaint()},i.renderSimulation=function(){i.simulation.isRunning()&&(i.synchronizeSimulation(),requestAnimationFrame(i.renderSimulation))},i.handleCircuitNameChange=function(e){e.stopPropagation(),e.preventDefault(),i.setState({circuitName:e.target.value})},i.handleCircuitNameFocus=function(e){i.setState({isCircuitNameFocused:!0}),"Untitled circuit"===e.target.value&&e.target.select()},i.handleCircuitNameBlur=function(){return i.setState({isCircuitNameFocused:!1})},i.handleClickSave=function(){i.state.circuitCreatedAt||i.setState({circuitCreatedAt:new Date});var e=JSON.stringify(i.generateFile(),null,2),t=new Blob([e],{type:"application/json"}),n=i.state.circuitName.replace(/[/|\\:*?"<>]/g,"");localStorage.setItem("last-saved-circuit",e),wl.a.saveAs(t,"".concat(n,".lgsim"))},i.handleClickLoad=function(){return document.getElementById("file-input").click()},i.handleFileLoad=function(e){var t=e.target.files;if(1===t.length){var n=function(){return i.showSnackbar("Error loading circuit file:\n".concat(t[0].name))},a=new FileReader;a.onerror=n,a.onload=function(e){try{var t=JSON.parse(e.target.result);i.loadFile(t)}catch(a){n()}},a.readAsText(t.item(0))}},i.handleClickStart=function(){var e=JSON.stringify(i.diagram.serialize());localStorage.setItem("circuit-autosave",e),i.diagram.clearSelection(),i.diagram.setLocked(!0),i.simulation.start(i.diagram.getModel()),i.renderSimulation(),i.forceUpdate()},i.handleClickPause=function(){i.simulation.pause(),i.forceUpdate()},i.handleClickStop=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.simulation.stop();case 2:i.diagram.clearAllValues(),i.diagram.setLocked(!1),i.forceUpdate(),i.simulation.clearDiff();case 6:case"end":return e.stop()}}),e)}))),i.showAddComponent=function(){return i.setState({isComponentSelectOpen:!0})},i.hideAddComponent=function(){return i.setState({isComponentSelectOpen:!1})},i.showEditComponent=function(e){i.diagram.clearSelection(),i.setState({isComponentEditOpen:!0,componentEdit:e})},i.hideEditComponent=function(){return i.setState({isComponentEditOpen:!1,componentEdit:null})},i.rotateComponentBy=function(e,t){if(e.canRotate){var n=Object(u.a)({},e.configurations);n.ORIENTATION=((n.ORIENTATION+t)%4+4)%4,i.diagram.handleComponentEdit(e,n)}},i.rotateComponentLeft=function(e){return i.rotateComponentBy(e,-1)},i.rotateComponentRight=function(e){return i.rotateComponentBy(e,1)},i.setTourRunning=function(e){return i.setState({isTourRunning:e})},i.showHelpTour=function(){return i.setTourRunning(!0)},i.showHelpKeyboard=function(){return i.setState({isHelpKeyboardOpen:!0})},i.hideHelpKeyboard=function(){return i.setState({isHelpKeyboardOpen:!1})},i.showHelpAbout=function(){return i.setState({isHelpAboutOpen:!0})},i.hideHelpAbout=function(){return i.setState({isHelpAboutOpen:!1})},i.showSnackbar=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,a,o,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:"error",a=i.state.snackbar,o=3e3+50*t.split(" ").length,!a.open){e.next=8;break}return clearTimeout(a.timeoutID),i.hideSnackbar(),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:i.setState({snackbar:{open:!0,message:t,type:n,timeout:o,timeoutID:setTimeout(i.hideSnackbar,o)}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.hideSnackbar=function(){var e=i.state.snackbar;clearTimeout(e.timeoutID),i.setState((function(e){return{snackbar:Object(u.a)(Object(u.a)({},e.snackbar),{},{open:!1})}}))},i.handleLoadTourCircuit=function(){i.circuitBeforeTour=i.generateFile(),i.loadFile(Ls),i.handleCenterTourCircuitOffset()},i.handleUnloadTourCircuit=function(){i.circuitBeforeTour&&(i.loadFile(i.circuitBeforeTour),i.circuitBeforeTour=null)},i.handleCenterTourCircuitOffset=function(){i.diagram.getModel().setOffset((window.innerWidth-As)/2,(window.innerHeight-Is)/2),i.diagram.realignGrid(),i.diagram.repaint()},i.state={isComponentSelectOpen:!1,isComponentEditOpen:!1,isHelpKeyboardOpen:!1,isHelpAboutOpen:!1,componentEdit:null,isTourAvailable:!1,isTourRunning:!JSON.parse(localStorage.getItem("tour-done")),circuitName:"Untitled circuit",circuitCreatedAt:null,isCircuitNameFocused:!1,isLoadingExample:!1,snackbar:{open:!1,message:"",type:"success",timeout:0,timeoutID:null}},i.diagram=new _e(xl,i.areShortcutsAllowed,i.showSnackbar),i.simulation=new J(xl),i}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search).get("example");null===e?window.addEventListener("load",this.loadHandler):this.loadExample(e),window.addEventListener("keydown",this.shortcutHandler),window.addEventListener("beforeunload",this.unloadHandler),this.autoSaveInterval=setInterval(this.autoSave,5e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.shortcutHandler),window.addEventListener("load",this.loadHandler),window.removeEventListener("beforeunload",this.unloadHandler),clearInterval(this.autoSaveInterval)}},{key:"render",value:function(){var e=this.state,t=e.isComponentSelectOpen,n=e.isComponentEditOpen,i=e.isHelpKeyboardOpen,a=e.isHelpAboutOpen,o=e.componentEdit,r=e.isTourAvailable,c=e.isTourRunning,s=e.circuitName,u=e.isCircuitNameFocused,d=e.isLoadingExample,p=e.snackbar;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Es,{circuitName:s,isCircuitNameFocused:u,handleChangeCircuitName:this.handleCircuitNameChange,handleFocusCircuitName:this.handleCircuitNameFocus,handleBlurCircuitName:this.handleCircuitNameBlur,handleClickSave:this.handleClickSave,handleFileLoad:this.handleFileLoad,handleClickKeyboardShortcuts:this.showHelpKeyboard,handleClickRedoTour:this.showHelpTour,handleClickAbout:this.showHelpAbout,disabled:!this.simulation.isStopped()}),l.a.createElement(Ql,{state:this.simulation.getState(),handleClickStart:this.handleClickStart,handleClickPause:this.handleClickPause,handleClickStop:this.handleClickStop}),l.a.createElement(Sl,{handleClick:this.showAddComponent,disabled:!this.simulation.isStopped()}),l.a.createElement(Dc,{isOpen:t,groups:Ol,handleClose:this.hideAddComponent,handleComponentDrop:this.diagram.handleComponentDrop}),l.a.createElement(kc,{isOpen:n,components:xl,component:o,handleClose:this.hideEditComponent,handleComponentEdit:this.diagram.handleComponentEdit}),l.a.createElement(es,{isOpen:i,handleClose:this.hideHelpKeyboard}),l.a.createElement(Qc,{isOpen:a,handleClose:this.hideHelpAbout}),r&&l.a.createElement(Ds,{run:c,setTourRunning:this.setTourRunning,loadCircuit:this.handleLoadTourCircuit,clearCircuit:this.handleUnloadTourCircuit,recenterCircuit:this.handleCenterTourCircuitOffset}),d&&l.a.createElement(ns,null),l.a.createElement(de,{engine:this.diagram}),l.a.createElement(Uc,{duplicateSelected:this.diagram.duplicateSelected,cutSelected:this.diagram.cutSelected,copySelected:this.diagram.copySelected,pasteSelected:this.diagram.pasteSelected,deleteSelected:this.diagram.deleteSelected,undo:this.diagram.undo,redo:this.diagram.redo,zoomIn:this.diagram.zoomIn,zoomOut:this.diagram.zoomOut,rotateLeft:this.rotateComponentLeft,rotateRight:this.rotateComponentRight,configureComponent:this.showEditComponent}),l.a.createElement(y.a,{id:"tooltip",globalEventOff:"click"}),l.a.createElement(cs,{open:p.open,type:p.type,message:p.message,timeout:p.timeout,handleClose:this.hideSnackbar}))}}]),n}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Array.prototype.asArray=function(){return this},Array.prototype.asNumber=function(){if(this.some((function(e){return"e"===e})))return"e";if(this.some((function(e){return"x"===e})))return"x";if(this.some((function(e){return 0!==e&&1!==e})))throw new Error("[logossim] Array cannot be converted to number because it contains invalid values");return this.slice().reverse().reduce((function(e,t,n){return e+t*Math.pow(2,n)}),0)},Array.prototype.transpose=function(){var e=this;return this[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},Number.prototype.asNumber=function(){return Number(this)},Number.prototype.asArray=function(e){if(!e)throw new Error("[logossim] To transform a number to array, you need to pass as argument the length of the array");var t=Object(E.a)(this.toString(2)).map(Number);return Array(e).fill(0).concat(t).slice(t.length)},String.prototype.asArray=function(e){if(!e)throw new Error("[logossim] To transform a number to array, you need to pass as argument the length of the array");return Object(E.a)(this.padStart(e,0)).map((function(e){return"0"===e?0:"1"===e?1:e}))},String.prototype.parseBinary=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)throw new Error("[logossim] To parse a binary, you need to pass the value length in bits as first argument.");if(!t)throw new Error("[logossim] To parse a binary, you need to pass the result array length as second argument.");var i=/[^01]/g,a=new RegExp(".{1,".concat(e,"}"),"g"),o=(this.replace(i,"").match(a)||[]).map((function(e){return parseInt(e,2)}));return Array(t).fill(n).map((function(e,t){var n=o[t];return n||e}))},s.a.render(l.a.createElement(Rs,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[277,1,2]]]);
//# sourceMappingURL=main.b04d4bc7.chunk.js.map